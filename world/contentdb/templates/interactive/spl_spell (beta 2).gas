[t:template,n:base_spell_dark]
{
	doc = "Dark spell base template";
	specializes = spell;
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[magic]
	{
		magic_class = mc_combat_magic;
		skill_class = "Combat Magic";
	}
}
[t:template,n:base_spell_good]
{
	doc = "Nature spell base template";
	specializes = spell;
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[magic]
	{
		magic_class = mc_nature_magic;
		skill_class = "Nature Magic";
	}
}
[t:template,n:base_scroll_good]
{
	doc = "Nature spell base template";
	specializes = spell;

	[aspect]
	{
		model			= m_i_glb_scroll;
	}

	gui:	inventory_icon	=  b_gui_ig_i_ic_sc_001-inv;

	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[magic]
	{
		magic_class = mc_nature_magic;
		skill_class = "Nature Magic";
	}
}
[t:template,n:base_summon_dark]
{
	doc = "Dark summoning spell base template";
	specializes = base_spell_dark;

	[magic]
	{
		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				duration = #infinite;
				value = (#magic*0.7);
			}
			[*]
			{
				alteration = alter_dexterity;
				duration = #infinite;
				value = (#magic*0.5);
			}
			[*]
			{
				alteration = alter_intelligence;
				duration = #infinite;
				value = (#magic*0.2);
			}
			[*]
			{
				alteration = alter_melee;
				duration = #infinite;
				value = (#magic*1.2);
			}
			[*]
			{
				alteration = alter_ranged;
				duration = #infinite;
				value = (#magic*0.2);
			}
			[*]
			{
				alteration = alter_nature_magic;
				duration = #infinite;
				value = (#magic*0.3);
			}
			[*]
			{
				alteration = alter_combat_magic;
				duration = #infinite;
				value = (#magic*0.4);
			}
			[*]
			{
				alteration = alter_armor;
				duration = #infinite;
				value = (#magic*1.2);
			}
			[*]
			{
				alteration = alter_max_life;
				duration = #infinite;
				value = (#magic*1.2);
			}
			[*]
			{
				alteration = alter_life;
				duration = 1.0;
				value = (#magic*1.2);
			}
			[*]
			{
				alteration = alter_max_mana;
				duration = #infinite;
				value = (#magic*1.2);
			}
			[*]
			{
				alteration = alter_mana;
				duration = 1.0;
				value = (#magic*1.2);
			}
			[*]
			{
				alteration = alter_melee_damage_min;
				duration = #infinite;
				value = (#magic*1.2);
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				duration = #infinite;
				value = (#magic*1.2);
			}
			[*]
			{
				alteration = alter_ranged_damage_min;
				duration = #infinite;
				value = (#magic*1.2);
			}
			[*]
			{
				alteration = alter_ranged_damage_max;
				duration = #infinite;
				value = (#magic*1.2);
			}
			[*]
			{
				alteration = alter_cmagic_damage_min;
				duration = #infinite;
				value = (#magic*1.2);
			}
			[*]
			{
				alteration = alter_cmagic_damage_max;
				duration = #infinite;
				value = (#magic*1.2);
			}
			[*]
			{
				alteration = alter_nmagic_damage_min;
				duration = #infinite;
				value = (#magic*1.2);
			}
			[*]
			{
				alteration = alter_nmagic_damage_max;
				duration = #infinite;
				value = (#magic*1.2);
			}
		}
	}
}
[t:template,n:base_summon_good]
{
	doc = "Nature summoning spell base template";
	specializes = base_spell_good;
	[magic]
	{
		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				duration = #infinite;
				value = (#magic*0.7);
			}
			[*]
			{
				alteration = alter_dexterity;
				duration = #infinite;
				value = (#magic*0.5);
			}
			[*]
			{
				alteration = alter_intelligence;
				duration = #infinite;
				value = (#magic*0.2);
			}
			[*]
			{
				alteration = alter_melee;
				duration = #infinite;
				value = (#magic*1.2);
			}
			[*]
			{
				alteration = alter_ranged;
				duration = #infinite;
				value = (#magic*0.2);
			}
			[*]
			{
				alteration = alter_nature_magic;
				duration = #infinite;
				value = (#magic*0.3);
			}
			[*]
			{
				alteration = alter_combat_magic;
				duration = #infinite;
				value = (#magic*0.4);
			}
			[*]
			{
				alteration = alter_armor;
				duration = #infinite;
				value = (#magic*1.2);
			}
			[*]
			{
				alteration = alter_max_life;
				duration = #infinite;
				value = (#magic*1.2);
			}
			[*]
			{
				alteration = alter_life;
				duration = 1.0;
				value = (#magic*1.2);
			}
			[*]
			{
				alteration = alter_max_mana;
				duration = #infinite;
				value = (#magic*1.2);
			}
			[*]
			{
				alteration = alter_mana;
				duration = 1.0;
				value = (#magic*1.2);
			}
			[*]
			{
				alteration = alter_melee_damage_min;
				duration = #infinite;
				value = (#magic*1.2);
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				duration = #infinite;
				value = (#magic*1.2);
			}
			[*]
			{
				alteration = alter_ranged_damage_min;
				duration = #infinite;
				value = (#magic*1.2);
			}
			[*]
			{
				alteration = alter_ranged_damage_max;
				duration = #infinite;
				value = (#magic*1.2);
			}
			[*]
			{
				alteration = alter_cmagic_damage_min;
				duration = #infinite;
				value = (#magic*1.2);
			}
			[*]
			{
				alteration = alter_cmagic_damage_max;
				duration = #infinite;
				value = (#magic*1.2);
			}
			[*]
			{
				alteration = alter_nmagic_damage_min;
				duration = #infinite;
				value = (#magic*1.2);
			}
			[*]
			{
				alteration = alter_nmagic_damage_max;
				duration = #infinite;
				value = (#magic*1.2);
			}
		}
	}
}
[t:template,n:base_spell_monster]
{
	doc = "Monster spell base template";
	specializes = spell;

	[attack]{}
	[common]	{ is_pcontent_allowed = false;	}
	[gui]		{ is_droppable = false;			}
	[magic]
	{
		magic_class = mc_combat_magic;
		skill_class = "Combat Magic";
	}
}
[t:template,n:spell_accuracy]
{
	category_name = "magic";
	doc = "spell accuracy";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 300;
	}
	[common]
	{
		description = "Sharpens the concentration of the Target, granting an increase in Dexterity of <alter_dexterity>.";
		screen_name = "Accuracy";
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_013;
		inventory_icon = b_gui_ig_i_ic_sp_013_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_experience = (#magic*1.2);
		cast_range = 12;
		cast_reload_delay = 1;
		effect_duration = 74+(#magic*2);
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = (#magic+1)*2.7-.7;
		max_level = 24;
		required_level = 14;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		state_name = accuracy;
		require_state_check = false;

		[enchantments]
		{
			[*]
			{
				alteration = alter_dexterity;
				description = "raise dexterity";
				duration = 74+(#magic*2);
				frequency = 0;
				value = (#magic*0.08)+1;
			}
		}
	}

	[spell_status_effect]
	{
		description = "Dexterity Boost";
		effect_script = accuracy;
	}
}
[t:template,n:spell_acid_cloud]
{
	category_name = "magic";
	doc = "spell acid cloud";
	specializes = base_spell_dark;

	[aspect]
	{
		gold_value = 250;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Acidic gas surrounds and debilitates the Enemy.";
		screen_name = "Acid Cloud";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "acid_cloud_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_089;
		inventory_icon = b_gui_ig_i_ic_sp_089_inv;
	}
	[magic]
	{
		attack_damage_modifier_max = (#magic+1)*1.95;
		attack_damage_modifier_min = (#magic+1)*1.3+0.2;

		cast_range = 12;
		cast_reload_delay = 1;
		command_cast = true;
		effect_duration = (5+(#magic)*0.3);
		is_one_shot = true;
		does_damage_per_second = true;
		mana_cost = 16;
		mana_cost_modifier = (#magic/3*4);
		required_level = 12;
		max_level = 28;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable | tt_terrain;
		usage_context_flags = uc_offensive;
	}
	[spell_fire]
	{
		effect_script = acid_cloud;
		particle_fit = 0.1;
		ignite = false;
	}
}
[t:template,n:spell_acid_gas]
{
	category_name = "magic";
	doc = "spell acid gas";
	specializes = base_spell_dark;

	[aspect]
	{
		gold_value = 25;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "A small cloud of acidic gas descends over the Target, damaging Enemies caught within.";
		screen_name = "Acid Gas";

		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "acid_gas_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_142;
		inventory_icon = b_gui_ig_i_ic_sp_142_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (((#magic+1)*2.15+.35));
   		attack_damage_modifier_max = (((#magic+1)*3.3+.4));
		cast_range = 9;
		cast_reload_delay = 1;
		command_cast = true;
		effect_duration = ((#magic+9)*0.2);
		is_one_shot = true;
		does_damage_per_second = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*2.5);
		required_level = 1;
		max_level = 20;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable | tt_terrain;
		usage_context_flags = uc_offensive;
	}
	[spell_fire]
	{
		effect_script = acid_gas;
		particle_fit = 0.1;
		ignite = false;
	}
}
[t:template,n:spell_ambivalence]
{
	category_name = "magic";
	doc = "spell ambivalence";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 500;
	}
	[common]
	{
		screen_name = "Ambivalence";
	}
	[common]
	{
		description = "The Enemy is held in place.";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_163;
		inventory_icon = b_gui_ig_i_ic_sp_163_inv;
	}
	[magic]
	{
		cast_experience = 4;
		cast_range = 20;
		cast_reload_delay = 5;
		effect_duration = 30;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5.3573);
		max_level = 75;
		required_level = 55;
		requires_line_of_sight = true;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy;
		usage_context_flags = uc_aggressive;
	}
	[spell_switch_alignment]
	{
		alignment1 = aa_neutral;
		description = "Ambivalent";
		effect_script = ambivalence;
		num_alignments = 1;
		screen_name = "Neutral";
		immunity = "immune_align_change";
	}
}
[t:template,n:spell_blaster]
{
	category_name = "magic";
	doc = "spell blaster";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 150;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Hurls several small fireballs at the Enemy.";
		screen_name = "Blaster";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("blaster");
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "fireshot_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_151;
		inventory_icon = b_gui_ig_i_ic_sp_151_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*4.32+1;
		attack_damage_modifier_max = (#magic+1)*5.84+1;
		cast_range = 10;
		cast_reload_delay = 2;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*9.596);
		max_level = 110;
		required_level = 100;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable;
		usage_context_flags = uc_offensive;
	}
	[spell_default] {}
}
[t:template,n:spell_blaster_bomb]
{
	category_name = "magic";
	doc = "spell blaster bomb";
	specializes = base_spell_monster;
	[attack]
	{
		aiming_error_range_x = 8.5;
		aiming_error_range_y = 8.5;
		ammo_attach_bone = bone05;
		ammo_template = grenade_magic;
		area_damage_radius = 3.5;
		damage_max = 130;
		damage_min = 108;
		use_aiming_error = true;
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 2;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		velocity = 10;
	}
	[spell_launch]
	{
		number = 1;
	}
}
[t:template,n:spell_bomb]
{
	category_name = "magic";
	doc = "spell bomb";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 100;
	}
	[attack]
	{
		aiming_error_range_x = 2.5;
		aiming_error_range_y = 2.5;
		ammo_attach_bone = weapon_grip;
		ammo_template = grenade_magic;
		area_damage_radius = 3.5;
		damage_max = 0;
		damage_min = 0;
		use_aiming_error = true;
	}
	[common]
	{
		description = "The Caster summons a magical bomb and hurls it at the Enemy.";
		screen_name = "Bomb";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "bomb_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_123;
		inventory_icon = b_gui_ig_i_ic_sp_123_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*6.2+2.8;
		attack_damage_modifier_max = (#magic+1)*7.575+3.4;
		cast_range = 12;
		cast_reload_delay = 1;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*4.0984);
		max_level = 75;
		required_level = 60;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable | tt_terrain;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		velocity = 10;
	}
	[spell_launch]
	{
		number = 1;
	}
}
[t:template,n:spell_explosive_powder]
{
	category_name = "magic";
	doc = "spell explosive powder";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 30;
	}
	[attack]
	{
		aiming_error_range_x = 2.5;
		aiming_error_range_y = 2.5;
		ammo_attach_bone = weapon_grip;
		ammo_template = grenade_magic_small;
		area_damage_radius = 2;
		damage_max = 0;
		damage_min = 0;
		use_aiming_error = true;
	}
	[common]
	{
		description = "The Caster summons a magical charge and hurls it at the Enemy.";
		screen_name = "Explosive Powder";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "explosive_powder_cast" );
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_143;
		inventory_icon = b_gui_ig_i_ic_sp_143_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*4.77+0.4;
		attack_damage_modifier_max = (#magic+1)*6.6+0.4;
		cast_range = 12;
		cast_reload_delay = 1;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*4.75);
		max_level = 25;
		required_level = 3;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable | tt_terrain;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		velocity = 11;
	}
	[spell_launch]
	{
		number = 1;
	}
}
[t:template,n:spell_soul_lance]
{
	category_name = "magic";
	doc = "spell soul lance";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 100;
	}
	[attack]
	{
		ammo_attach_bone = weapon_grip;
		ammo_template = soul_lance;
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Launches a slow arcing magical Lance which pierces to the very soul of the Enemy.";
		screen_name = "Soul Lance";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "soul_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_146;
		inventory_icon = b_gui_ig_i_ic_sp_146_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*6.3+0.7;
		attack_damage_modifier_max = (#magic+1)*7.7+0.6;
		cast_range = 8;
		cast_reload_delay = 1;
		command_cast = true;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*9.875);
		max_level = 27;
		required_level = 7;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable | tt_terrain;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		velocity = 2.5;
	}
	[spell_launch]
	{
		number = 1;
	}
}
[t:template,n:spell_bombard]
{
	category_name = "magic";
	doc = "spell bombard";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 676;
	}
	[attack]
	{
		area_damage_radius = 2;
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Catapults several exploding balls of fire towards the Enemy.";
		screen_name = "Bombard";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("bombard");
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_152;
		inventory_icon = b_gui_ig_i_ic_sp_152_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*4.41+1;
		attack_damage_modifier_max = (#magic+1)*8.2+1;
		cast_range = 13;
		cast_reload_delay = 1.5;
		command_cast = true;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*6.4358);
		max_level = 112;
		required_level = 100;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_terrain;
		usage_context_flags = uc_offensive;
	}
	[spell_default] {}
}
[t:template,n:spell_braak_iceblast]
{
	category_name = "magic";
	doc = "spell braak iceblast";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 21;
		damage_min = 19;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("braak_iceblast");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 12;
		cast_reload_delay = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_default]
	{}
}
[t:template,n:spell_braak_boulder]
{
	category_name = "magic";
	doc = "spell braak boulder";
	specializes = base_spell_monster;
	[attack]
	{
		aiming_error_range_x = 2;
		aiming_error_range_y = 2;
		ammo_attach_bone = weapon_grip;
		ammo_template = braak_boulder;
		damage_max = 204;
		damage_min = 184;
		use_aiming_error = true;
	}
	[magic]
	{
		cast_range = 12;
		cast_reload_delay = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		velocity = 16;
	}
	[spell_launch]
	{
		number = 1;
	}
}
[t:template,n:spell_burn_body]
{
	category_name = "magic";
	doc = "spell burn body";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 25;
	}
	[common]
	{
		description = "Reduces an Enemy's corpse to ashes.";
		screen_name = "Burn Body";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_081;
		inventory_icon = b_gui_ig_i_ic_sp_081_inv;
	}
	[magic]
	{
		cast_experience = 1+(#magic*0.1);
		cast_range = 12;
		cast_reload_delay = 1;
		is_one_shot = true;
		mana_cost = 5;
		mana_cost_modifier = (#magic*0.3);
		max_level = 110;
		required_level = 1;
		speed_bias = 1;
		target_type_flags = tt_dead_enemy;
		usage_context_flags = uc_passive;
	}
	[spell_body_bomb]
	{
		effect_script = "burn_body";
	}
}
[t:template,n:spell_chain_lightning]
{
	category_name = "magic";
	doc = "spell chain lightning";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 150;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "A powerful bolt of lightning capable of striking four Enemies at once.";
		screen_name = "Chain Lightning";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "chain_lightning_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_058;
		inventory_icon = b_gui_ig_i_ic_sp_058_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*3.65+2;
		attack_damage_modifier_max = (#magic+1)*4.485+1;
		cast_range = 10;
		cast_reload_delay = 1;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*6.6)+1;
		max_level = 80;
		required_level = 60;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_chain_attack]
	{
		jumps			= 3;
		radius 			= 15;
		attack_script	= chain_lightning;
		effect_script	= chain_lightning_caster;
		dur				= 0.5;
	}
}
[t:template,n:spell_charged_fist]
{
	category_name = "magic";
	doc = "spell charged fist";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 15;
	}
	[common]
	{
		description = "Raises the Max Melee damage of the Caster by <alter_melee_damage_max>.";
		screen_name = "Charged Fist";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_154;
		inventory_icon = b_gui_ig_i_ic_sp_154_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_experience = (#magic*1.1);
		cast_range = 3;
		cast_reload_delay = 1;
		effect_duration = 132+(#magic*10);
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*4.2-.7);
		max_level = 15;
		required_level = 1;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_self;
		usage_context_flags = uc_defensive;
		state_name = Charge;
		require_state_check = false;
		[enchantments]
		{
			[*]
			{
				alteration = ALTER_MELEE_DAMAGE_MAX;
				description = "Raise Melee Damage";
				duration = 132+(#magic*10);
				frequency = 0;
				initial_delay = 0.25;
				value = ((1.1+((#int-10)*0.35))*2.729)-3+1; //new value to boost caster to melee equivalent max damage level
			}
		}
	}
	[spell_status_effect]
	{
		description = "Charged";
		effect_script = charged_fist;
	}
}
[t:template,n:spell_charm]
{
	category_name = "magic";
	doc = "spell charm";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 100;
	}
	[common]
	{
		description = "Forces the Enemy to guard the Caster. Mana cost dependent on power of the Target.";
		screen_name = "Charm";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("charmed_line");
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_030;
		inventory_icon = b_gui_ig_i_ic_sp_030_inv;
	}
	[magic]
	{
		cast_experience = (#magic*0.25);
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 15+(#magic*1.56);
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = (#maxlife*2.8);
		mana_cost_ui = 2;
		mana_cost_ui_modifier = (#maxmana*2.8);
		max_level = 39;
		required_level = 29;
		requires_line_of_sight = true;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy;
		usage_context_flags = uc_aggressive;
		state_name = "Charm";
	}
	[spell_charm]
	{
		description = "Charmed";
		effect_script = charmed;
		caster_description = "Controlling Summoned";
		immunity = "immune_charm";
	}
}
[t:template,n:spell_clean_strike]
{
	category_name = "magic";
	doc = "spell clean strike";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 300;
	}
	[common]
	{
		description = "Focuses the Target's mind in the heat of battle, raising the chance to hit in Melee combat by <alter_chance_to_hit_melee>%.";
		screen_name = "Clean Strike";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_045;
		inventory_icon = b_gui_ig_i_ic_sp_045_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_experience = 2+(#magic*0.15);
		cast_range = 8;
		cast_reload_delay = 1;
		effect_duration = (#magic*1.99)+33;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = (#magic+1)*5.5-0.7;
		max_level = 80;
		required_level = 44;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		state_name = cleanst;
		require_state_check = false;
		[enchantments]
		{
			[*]
			{
				alteration = alter_chance_to_hit_melee;
				description = "Increase chance to hit";
				duration = (#magic*1.99)+33;
				frequency = 0;
				initial_delay = 0.25;
				value = (#magic*0.1)+1;
			}
		}
	}
	[spell_status_effect]
	{
		description = "Clean Strike";
		effect_script = clean_strike;
	}
}
[t:template,n:spell_battle_rally]
{
	category_name = "magic";
	doc = "spell battle rally";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 300;
	}
	[common]
	{
		description = "Focuses the Party's mind in the heat of battle, raising the chance to hit in Melee combat by <alter_chance_to_hit_melee>%.";
		screen_name = "Battle Rally";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_059;
		inventory_icon = b_gui_ig_i_ic_sp_059_inv;
	}
	[magic]
	{
		cast_experience = 40;
		cast_range = 8;
		cast_reload_delay = 1;
		effect_duration = (#magic*1.45)+33;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*7.4-0.7);
		max_level = 80;
		required_level = 60;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		apply_enchantments = false;
		state_name = cleanst;
		require_state_check = false;
		[enchantments]
		{
			[*]
			{
				alteration = alter_chance_to_hit_melee;
				description = "Increase melee chance to hit";
				duration = (#magic*1.45)+33;
				frequency = 0;
				initial_delay = 0.25;
				value = (#magic*0.08)+1;
			}
		}
	}
	[spell_mass_enchant]
	{
		enchant_script	= clean_strike;
		radius			= 20.0;
		description		= "Melee Enhanced";
	}
}
[t:template,n:spell_cluster_bomb]
{
	category_name = "magic";
	doc = "spell bomb";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 100;
	}
	[attack]
	{
		aiming_error_range_x = 12.5;
		aiming_error_range_y = 12.5;
		ammo_attach_bone = weapon_grip;
		ammo_template = grenade_magic;
		area_damage_radius = 3.5;
		damage_max = 0;
		damage_min = 0;
		use_aiming_error = true;
	}
	[common]
	{
		description = "The Caster summons a flurry of magical bombs and hurls them at the Enemy.";
		screen_name = "Cluster Bomb";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "cluster_bomb_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_137;
		inventory_icon = b_gui_ig_i_ic_sp_137_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*3.55+3.5;
		attack_damage_modifier_max = (#magic+1)*5.35+3;
		cast_range = 12;
		cast_reload_delay = 3;
		command_cast = true;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*6.3711);
		max_level = 106;
		required_level = 96;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable | tt_terrain;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		velocity = 12;
	}
	[spell_launch]
	{
		number = 5;
	}
}
[t:template,n:spell_copter_lightning]
{
	category_name = "magic";
	doc = "Copter Lightning";
	specializes = base_spell_monster;
	[attack]
	{
		 damage_min = 92;
		 damage_max = 98;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("copter_lightning");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_instant_hit] {}
}
[t:template,n:spell_curse]
{
	category_name = "magic";
	doc = "spell curse";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 200;
	}
	[common]
	{
		description = "The Enemy is stricken with a curse, lowering its ability to fight and recover from damage. Mana cost dependent on the power of the Target.";
		screen_name = "Curse";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_102;
		inventory_icon = b_gui_ig_i_ic_sp_102_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_experience = 1;
		cast_range = 10;
		cast_reload_delay = 1;
		effect_duration = (#magic*2);
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = (#maxlife*2.8);
		mana_cost_ui = 2;
		mana_cost_ui_modifier = (#maxmana*2.8);
		max_level = 36;
		required_level = 26;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_defensive;
		state_name = curse;

		[enchantments]
		{
			[*]
			{
				alteration = alter_life_recovery_unit;
				description = "lower regen";
				duration = (#magic*2);
				frequency = 0;
				value = -0.5;
				multiply_value = true;
				is_enhancement = false;
			}
			[*]
			{
				alteration = alter_melee;
				description = "lower melee";
				duration = (#magic*2);
				frequency = 0;
				value = -10;
				is_enhancement = false;
			}
			[*]
			{
				alteration = alter_ranged;
				description = "lower ranged";
				duration = (#magic*2);
				frequency = 0;
				value = -10;
				is_enhancement = false;
			}
		}
	}
	[spell_status_effect]
	{
		description = "Cursed";
		effect_script = curse;
	}
}
[t:template,n:spell_dancing_zap]
{
	category_name = "magic";
	doc = "spell dancing zap";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 50;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Small globes of energy spread out toward the Target, damaging all Enemies they come in contact with.";
		screen_name = "Dancing zap"; // $ what do you think of the name "shock fairies"? -ET
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "dancing_zap_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_158;
		inventory_icon = b_gui_ig_i_ic_sp_158_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*3.39+1;
		attack_damage_modifier_max = (#magic+1)*5.69+1;
		cast_range = 11;
		cast_reload_delay = 1;
		command_cast = true;
		effect_duration = 3+(#magic*.3);
		is_one_shot = true;
		does_damage_per_second = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*8)+1;
		max_level = 26;
		required_level = 6;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable | tt_terrain;
		usage_context_flags = uc_offensive;
	}
	[spell_fire]
	{
		effect_script = dancing_zap;
		particle_fit = 0.1;
		ignite = false;
	}
}
[t:template,n:spell_darkling_spark]
{
	category_name = "magic";
	doc = "spell darkling spark";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 24;
		damage_min = 20;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("darkling_spark");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 0.5;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_default] {}
}
[t:template,n:spell_darkling_spark_forest]
{
	category_name = "magic";
	doc = "spell darkling spark forest";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 140;
		damage_min = 120;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("darkling_spark_green");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 12;
		cast_reload_delay = 0.5;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_default] {}
}
[t:template,n:spell_dark_lunger_spear]
{
	category_name = "magic";
	doc = "Dark Lunger Spear";
	specializes = base_spell_monster;
	[attack]
	{
		aiming_error_range_x = 2;
		aiming_error_range_y = 2;
		ammo_attach_bone = weapon_grip;
		ammo_template = spear_lunger;
		damage_max = 51;
		damage_min = 49;
		use_aiming_error = true;
	}
	[magic]
	{
		cast_range = 12;
		cast_reload_delay = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		velocity = 10;
	}
	[spell_launch]
	{
		number = 1;
	}
}
[t:template,n:spell_water_slinger_spear]
{
	category_name = "magic";
	doc = "Dark Lunger Spear";
	specializes = base_spell_monster;
	[attack]
	{
		aiming_error_range_x = 2;
		aiming_error_range_y = 2;
		ammo_attach_bone = weapon_grip;
		ammo_template = spear_lunger;
		damage_max = 115;
		damage_min = 105;
		use_aiming_error = true;
	}
	[magic]
	{
		cast_range = 12;
		cast_reload_delay = 0.5;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		velocity = 10;
	}
	[spell_launch]
	{
		number = 1;
	}
}
[t:template,n:spell_dark_lunger_zap]
{
	category_name = "magic";
	doc = "Dark Lunger Zap";
	specializes = base_spell_monster;
	[attack]
	{
		 damage_min = 72;
		 damage_max = 78;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("dark_lunger_zap");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 12;
		cast_reload_delay = 1;
		cast_sub_animation = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_instant_hit] {}
}
[t:template,n:spell_death_blast]
{
	category_name = "magic";
	doc = "spell death blast";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 100;
	}
	[attack]
	{
		area_damage_radius = 3;
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Those enchanted with this spell are able to deliver a fatal strike that explodes the Enemy.";
		screen_name = "Death Blast";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_099;
		inventory_icon = b_gui_ig_i_ic_sp_099_inv;
	}
	[magic]
	{
		attack_damage_modifier_max = (#magic+1)*1.95+0.35;
		attack_damage_modifier_min = (#magic+1)*1.25+1.25;
		cast_range = 8;
		cast_reload_delay = 1;
		command_cast = true;
		effect_duration = 1.6*(#magic+51);
		is_one_shot = true;
		mana_cost = 3;
		mana_cost_modifier = (#magic*10.74);
		max_level = 39;
		required_level = 24;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		state_name = deathb;
		require_state_check = false;
	}
	[physics]
	{
		explosion_magnitude = 3;
	}
	[spell_death_explosion]
	{
		max_range		= 2.0;
		explode_script	= death_blast;
		effect_script	= death_blast_indicator;
		description		= "Exploding Enemies";
	}
}
[t:template,n:spell_eagle_eye]
{
	category_name = "magic";
	doc = "spell eagle_eye";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 100;
	}
	[common]
	{
		description = "Improves the marksmanship of the Target, adding <alter_ranged> to Ranged Skill.";
		screen_name = "Eagle Eye";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_027;
		inventory_icon = b_gui_ig_i_ic_sp_027_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_experience = (#magic*1.2);
		cast_range = 16;
		cast_reload_delay = 1;
		effect_duration = ((#magic*1.44)+33);
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = (#magic+1)*6.1-0.7;
		max_level = 78;
		required_level = 55;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		state_name = dexterity;
		require_state_check = false;
		[enchantments]
		{
			[*]
			{
				alteration = alter_ranged;
				description = "Increase ranged";
				duration = ((#magic*1.44)+33);
				frequency = 0;
				initial_delay = 0.25;
				value = (#magic*0.08)+1;
			}
		}
	}
	[spell_status_effect]
	{
		description = "Eagle Eye";
		effect_script = dexterity;
	}
}
[t:template,n:spell_lightfoot]
{
	category_name = "magic";
	doc = "spell lightfoot";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 100;
	}
	[common]
	{
		description = "Makes the Party more nimble, adding <alter_dexterity> to Dexterity.";
		screen_name = "Lightfoot";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_032;
		inventory_icon = b_gui_ig_i_ic_sp_032_inv;
	}
	[magic]
	{
		cast_experience = (#magic*0.3);
		cast_range = 14;
		cast_reload_delay = 1;
		effect_duration = (#magic*1.9)+33;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = (#magic+1)+5.9-0.7;
		max_level = 55;
		required_level = 30;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		apply_enchantments = false;
		state_name = dexterity;
		require_state_check = false;
		[enchantments]
		{
			[*]
			{
				alteration = alter_dexterity;
				description = "Increase dex";
				duration = (#magic*1.9)+33;
				frequency = 0;
				initial_delay = 0.25;
				value = (#magic*0.01)+1;
			}
		}
	}
	[spell_mass_enchant]
	{
		enchant_script	= dexterity;
		radius			= 20.0;
		description		= "Dexterity Boost";
	}
}
[t:template,n:spell_anchored_shot]
{
	category_name = "magic";
	doc = "spell anchored shot";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 150;
	}
	[common]
	{
		description = "Improves the accuracy of the Target's Ranged shots by <alter_chance_to_hit_ranged>%.";
		screen_name = "Anchored Shot";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_159;
		inventory_icon = b_gui_ig_i_ic_sp_159_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_experience = 1;
		cast_range = 14;
		cast_reload_delay = 1;
		effect_duration = (#magic*.85)+33;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5-.7);
		max_level = 35;
		required_level = 20;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		state_name = intervention;
		require_state_check = false;

		[enchantments]
		{
			[*]
			{
				alteration = alter_chance_to_hit_ranged;
				description = "Ranged To Hit Bonus";
				duration = (#magic*.85)+33;
				value = (#magic*.45)+1;
			}
		}
	}
	[spell_status_effect]
	{
		description = "Accuracy";
		effect_script = divine_intervention;
	}
}
[t:template,n:spell_dragon_breath_short]
{
	category_name = "magic";
	doc = "spell dragon breath short";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 255;
		damage_min = 245;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[magic]
	{
		cast_range = 8;
		cast_reload_delay = 0;
		effect_duration = 5;
		requires_line_of_sight = true;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy;
		usage_context_flags = uc_offensive;
		cast_sub_animation = 1;
	}
	[spell_fire]
	{
		effect_script = dragon_fire_breath;
		particle_fit = 0.2;
	}
}

[t:template,n:spell_dragon_breath_long]
{
	category_name = "magic";
	doc = "spell dragon breath long";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 255;
		damage_min = 245;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[magic]
	{
		cast_range = 18;
		cast_reload_delay = 0;
		effect_duration = 5;
		requires_line_of_sight = true;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy;
		usage_context_flags = uc_offensive;
		cast_sub_animation = 0;
	}
	[spell_fire]
	{
		effect_script = dragon_fire_breath;
		particle_fit = 0.2;
	}
}

[t:template,n:spell_dragon_stomp]
{
	category_name = "magic";
	doc = "spell dragon stomp";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 255;
		damage_min = 245;
		area_damage_radius = 12;
	}
	[magic]
	{
		cast_range = 2.5;
		cast_reload_delay = 0;
		effect_duration = 1;
		requires_line_of_sight = true;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy;
		usage_context_flags = uc_offensive;
		cast_sub_animation = 2;
	}
	[spell_damage_volume]
	{
		caster_center = true;
		effect_script = earth_stomp;
	}
}
[t:template,n:spell_dragon_fire]
{
	category_name = "magic";
	doc = "spell dragon fire";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 500;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Burns enemies in front of the Caster with the Flame of a Dragon.";
		screen_name = "Dragon Fire";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_153;
		inventory_icon = b_gui_ig_i_ic_sp_153_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*4.83+1;
		attack_damage_modifier_max = (#magic+1)*6.55+1;
		cast_range = 8;
		cast_reload_delay = 1.5;
		command_cast = true;
		effect_duration = 1;
		is_one_shot = true;
		does_damage_per_second = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*8.0952);
		required_level = 104;
		max_level = 112;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable;
		usage_context_flags = uc_offensive;
	}
	[spell_fire]
	{
		effect_script = dragon_fire;
		particle_fit = 0.1;
	}
}
[t:template,n:spell_drake_breath_red]
{
	category_name = "magic";
	doc = "Drake Fire";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 200;
		damage_min = 160;
	}
	[magic]
	{
		cast_range = 8;
		cast_reload_delay = 1;
		effect_duration = 5;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_fire]
	{
		effect_script = drake_fire;
		particle_fit = 0.2;
		watch_caster = true;
	}
}

[t:template,n:spell_drake_breath_black]
{
	category_name = "magic";
	doc = "Drake Fire";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 220;
		damage_min = 190;
	}
	[magic]
	{
		cast_range = 8;
		cast_reload_delay = 1;
		effect_duration = 5;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_fire]
	{
		effect_script = drake_fire;
		particle_fit = 0.2;
		watch_caster = true;
	}
}
[t:template,n:spell_drake_breath_molten]
{
	category_name = "magic";
	doc = "Drake Fire";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 194;
		damage_min = 184;
	}
	[magic]
	{
		cast_range = 8;
		cast_reload_delay = 1;
		effect_duration = 5;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_fire]
	{
		effect_script = drake_fire;
		particle_fit = 0.2;
		watch_caster = true;
	}
}

[t:template,n:spell_drake_breath_green]
{
	category_name = "magic";
	doc = "Drake Fire";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 215;
		damage_min = 205;
	}
	[magic]
	{
		cast_range = 8;
		cast_reload_delay = 1;
		effect_duration = 5;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_fire]
	{
		effect_script = drake_poison;
		ignite = false;
		particle_fit = 0.2;
		watch_caster = true;
	}
}
[t:template,n:spell_drake_breath_white]
{
	category_name = "magic";
	doc = "Drake Fire";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 74;
		damage_min = 70;
	}
	[magic]
	{
		cast_range = 8;
		cast_reload_delay = 1;
		effect_duration = 5;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_fire]
	{
		effect_script = drake_frost;
		ignite = false;
		particle_fit = 0.2;
		watch_caster = true;
	}
}
[t:template,n:spell_drake_breath_blue]
{
	category_name = "magic";
	doc = "Drake Fire";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 155;
		damage_min = 145;
	}
	[magic]
	{
		cast_range = 8;
		cast_reload_delay = 1;
		effect_duration = 5;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_fire]
	{
		effect_script = drake_ice;
		ignite = false;
		particle_fit = 0.2;
		watch_caster = true;
	}
}
[t:template,n:spell_draw_near]
{
	category_name = "magic";
	doc = "spell Draw Near";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 100;
	}
	[common]
	{
		 description = "Enemies are lured to the Target Party Member. Stronger monsters may be immune to the Target's pull.";
		 screen_name = "Draw Near";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_043;
		inventory_icon = b_gui_ig_i_ic_sp_043_inv;
	}
	[magic]
	{
		cast_experience = 2+(#magic*0.15);
		cast_range = 10;
		cast_reload_delay = 1;
		is_one_shot = true;
		effect_duration = 2;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*3.5716);
		max_level = 78;
		required_level = 41;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_friend;
		usage_context_flags = uc_defensive;
	}
	[spell_mass_control]
	{
		effect_script = "draw";
		script_params = "";
		make_approach	= true;
		immunity = "immune_control";
	}
}
[t:template,n:spell_starburst]
{
	category_name = "magic";
	doc = "spell starburst";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 350;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Summons a luminous globe of electricity and hurls it at the Enemy.";
		screen_name = "Starburst";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("energy_ball");
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_164;
		inventory_icon = b_gui_ig_i_ic_sp_164_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*3.3+1;
		attack_damage_modifier_max = (#magic+1)*4.02+1;
		cast_range = 11;
		cast_reload_delay = 0;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*1.4)+1;
		max_level = 72;
		required_level = 62;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_terrain;
		usage_context_flags = uc_offensive;
	}
	[spell_default] {}
}
[t:template,n:spell_explode_body]
{
	category_name = "magic";
	doc = "spell explode body";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 150;
	}
	[attack]
	{
		area_damage_radius = 3;
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Blasts apart the flesh of the dead, causing concussion damage to surrounding friend and foe, alike.";
		screen_name = "Explode Body";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_097;
		inventory_icon = b_gui_ig_i_ic_sp_097_inv;
	}
	[magic]
	{
		attack_damage_modifier_max = (#magic+1)*7.32+1.32;
		attack_damage_modifier_min = (#magic+1)*4.9+0.4;
		cast_range = 8;
		cast_reload_delay = 1;
		command_cast = true;
		is_one_shot = true;
		mana_cost = 1;
		mana_cost_modifier = (#magic*1.9);
		max_level = 54;
		required_level = 20;
		speed_bias = 1;
		target_type_flags = tt_dead_enemy;
		usage_context_flags = uc_passive;
	}
	[physics]
	{
		explosion_magnitude = 3;
	}
	[spell_body_bomb]
	{
		effect_script = "explode_body";
		make_explosion = true;
	}
}
[t:template,n:spell_fireball]
{
	category_name = "magic";
	doc = "spell fireball";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 676;
	}
	[attack]
	{
		area_damage_radius = 3;
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "A large ball of explosive flame is cast at the Enemy.";
		screen_name = "Fireball";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("fireball");
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "fireball_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_096;
		inventory_icon = b_gui_ig_i_ic_sp_096_inv;
	}
	[magic]
	{
		attack_damage_modifier_max = (#magic+1)*7.75+0.75;
		attack_damage_modifier_min = (#magic+1)*4.1+0.7;
		cast_range = 10;
		cast_reload_delay = 1;
		mana_cost = 3;
		mana_cost_modifier = (#magic*2.9);
		max_level = 33;
		required_level = 20;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable | tt_terrain;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		explosion_magnitude = 3;
	}
	[spell_default] {}
}
[t:template,n:spell_fireball_gresh]
{
	category_name = "magic";
	doc = "spell fireball gresh";
	specializes = base_spell_monster;
	[attack]
	{
		area_damage_radius = 3;
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("fireball");
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "gresh_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[magic]
	{
		attack_damage_modifier_max = (#magic+1)*7.75+0.75;
		attack_damage_modifier_min = (#magic+1)*4.1+0.7;
		cast_range = 10;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable | tt_terrain;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		explosion_magnitude = 3;
	}
	[spell_default] {}
}
[t:template,n:spell_fireball_rain]
{
	category_name = "magic";
	doc = "spell fireball rain";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 100;
	}
	[attack]
	{
		area_damage_radius = 3;
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "A burning rain falls from the sky, damaging Enemies hit by the storm.";
		screen_name = "Fireball Rain";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_132;
		inventory_icon = b_gui_ig_i_ic_sp_132_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*4.2+3;
		attack_damage_modifier_max = (#magic+1)*6.3+4.5;
		cast_range = 14;
		cast_reload_delay = 4;
		command_cast = true;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*8.8235);
		max_level = 94;
		required_level = 84;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain | tt_conscious_enemy | tt_unconscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_deathrain]
	{
		drop_freq_max = .55;
		drop_freq_min = .375;
		drop_script = "fireball_storm";
		max_drops = 10;
		spawn_height = 10.0;
		spawn_radius = 2.75;
	}
	[physics]
	{
		explosion_magnitude = 3;
	}
}
[t:template,n:spell_fireblast]
{
	category_name = "magic";
	doc = "spell fireblast";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 150;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Hurls several exploding balls of fire at the Enemy.";
		screen_name = "Fireblast";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("fire_blast");
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_150;
		inventory_icon = b_gui_ig_i_ic_sp_150_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*3.74+1;
		attack_damage_modifier_max = (#magic+1)*5.61+1;
		cast_range = 10;
		cast_reload_delay = 1;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5.4945);
		max_level = 112;
		required_level = 90;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable | tt_terrain;
		usage_context_flags = uc_offensive;
	}
	[spell_default] {}
}
[t:template,n:spell_firebomb]
{
	category_name = "magic";
	doc = "spell firebomb";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 676;
	}
	[attack]
	{
		area_damage_radius = 5;
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Catapults an exploding ball of fire towards the Enemy.";
		screen_name = "Firebomb";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("firebomb");
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_148;
		inventory_icon = b_gui_ig_i_ic_sp_148_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*3.55+1;
		attack_damage_modifier_max = (#magic+1)*6.6+1;
		cast_range = 13;
		cast_reload_delay = 3;
		command_cast = true;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*4.2254);
		max_level = 90;
		required_level = 70;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable | tt_terrain;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		explosion_magnitude = 5;
	}
	[spell_default] {}
}
[t:template,n:spell_firerain]
{
	category_name = "magic";
	doc = "spell firerain";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 500;
	}
	[attack]
	{
		area_damage_radius = 2;
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "A hail of fire falls from the sky, damaging Enemies hit by the storm.";
		screen_name = "Firerain";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_117;
		inventory_icon = b_gui_ig_i_ic_sp_117_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*3.2+2.8;
		attack_damage_modifier_max = (#magic+1)*4.82+4.5;
		cast_range = 14;
		cast_reload_delay = 10;
		command_cast = true;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*6.12245);
		max_level = 58;
		required_level = 48;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable | tt_terrain;
		usage_context_flags = uc_offensive;
	}
	[spell_deathrain]
	{
		drop_freq_max = .55;
		drop_freq_min = .375;
		drop_script = "firestorm";
		max_drops = 10;
		spawn_height = 10.0;
		spawn_radius = 2.75;
	}
	[physics]
	{
		explosion_magnitude = 2;
	}

}
[t:template,n:spell_fire_cyclone]
{
	category_name = "magic";
	doc = "spell cyclone of fire";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 100;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Calls forth a cyclone from the sky, enflamed to burn the Enemy.";
		screen_name = "Cyclone Of Fire";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_135;
		inventory_icon = b_gui_ig_i_ic_sp_135_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*5.48+2;
		attack_damage_modifier_max = (#magic+1)*9.17+1;
		cast_range = 12;
		cast_reload_delay = 5;
		command_cast = true;
		effect_duration = 20;
		is_one_shot = true;
		does_damage_per_second = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*15.3846);
		max_level = 100;
		required_level = 90;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable | tt_terrain;
		usage_context_flags = uc_offensive;
	}
	[spell_fire]
	{
		effect_script = fire_cyclone;
		particle_fit = 0.1;
	}
}
[t:template,n:spell_fire_ring]
{
	category_name = "magic";
	doc = "spell fire ring";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 100;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
		area_damage_radius = 1.5;
	}
	[common]
	{
		description = "A seething ring of fire surrounds the Caster, burning any Enemy within range.";
		screen_name = "Fire Ring";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_100;
		inventory_icon = b_gui_ig_i_ic_sp_100_inv;
	}
	[magic]
	{
		attack_damage_modifier_max = (#magic+1)*2.1+1.2;
		attack_damage_modifier_min = (#magic+1)*1.9+0.8;
		cast_range = 8;
		cast_reload_delay = 1;
		command_cast = true;
		effect_duration = (#magic*0.61);
		is_one_shot = true;
		does_damage_per_second = true;
		mana_cost = 3;
		mana_cost_modifier = (#magic*9.5);
		required_level = 26;
		max_level = 52;
		requires_line_of_sight = false;
		speed_bias = 1;
		target_type_flags = tt_self;
		usage_context_flags = uc_defensive;
		state_name = "FireR";
	}
	[spell_fire]
	{
		effect_script = ring_fire;
		particle_fit = 0.1;
		description = "Fire ring";
		use_radius = true;
	}
}
[t:template,n:spell_fireshot]
{
	category_name = "magic";
	doc = "spell fireshot";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 25;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "A small ball of fire is hurled at the Enemy.";
		screen_name = "Fireshot";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("fireshot");
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "fireshot_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_078;
		inventory_icon = b_gui_ig_i_ic_sp_078_inv;
	}
	[magic]
	{
		attack_damage_modifier_max = (#magic+1)*4.8+4.2;
		attack_damage_modifier_min = (#magic+1)*2.4+1.6;
		cast_range = 10;
		cast_reload_delay = 1;
		mana_cost = 2;
		mana_cost_modifier = (#magic*1.4);
		max_level = 17;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable | tt_terrain;
		usage_context_flags = uc_offensive;
	}
	[spell_default] {}
}
[t:template,n:spell_fireshot_armor]
{
	category_name = "magic";
	doc = "spell fireshot armor";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 100;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "A cloak of protective fire surrounds the Target, adding <alter_armor> to Armor and blasting attackers with a fireshot.";
		screen_name = "Fireshot Armor";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_107;
		inventory_icon = b_gui_ig_i_ic_sp_107_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		attack_damage_modifier_max = (#magic+1)*1.05+0.3;
		attack_damage_modifier_min = (#magic+1)*0.95+0.7;
		cast_range = 8;
		cast_reload_delay = 1;
		effect_duration = (#magic*2.02)+33;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5.9)-1;
		max_level = 80;
		required_level = 63;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		state_name = Rarmor;
		require_state_check = false;
		[enchantments]
		{
			[*]
			{
				alteration = alter_armor;
				description = "Reactive Armor";
				duration = (#magic*2.02)+33;
				value = (#magic*0.05)+1;
				is_single_instance = false;
			}
		}
	}
	[spell_reactive_armor]
	{
		description = "Fireshot Armor";
		effect_script = fireshot_armor;
		react_script = fireshot;
	}
}
[t:template,n:spell_fireskull]
{
	category_name = "magic";
	doc = "spell fireskull";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 50;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Caster summons a flaming skull and hurls it at the Enemy.";
		screen_name = "Fireskull";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("fireskull");
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "fireskull_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_092;
		inventory_icon = b_gui_ig_i_ic_sp_092_inv;
	}
	[magic]
	{
		attack_damage_modifier_max = (#magic+1)*5+3;
		attack_damage_modifier_min = (#magic+1)*2.6+2.6;
		cast_range = 11;
		cast_reload_delay = 1;
		mana_cost = 5;
		mana_cost_modifier = (#magic*1.65);
		max_level = 42;
		required_level = 16;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable | tt_terrain;
		usage_context_flags = uc_offensive;
	}
	[spell_default] {}
}
[t:template,n:spell_firespray]
{
	category_name = "magic";
	doc = "spell firespray";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 150;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Multiple Fireshots fan out from the Caster's hand.";
		screen_name = "Firespray";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("fire_spray");
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "firespray_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_082;
		inventory_icon = b_gui_ig_i_ic_sp_082_inv;
	}
	[magic]
	{
		attack_damage_modifier_max = (#magic+1)*1.9+0.6;
		attack_damage_modifier_min = (#magic+1)*0.9+0.6;
		cast_range = 11;
		cast_reload_delay = 1;
		mana_cost = 4;
		mana_cost_modifier = (#magic*2);
		max_level = 26;
		required_level = 4;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable | tt_terrain;
		usage_context_flags = uc_offensive;
	}
	[spell_default] {}
}
[t:template,n:spell_fire_wall]
{
	category_name = "magic";
	doc = "spell fire wall";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 500;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
		area_damage_radius = 3.5;
	}
	[common]
	{
		description = "Brings forth a wall of flame, burning all Enemies who pass through.";
		screen_name = "Fire Wall";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_104;
		inventory_icon = b_gui_ig_i_ic_sp_104_inv;
	}
	[magic]
	{
		attack_damage_modifier_max = (#magic+1)*2.96+1.32;
		attack_damage_modifier_min = (#magic+1)*2.7+0.9;
		cast_range = 10;
		cast_reload_delay = 1;
		command_cast = true;
		effect_duration = 0.5*(#magic+9);
		is_one_shot = true;
		does_damage_per_second = true;
		mana_cost = 3;
		mana_cost_modifier = (#magic*1.47);
		required_level = 32;
		max_level = 60;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain | tt_conscious_enemy | tt_unconscious_enemy | tt_breakable;
		usage_context_flags = uc_offensive;
	}
	[spell_fire]
	{
		effect_script = fire_wall;
		particle_fit = 0.1;
		use_radius = true;
		pass_distance = true;
	}
}
[t:template,n:spell_fire_wave]
{
	category_name = "magic";
	doc = "spell fire wave";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 100;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
		area_damage_radius = 3.5;
	}
	[common]
	{
		description = "A searing wave of fire erupts from the Caster.";
		screen_name = "Fire wave";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_119;
		inventory_icon = b_gui_ig_i_ic_sp_119_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*2.9+3.2;
		attack_damage_modifier_max = (#magic+1)*3.93+3.15;
		cast_range = 12;
		cast_reload_delay = 1;
		command_cast = true;
		effect_duration = 5;
		is_one_shot = true;
		does_damage_per_second = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*4.902);
		required_level = 50;
		max_level = 65;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain | tt_conscious_enemy | tt_unconscious_enemy | tt_breakable;
		usage_context_flags = uc_offensive;
	}
	[spell_fire]
	{
		effect_script = fire_wave;
		particle_fit = 0.1;
		use_radius = true;
		pass_distance = true;
	}
}
[t:template,n:spell_flame]
{
	category_name = "magic";
	doc = "spell flame";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 500;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Burns nearby Enemies with a sweep of fire.";
		screen_name = "Flame";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_085;
		inventory_icon = b_gui_ig_i_ic_sp_085_inv;
	}
	[magic]
	{
		attack_damage_modifier_max = (#magic+1)*4.6;
		attack_damage_modifier_min = (#magic+1)*4.2+0.2;

		cast_range = 2;
		cast_reload_delay = 3;
		effect_duration = 1;
		does_damage_per_second = true;
		mana_cost = 4;
		mana_cost_modifier = (#magic*1.3);
		max_level = 22;
		required_level = 8;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable;
		usage_context_flags = uc_offensive;
//		cast_sub_animation = 1;
	}
	[spell_fire]
	{
		effect_script = flame;
		particle_fit = 0.1;
	}
}
[t:template,n:spell_flash]
{
	category_name = "magic";
	doc = "spell Flash";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 40;
	}
	[attack]
	{
		area_damage_radius = 1;
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Super-charges the air around the Target, exploding in a flash of destructive light. Damages all surrounding Enemies.";
		screen_name = "Flash";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "flash_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_156;
		inventory_icon = b_gui_ig_i_ic_sp_156_inv;
	}

	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*5.3+1.7;
		attack_damage_modifier_max = (#magic+1)*7.25+2;
		cast_range = 6;
		cast_reload_delay = 1;
		command_cast = true;
		is_one_shot = true;
		command_cast = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*13)+1;
		max_level = 21;
		required_level = 3;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable | tt_terrain;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		explosion_magnitude = 2;
	}
	[spell_area_effect]
	{
		magnitude_multiply = 2.0;
		damage_checks = 1;
		damage_frequency = 1;
		effect_script = "flash";
	}
}
[t:template,n:spell_flame_blades]
{
	category_name = "magic";
	doc = "spell flame blades";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 150;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Conjures flaming blades and hurls them at the Target.";
		screen_name = "Flame Blades";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "flame_blades" );
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "flame_blades_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_120;
		inventory_icon = b_gui_ig_i_ic_sp_120_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*3.29+4.2;
		attack_damage_modifier_max = (#magic+1)*5.59+1.5;
		cast_range = 10;
		cast_reload_delay = 1;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5.6604);
		max_level = 62;
		required_level = 52;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable;
		usage_context_flags = uc_offensive;
	}
}
[t:template,n:spell_flame_shield]
{
	category_name = "magic";
	doc = "spell flame shield";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 100;
	}
	[attack]
	{
		damage_max = 1;
		damage_min = 1;
	}
	[common]
	{
		description = "The Caster calls forth a protective coat of flame, adding <alter_armor>  to Armor and causing fire damage to any attacker.";
		screen_name = "Flame Shield";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_105;
		inventory_icon = b_gui_ig_i_ic_sp_105_inv;
	}
	[magic]
	{
		attack_damage_modifier_max = 1.5+(#magic*0.4);
		attack_damage_modifier_min = 1.5+(#magic*0.35);
		cast_reload_delay = 1;
		cast_range = 8;
		effect_duration = ((#magic*1.33)+33);
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*2.5)-1;
		max_level = 42;
		required_level = 32;
		speed_bias = 1;
		target_type_flags = tt_self;
		usage_context_flags = uc_defensive;
		state_name = Farmor;
		[enchantments]
		{
			[*]
			{
				alteration = alter_armor;
				description = "Flame Armor";
				duration = ((#magic*1.33)+33);
				value = (#magic*0.125)+1;
				is_single_instance = false;
			}
		}
	}
	[spell_fire]
	{
		description = "Flame Shield";
		effect_script = flame_shield;
		particle_fit = 0.99;
	}
}
[t:template,n:spell_freak]
{
	category_name = "magic";
	doc = "spell Freak";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 50;
	}
	[common]
	{
		screen_name = "Freak";
	}
	[common]
	{
		description = "Forces a single Enemy to flee from the Caster. Mana cost dependent on power of the Target.";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_157;
		inventory_icon = b_gui_ig_i_ic_sp_157_inv;
	}
	[magic]
	{
		cast_experience = 1;
		cast_range = 15;
		cast_reload_delay = 5;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = (#maxlife*2.5);
		mana_cost_ui = 2;
		mana_cost_ui_modifier = (#maxmana*2.5);
		max_level = 23;
		required_level = 5;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy;
		usage_context_flags = uc_aggressive;
	}
	[spell_freak]
	{
		effect_script = "freak";
		script_params = "";
		immunity = "immune_control";
	}
}
[t:template,n:spell_freeze]
{
	category_name = "magic";
	doc = "spell freeze";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 150;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Surrounds the Enemy with ice, freezing them in place. Mana cost dependent on power of the Target.";
		screen_name = "Freeze";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_165;
		inventory_icon = b_gui_ig_i_ic_sp_165_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic*0.78);
		attack_damage_modifier_max = (#magic*0.845)+1;
		cast_range = 20;
		cast_reload_delay = 1;
		effect_duration = 4;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = (#maxlife*2.5);
		mana_cost_ui = 2;
		mana_cost_ui_modifier = (#maxmana*2.5);
		max_level = 89;
		required_level = 69;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy;
		usage_context_flags = uc_offensive;
		state_name = "Frozen";
	}
	[spell_freeze]
	{
		freeze_chance = 1.0;
		freeze_threshold = 1.0;
		description = "Frozen";
		effect_script = "freeze";
		explode_script = "ice_explosion_large";
		immunity = "immune_freeze";
	}
}
[t:template,n:spell_frigid_armor]
{
	category_name = "magic";
	doc = "spell frigid armor";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 50;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "A coat of protective frost surrounds the Target, adding <alter_armor> to Armor and damaging any attacker, with a chance to freeze.";
		screen_name = "Frigid Armor";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_051;
		inventory_icon = b_gui_ig_i_ic_sp_051_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		attack_damage_modifier_min = (#magic*0.78);
		attack_damage_modifier_max = (#magic*0.845)+1;
		cast_range = 8;
		cast_reload_delay = 1;
		effect_duration = (#magic*0.99)+33;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = (((#magic+1)*6.9)-0.7);
		max_level = 60;
		required_level = 50;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		state_name = Rarmor;
		require_state_check = false;

		apply_enchantments = false;

		[enchantments]
		{
			[*]
			{
				alteration = alter_armor;
				description = "Reactive Armor";
				duration = (#magic*0.99)+33;
				value = (#magic*0.1)+1;
				is_single_instance = false;
			}
		}
	}
	[spell_reactive_armor]
	{
		description = "Frigid Armor";
		effect_script = freeze_armor;
		react_script = freeze_small;
		freeze_time = 2.0;
		freeze_description = "Frozen";
		freeze_state = "Frozen";
		explode_script = "ice_explosion_large";
		max_range	= 3;
		immunity = "immune_freeze";
	}
}
[t:template,n:spell_frostnid_freeze]
{
	category_name = "magic";
	doc = "spell frostnid freeze";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 44;
		damage_min = 40;
	}
	[magic]
	{
		cast_range = 12;
		cast_reload_delay = 1;
		effect_duration = 5;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_fire]
	{
		effect_script = frostnid_freeze;
		ignite = false;
		particle_fit = 0.7;
	}
}
[t:template,n:spell_fury_slam]
{
	category_name = "magic";
	doc = "Fury Slam";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 151;
		damage_min = 145;
		area_damage_radius = 6;
	}
	[magic]
	{
		cast_sub_animation = 5;
		cast_range = 5.8;
		cast_reload_delay = 0;
		effect_duration = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_damage_volume]
	{
		caster_center = true;
		effect_script = fury_earth_stomp;
	}
}
[t:template,n:spell_fury_spin]
{
	category_name = "magic";
	doc = "Fury Spin";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 151;
		damage_min = 145;
		area_damage_radius = 4;
	}
	[magic]
	{
		cast_sub_animation = 6;
		cast_range = 3.8;
		cast_reload_delay = 0.2;
		effect_duration = 2;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_damage_volume]
	{
		caster_center = true;
		effect_script = fury_spin;
	}
}
[t:template,n:spell_fury_gas]
{
	category_name = "magic";
	doc = "Fury Gas";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 151;
		damage_min = 145;
	}
	[magic]
	{
		cast_sub_animation = 4;
		cast_range = 8;
		cast_reload_delay = 0;
		effect_duration = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_fire]
	{
		effect_script = fury_gas;
		particle_fit = 0.2;
		watch_caster = true;
	}
}
[t:template,n:spell_fury_spit]
{
	category_name = "magic";
	doc = "Fury Spit";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 151;
		damage_min = 145;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "fury_spit_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
			[*]
			{
				action* = call_sfx_script( "fury_spit" );
				condition* = receive_world_message("we_req_cast");
			}

		}
	}
	[magic]
	{
		cast_sub_animation = 3;
		cast_range = 12;
		cast_reload_delay = 0;
		effect_duration = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_default] {}
}
[t:template,n:spell_fury_zap_1]
{
	category_name = "magic";
	doc = "Fury Zap";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 151;
		damage_min = 145;
		area_damage_radius = 8;
	}
	[magic]
	{
		cast_sub_animation = 0;
		cast_range = 12;
		cast_reload_delay = 0;
		effect_duration = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_damage_volume]
	{
		effect_script = fury_zap_1;
		start_radius = 1.5;
		length = 12.0;
	}
}
[t:template,n:spell_fury_zap_2]
{
	category_name = "magic";
	doc = "Fury Zap";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 151;
		damage_min = 145;
		area_damage_radius = 8;
	}
	[magic]
	{
		cast_sub_animation = 1;
		cast_range = 12;
		cast_reload_delay = 0;
		effect_duration = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_damage_volume]
	{
		effect_script = fury_zap_2;
		start_radius = 1.5;
		length = 12.0;
	}
}
[t:template,n:spell_fury_zap_3]
{
	category_name = "magic";
	doc = "Fury Zap";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 151;
		damage_min = 145;
		area_damage_radius = 8;
	}
	[magic]
	{
		cast_sub_animation = 2;
		cast_range = 12;
		cast_reload_delay = 0;
		effect_duration = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_damage_volume]
	{
		effect_script = fury_zap_3;
		start_radius = 1.5;
		length = 12.0;
	}
}
[t:template,n:spell_fury_blast]
{
	category_name = "magic";
	doc = "Fury blast";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 151;
		damage_min = 145;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("fury_blast");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_sub_animation = 6;
		cast_range = 12;
		cast_reload_delay = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_instant_hit] {}
}
[t:template,n:spell_gargoyle_spear]
{
	category_name = "magic";
	doc = "Gargoyle Spear";
	specializes = base_spell_monster;
	[attack]
	{
		aiming_error_range_x = 3.5;
		aiming_error_range_y = 3.5;
		ammo_attach_bone = weapon_grip;
		ammo_template = spear_gargoyle;
		damage_max = 10;
		damage_min = 8;
		use_aiming_error = true;
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		velocity = 10;
	}
	[spell_launch]
	{
		number = 1;
	}
}
[t:template,n:spell_archon_zap]
{
	category_name = "magic";
	doc = "spell archon zap";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 15;
		damage_min = 13;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("archon_zap");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 11;
		cast_reload_delay = 0.35;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_instant_hit] {}
}
[t:template,n:spell_angel_zap]
{
	category_name = "magic";
	doc = "spell angel zap";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 15;
		damage_min = 13;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("angel_zap");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 11;
		cast_reload_delay = 0.35;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_instant_hit] {}
}
[t:template,n:spell_arch_angel_zap]
{
	category_name = "magic";
	doc = "spell arch_angel zap";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 15;
		damage_min = 13;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("arch_angel_zap");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 11;
		cast_reload_delay = 0.35;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_instant_hit] {}
}
[t:template,n:spell_gargoyle_zap]
{
	category_name = "magic";
	doc = "spell gargoyle zap";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 19;
		damage_min = 12;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("gargoyle_zap");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 11;
		cast_reload_delay = 0.35;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_instant_hit] {}
}
[t:template,n:spell_gargoyle_zap_bronze]
{
	category_name = "magic";
	doc = "spell gargoyle zap bronze";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 76;
		damage_min = 74;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("gargoyle_zap_bronze");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 12;
		cast_reload_delay = 0.75;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_instant_hit] {}
}
[t:template,n:spell_ghost_sap]
{
	category_name = "magic";
	doc = "spell ghost sap";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 190;
		damage_min = 170;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("ghost_sap");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 14;
		cast_reload_delay = 0.35;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_instant_hit] {}
}
[t:template,n:spell_giant_spider_acid]
{
	category_name = "magic";
	doc = "Spider Acid";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 50;
		damage_min = 40;
	}
	[magic]
	{
		cast_range = 15;
		cast_reload_delay = 0.4;
		effect_duration = 0.8;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_fire]
	{
		effect_script = giant_spider_acid;
		ignite = false;
		particle_fit = 0.1;
	}
}
[t:template,n:spell_googore_spit]
{
	category_name = "magic";
	doc = "spell googore spit";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 180;
		damage_min = 170;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("googore_spit");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 14;
		cast_reload_delay = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_default] {}
}
[t:template,n:spell_super_gom_summon]
{
	category_name = "magic";
	doc = "spell_super_gom_summon";
	specializes = base_spell_monster;
	[inventory]
	{
		[delayed_pcontent]
		{
			[oneof*]
			{
				[all*]
				{
					chance = 0.33;
					il_main = lava_imp_03_summon;
				}
				[all*]
				{
					chance = 0.33;
					il_main = lava_imp_04_summon;
				}
				[all*]
				{
					chance = 0.34;
					il_main = molten_golem;
				}
			}
		}
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 0;
		effect_duration = 20;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
		cast_sub_animation = 4;
		state_name = "Controlling";
		caster_state_name = "Controlling";
	}
	[spell_summon_multiple]
	{
		flee = true;
		watch_summoned  = true;
		spawn_num		= 3;
		effect_script	= "fire_summon";
		spawn_radius	= 10.0;
		spawn_rate		= .75;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_gom_heal]
{
	category_name = "magic";
	doc = "spell_gom_heal";
	specializes = base_spell_monster;

	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("gom_heal");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 4;
		is_one_shot = true;
		mana_cost = 0;
		max_level = 21;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_injured_friend | tt_self;
		usage_context_flags = uc_life_giving;

		[enchantments]
		{
			[*]
			{
				alteration = alter_life;
				description = "monster heal spell";
				initial_delay = 0.35;
				duration = 2.0;
				frequency = .5;
				value = 27;

			}
		}
	}
	[spell_default] {}
}
[t:template,n:spell_gom_throw]
{
	category_name = "magic";
	doc = "spell gom throw";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 220;
		damage_min = 180;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("gom_throw");
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script("gom_throw_charge");
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[magic]
	{
		cast_range = 12;
		cast_reload_delay = 0;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
		cast_sub_animation = 1;
	}
	[spell_default] {}
}
[t:template,n:spell_gom_ground_lightning]
{
	category_name = "magic";
	doc = "spell gom ground lightning";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 10;
		damage_min = 10;
	}
	[magic]
	{
		cast_range = 12;
		cast_reload_delay = 0;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
		cast_sub_animation = 1;
	}
	[spell_fire]
	{
		effect_script = gom_ground_lightning;
		ignite = false;
		particle_fit = 0.7;
	}
}
[t:template,n:spell_gom_icesnake]
{
	category_name = "magic";
	doc = "spell gom icesnake";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 10;
		damage_min = 10;
	}
	[magic]
	{
		cast_range = 12;
		cast_reload_delay = 0;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
		cast_sub_animation = 4;
	}
	[spell_fire]
	{
		effect_script	= gom_icesnake;
		particle_fit	= 0.2;
		ignite			= false;
	}
}
[t:template,n:spell_gom_force]
{
	category_name = "magic";
	doc = "spell gom force";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 10;
		damage_min = 10;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("gom_force");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 12;
		cast_reload_delay = 0;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
		cast_sub_animation = 2;
	}
	[spell_default] {}
}
[t:template,n:spell_super_gom_force]
{
	category_name = "magic";
	doc = "spell super gom force";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 10;
		damage_min = 10;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("super_gom_force");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 12;
		cast_reload_delay = 0;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
		cast_sub_animation = 7;
	}
	[spell_default] {}
}
[t:template,n:spell_gom_flamethrower]
{
	category_name = "magic";
	doc = "spell gom flamethrower";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 10;
		damage_min = 10;
	}
	[magic]
	{
		cast_range = 8;
		cast_reload_delay = 0;
		effect_duration = 3;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
		cast_sub_animation = 3;
	}
	[spell_fire]
	{
		effect_script = gom_flamethrower;
		particle_fit = 0.2;
		watch_caster = true;
	}
}
[t:template,n:spell_gom_firebreath]
{
	category_name = "magic";
	doc = "spell gom firebreath";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 10;
		damage_min = 10;
	}
	[magic]
	{
		cast_range = 8;
		cast_reload_delay = 0;
		effect_duration = 3;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
		cast_sub_animation = 3;
	}
	[spell_fire]
	{
		effect_script = gom_firebreath;
		particle_fit = 0.2;
		watch_caster = true;
	}
}
[t:template,n:spell_gom_big_bolt]
{
	category_name = "magic";
	doc = "spell gom big bolt";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 10;
		damage_min = 10;
	}
	[magic]
	{
		cast_range = 8;
		cast_reload_delay = 0;
		effect_duration = 2.5;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
		cast_sub_animation = 5;
	}
	[spell_lightning]
	{
		dur = 1.5;
		effect_script = gom_big_bolt;
	}
}
[t:template,n:spell_gom_laser]
{
	category_name = "magic";
	doc = "spell gom laser";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 10;
		damage_min = 10;
		area_damage_radius = 8;
	}
	[magic]
	{
		cast_range = 8;
		cast_reload_delay = 0;
		effect_duration = 2.5;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
		cast_sub_animation = 6;
	}
	[spell_damage_volume]
	{
		effect_script = gom_laser;
		start_radius = 1.5;
		length = 9.0;
	}
}
[t:template,n:spell_gom_summon]
{
	category_name = "magic";
	doc = "spell gom summon";
	specializes = base_spell_monster;
	[inventory]
	{
		[delayed_pcontent]
		{
			[oneof*]
			{
				[all*]
				{
					chance = 1.000;
					il_main = suicide_elemental;
				}
			}
		}
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
		cast_sub_animation = 4;
	}
	[spell_summon_multiple]
	{
		flee = true;
		effect_script	= "fire_summon";
		spawn_radius	= 10.0;
		spawn_rate		= .75;
	}
}
[t:template,n:spell_gom_spikes]
{
	category_name = "magic";
	doc = "spell gom summon";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 10;
		damage_min = 10;
	}
	[inventory]
	{
		[delayed_pcontent]
		{
			[oneof*]
			{
				[all*]
				{
					chance = 0.500;
					il_main = spike_glb_rock_01;
				}
				[all*]
				{
					chance = 0.500;
					il_main = spike_glb_rock_02;
				}
			}
		}
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
		cast_sub_animation = 4;
	}
	[spell_summon_multiple]
	{
		effect_script = "gom_spikes";
		spawn_radius	= 2.0;
		summon_script = "gom_spikes_fire";
		particle_fit = 0.2;
	}
}
[t:template,n:spell_skull_rain]
{
	category_name = "magic";
	doc = "spell gom skull rain";
	specializes = base_spell_monster;
	[attack]
	{
		area_damage_radius = 4;
		damage_max = 10;
		damage_min = 10;
	}
	[magic]
	{
		cast_range = 12;
		cast_reload_delay = 0;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
		cast_sub_animation = 1;
	}
	[spell_deathrain]
	{
		drop_freq_max = .25;
		drop_freq_min = .2;
		drop_script = "gom_skull_rain";
		max_drops = 4;
		spawn_height = 15.0;
		spawn_radius = 6.0;
	}
	[physics]
	{
		explosion_magnitude = 4;
	}
}
[t:template,n:spell_gom_skull_storm]
{
	category_name = "magic";
	doc = "spell gom skull storm";
	specializes = base_spell_monster;
	[attack]
	{
		area_damage_radius = 4;
		damage_max = 10;
		damage_min = 10;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("gom_skull_storm_charge");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 12;
		cast_reload_delay = 0;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
		cast_sub_animation = 5;
	}
	[spell_deathrain]
	{
		drop_freq_max = .2;
		drop_freq_min = .2;
		drop_script = "gom_skull_storm";
		max_drops = 6;
		spawn_height = 15.0;
		spawn_radius = 4.0;
	}
	[physics]
	{
		explosion_magnitude = 4;
	}
}
[t:template,n:spell_gom_turret_fire]
{
	category_name = "magic";
	doc = "spell gom staff";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 190;
		damage_min = 170;
	}
	[magic]
	{
		cast_range = 14;
		cast_reload_delay = 0;
		effect_duration = 2;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
		cast_sub_animation = 0;
	}
	[spell_turret]
	{
		initial_delay = 0.4;
		shot_rate = 0.2;
		effect_script = gom_turret_fire;
		charge_effect = gom_turret_fire_charge;
	}
}
[t:template,n:spell_gom_turret_lightning]
{
	category_name = "magic";
	doc = "spell gom staff";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 180;
		damage_min = 170;
	}
	[magic]
	{
		cast_range = 14;
		cast_reload_delay = 0;
		effect_duration = 2;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
		cast_sub_animation = 0;
	}
	[spell_turret]
	{
		initial_delay = 0.4;
		lightning_dur = 0.33;
		shot_rate = 0.2;
		effect_script = gom_turret_lightning;
		charge_effect = gom_turret_lightning_charge;
	}
}
[t:template,n:spell_goo_walker_flesh]
{
	category_name = "magic";
	doc = "spell goo walker flesh";
	specializes = base_spell_monster;
	[attack]
	{
		aiming_error_range_x = 2;
		aiming_error_range_y = 2;
		ammo_attach_bone = weapon_grip;
		ammo_template = goo_walker_flesh;
		damage_max = 78;
		damage_min = 72;
		use_aiming_error = true;
	}
	[magic]
	{
		cast_range = 12;
		cast_reload_delay = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		velocity = 10;
	}
	[spell_launch]
	{
		number = 1;
	}
}
[t:template,n:spell_harmony]
{
	category_name = "magic";
	doc = "spell harmony";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 50;
	}
	[common]
	{
		description = "Combines the resonant power of Life and Mana, balanced between all Party Members within range.";
		screen_name = "Harmony";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "harmony_cast" );
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_167;
		inventory_icon = b_gui_ig_i_ic_sp_167_inv;
	}
	[magic]
	{
		cast_experience = 4+(#magic);
		cast_range = 15;
		cast_reload_delay = 1;
		effect_duration = (#magic*0.59)+33;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*9.25-0.7);
		max_level = 105;
		required_level = 80;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		state_name = Balance;
		require_state_check = false;
	}
	[spell_balance]
	{
		balance_life = true;
		balance_mana = true;
		description = "Balancing";
		effect_script = harmony;
	}
}
[t:template,n:spell_battle_healing]
{
	category_name = "magic";
	doc = "spell battle heal";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 100;
	}
	[common]
	{
		description = "Restores up to <alter_life> Health to a single Party Member.";
		screen_name = "Battle Healing";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("heal", "@body_mid");
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_088;
		inventory_icon = b_gui_ig_i_ic_sp_088_inv;
	}
	[magic]
	{
		cast_experience = 0.12*((19+((#magic+1)*6))*0.8);
		cast_range = 10;
		cast_reload_delay = 1;
		is_one_shot = true;
		mana_cost = 1;
		mana_cost_modifier = 2.4*(#magic+1) + 8.6;
		max_level = 30;
		required_level = 10;
		requires_line_of_sight = false;
		speed_bias = 1;
		target_type_flags = tt_injured_friend;
		usage_context_flags = uc_life_giving;
		[enchantments]
		{
			[*]
			{
				alteration = alter_life;
				description = "heal life";
				initial_delay = 0.5;
				value = (19+((#magic+1)*6))*0.8;
			}
		}
	}
	[spell_default] {}
}
[t:template,n:spell_heal_fairy]
{
	category_name = "magic";
	doc = "spell darkling spark";
	specializes = base_spell_monster;
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("pixie_life");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 0.5;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = TT_GOOD;
		usage_context_flags = UC_LIFE_GIVING;
		[enchantments]
		{
			[*]
			{
				alteration = alter_life;
				description = "heal life";
				value = 10;
			}
		}
	}
	[messages]
	{
		[cast]
		{
			screen_text = "Fairy has given you a gift of life.";
		}
	}
	[spell_penalty]
	{
		send_message = true;
		effect_caster = true;
		decrease_health = 3.0;
	}
}
[t:template,n:spell_heal_fairy_mana]
{
	 category_name = "magic";
	doc = "spell darkling spark";
	specializes = base_spell_monster;
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("pixie_mana");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 0.5;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = TT_GOOD;
		usage_context_flags = UC_MANA_GIVING;
		[enchantments]
		{
			[*]
			{
				alteration = alter_mana;
				description = "heal life";
				value = 10;
			}
		}
	}
	[messages]
	{
		[cast]
		{
			screen_text = "Pixie has given you a gift of mana.";
		}
	}
	[spell_penalty]
	{
		send_message = true;
		effect_caster = true;
		decrease_health = 3.0;
	}
}
[t:template,n:spell_reconstitution]
{
	category_name = "magic";
	doc = "spell reconstitution";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 50;
	}
	[common]
	{
		description = "Heals the entire Party by <alter_life> Health.";
		screen_name = "Reconstitution";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_101;
		inventory_icon = b_gui_ig_i_ic_sp_101_inv;
	}
	[magic]
	{
		cast_experience = (#magic*.15);
		cast_range = 10;
		cast_reload_delay = 1;
		effect_duration = 10;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = (#magic*10);
		max_level = 52;
		required_level = 26;
		requires_line_of_sight = false;
		speed_bias = 1;
		target_type_flags = tt_injured_friend;
		usage_context_flags = uc_life_giving;
		[enchantments]
		{
			[*]
			{
				alteration = alter_life;
				description = "heal life";
				initial_delay = 0.5;
				duration = 10.0;
				frequency = 1.0;
				value = (#magic-1)*2.4;
			}
		}
	}
	[spell_mass_enchant]
	{
		effect_script	= "healing_wind";
		enchant_script	= "healing_wind_individual";
		radius			= 10.0;
		description		= "Healing";
		effect_delay	= 10;
	}
}
[t:template,n:spell_healing_hands]
{
	category_name = "magic";
	doc = "spell healing hands";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 50;
	}
	[common]
	{
		description = "Restores up to <alter_life> Health to a single Party Member. Mana cost dependent on power of the Target.";
		screen_name = "Healing Hands";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("healing", "@body_mid");
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_002;
		inventory_icon = b_gui_ig_i_ic_sp_002_inv;
	}
	[magic]
	{
		cast_experience = [[(#src_mana > ((#maxlife - #life)*((2*(#magic+1) + 8)/(19+((#magic+1)*6))))) ? 0.12*(19+((#magic+1)*6)) : 0.12*(#src_mana*((19+((#magic+1)*6))/(2*(#magic+1) + 8))) ]];
		cast_range = 10;
		cast_reload_delay = 1;
		is_one_shot = true;
		mana_cost = 1;

		//mana per hit point = ((2*(#magic+1) + 8)/(19+((#magic+1)*6)))

		mana_cost_modifier =[[
								( (#src_mana-1) > (#maxlife - #life)*((2*(#magic+1) + 8)/(19+((#magic+1)*6))) )
								?(
									( (#maxlife - #life)*((2*(#magic+1) + 8)/(19+((#magic+1)*6))) > (2*(#magic+1) + 8) )
									?(
										(2*(#magic+1) + 8) - 1
									):
									(
										(#maxlife - #life)*((2*(#magic+1) + 8)/(19+((#magic+1)*6))) - 1
									)
								):
								(
									( ( #src_mana ) > (2*(#magic+1) + 8) )
									?(
										(2*(#magic+1) + 8) - 1
									):
									(
										 ( #src_mana >= 1.0 )
										?(
											(#src_mana-1)
										):
										(
											0.0
										)
									)
								)
								]];

			mana_cost_ui = 1;
			mana_cost_ui_modifier = ( (2.0*(#magic) + 9) > #maxmana ) ? #maxmana :	(2.0*(#magic) + 9);

		max_level = 21;
		requires_line_of_sight = false;
		speed_bias = 1;
		target_type_flags = tt_injured_friend;
		target_type_flags_not = tt_dead_friend;
		usage_context_flags = uc_life_giving;
		[enchantments]
		{
			[*]
			{
				alteration = alter_life;
				description = "healing hands spell";
				value = [[(#src_mana > ((#maxlife - #life)*((2*(#magic+1) + 8)/(19+((#magic+1)*6))))) ? (19+((#magic+1)*6)) : ( ( ( #src_mana ) > (2*(#magic+1) + 8) ) ? ((19+((#magic+1)*6))) : (#src_mana*((19+((#magic+1)*6))/(2*(#magic+1) + 8)))) ]];
			}
		}
	}
	[spell_default] {}
}
[t:template,n:scroll_healing_hands]
{
	category_name = "magic";
	doc = "scroll healing hands";
	specializes = base_scroll_good;
	[aspect]
	{
		gold_value = 50;
	}
	[common]
	{
		description = "Restores up to <alter_life> Health to a single Party Member";
		screen_name = "Healing Hands Scroll";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("healing", "@body_mid");
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sc_004;
		inventory_icon = b_gui_ig_i_ic_sc_004_inv;
	}
	[magic]
	{
		one_use = true;
		pcontent_level = 0;
		cast_experience = [[(#src_mana > ((#maxlife - #life)*((2*(#magic+1) + 8)/(19+((#magic+1)*6))))) ? 0.12*(19+((#magic+1)*6)) : 0.12*(#src_mana*((19+((#magic+1)*6))/(2*(#magic+1) + 8))) ]];
		cast_range = 10;
		cast_reload_delay = 1;
		is_one_shot = true;
		mana_cost = 1;

		//mana per hit point = ((2*(#magic+1) + 8)/(19+((#magic+1)*6)))

		mana_cost_modifier =[[
								( (#src_mana-1) > (#maxlife - #life)*((2*(#magic+1) + 8)/(19+((#magic+1)*6))) )
								?(
									( (#maxlife - #life)*((2*(#magic+1) + 8)/(19+((#magic+1)*6))) > (2*(#magic+1) + 8) )
									?(
										(2*(#magic+1) + 8) - 1
									):
									(
										(#maxlife - #life)*((2*(#magic+1) + 8)/(19+((#magic+1)*6))) - 1
									)
								):
								(
									( ( #src_mana ) > (2*(#magic+1) + 8) )
									?(
										(2*(#magic+1) + 8) - 1
									):
									(
										 ( #src_mana >= 1.0 )
										?(
											(#src_mana-1)
										):
										(
											0.0
										)
									)
								)
								]];

			mana_cost_ui = 1;
			mana_cost_ui_modifier = ( (2.0*(#magic) + 9) > #maxmana ) ? #maxmana :	(2.0*(#magic) + 9);

		max_level = 21;
		requires_line_of_sight = false;
		speed_bias = 1;
		target_type_flags = tt_injured_friend;
		usage_context_flags = uc_life_giving;
		[enchantments]
		{
			[*]
			{
				alteration = alter_life;
				description = "healing hands scroll";
				value = [[(#src_mana > ((#maxlife - #life)*((2*(#magic+1) + 8)/(19+((#magic+1)*6))))) ? (19+((#magic+1)*6)) : ( ( ( #src_mana ) > (2*(#magic+1) + 8) ) ? ((19+((#magic+1)*6))) : (#src_mana*((19+((#magic+1)*6))/(2*(#magic+1) + 8)))) ]];
			}
		}
	}
	[spell_default] {}
}
[t:template,n:spell_healing_hands_monster]
{
	category_name = "magic";
	doc = "spell healing hands monster";
	specializes = base_spell_monster;

	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("healing", "@body_mid");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 1;
		is_one_shot = true;
		mana_cost = 0;
		max_level = 21;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_injured_friend | tt_self;
		usage_context_flags = uc_life_giving;
		[enchantments]
		{
			[*]
			{
				alteration = alter_life;
				description = "monster heal spell";
				value = 100;
			}
		}
	}
	[spell_default] {}
}
[t:template,n:spell_heal_tesla_coil]
{
	category_name = "magic";
	doc = "spell heal_tesla_coil";
	specializes = base_spell_monster;

	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("heal_tesla_coil");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 25;
		cast_reload_delay = 0;
		is_one_shot = true;
		mana_cost = 0;
		requires_line_of_sight = true;
		target_type_flags = tt_injured_friend | tt_self;
		usage_context_flags = uc_life_giving;
		[enchantments]
		{
			[*]
			{
				alteration = alter_life;
				description = "coil heal spell";
				value = 100;
			}
		}
	}
	[spell_default] {}
}
[t:template,n:spell_healing_potion_monster]
{
	category_name = "magic";
	doc = "spell healing hands monster";
	specializes = base_spell_monster;

	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("health_potion_monster");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		one_use = true;
		cast_range = 10;
		cast_reload_delay = 1;
		is_one_shot = true;
		mana_cost = 0;
		max_level = 21;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_self;
		usage_context_flags = uc_life_giving;
		[enchantments]
		{
			[*]
			{
				alteration = alter_life;
				description = "healing hands spell";
				value = 10;
			}
		}
	}
	[spell_default] {}
}
[t:template,n:spell_healing_wind]
{
	category_name = "magic";
	doc = "spell healing wind";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 150;
	}
	[common]
		{
		description = "A healing breeze surrounds the Party, adding <alter_life> Health.";
		screen_name = "Healing Wind";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_009;
		inventory_icon = b_gui_ig_i_ic_sp_009_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_experience = 0.12*((#magic-1)*5);
		cast_range = 10;
		cast_reload_delay = 10;
		effect_duration = 3;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = (#magic+1)*9.15-0.7;
		max_level = 37;
		required_level = 9;
		requires_line_of_sight = false;
		speed_bias = 1;
		target_type_flags =  tt_injured_friend;
		usage_context_flags = uc_life_giving;
		state_name		= "Heal";

		[enchantments]
		{
			[*]
			{
				alteration = alter_life;
				description = "healing windspell";
				duration = 1.0;
				frequency = 0.1;
				initial_delay = 3.5;
				value = (#magic*0.9)+1;
			}
		}
	}
	[spell_mass_enchant]
	{
		effect_script	= "healing_wind";
		enchant_script	= "healing_wind_individual";
		radius			= 10.0;
		description		= "Healing";
		effect_delay	= 10;
	}
}

[t:template,n:scroll_healing_wind]
{
	category_name = "magic";
	doc = "scroll healing wind";
	specializes = base_scroll_good;
	[aspect]
	{
		gold_value = 50;
	}
	[common]
		{
		description = "A healing breeze surrounds the party, adding 45 Health to any party member in range. ";
		screen_name = "Healing Wind Scroll";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sc_006;
		inventory_icon = b_gui_ig_i_ic_sc_006_inv;
	}
	[magic]
	{
		one_use = true;
		pcontent_level = 9;

		apply_enchantments = false;
		cast_experience = 5;
		cast_range = 10;
		cast_reload_delay = 3;
		effect_duration = 3;
		is_one_shot = true;
		mana_cost = 100;
		requires_line_of_sight = false;
		speed_bias = 1;
		target_type_flags =  tt_injured_friend;
		usage_context_flags = uc_life_giving;
		state_name		= "Heal";

		[enchantments]
		{
			[*]
			{
				alteration = alter_life;
				description = "healing windspell";
				duration = 1.0;
				frequency = 0.1;
				initial_delay = 2.5;
				value = 15;
			}
		}
	}
	[spell_mass_enchant]
	{
		effect_script	= "healing_wind";
		enchant_script	= "healing_wind_individual";
		radius			= 10.0;
		description		= "Healing";
		effect_delay	= 10;
	}
}
[t:template,n:spell_heater_fire]
{
	category_name = "magic";
	doc = "Heater Fire";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 144;
		damage_min = 140;
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 1;
		effect_duration = 2;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_fire]
	{
		effect_script = heater_fire;
		particle_fit = 0.2;
	}
}
[t:template,n:spell_hold_creature]
{
	category_name = "magic";
	doc = "spell hold creature";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 150;
	}
	[common]
	{
		description = "Roots a single Enemy in place. Mana cost dependent on the power of the Target.";
		screen_name = "Hold Creature";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_010;
		inventory_icon = b_gui_ig_i_ic_sp_010_inv;
	}
	[magic]
	{
		cast_experience = (#magic*1.3);
		cast_range = 10;
		cast_reload_delay = 1;
//		effect_duration = 15+(#magic*3);  //Old Duration
		effect_duration = (#magic*1.1)-5;  //New duration 11/19/01
		is_one_shot = true;
		mana_cost = 0;
//		mana_cost_modifier = (#src_maxlife*5);  //Old cost modifier
		mana_cost_modifier = (#maxlife)*2;  //New cost modifier 11/19/01
		mana_cost_ui = 2;
		mana_cost_ui_modifier = (#maxmana*2);
		required_level = 11;
		max_level = 21;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy;
		usage_context_flags = uc_aggressive;
	}
	[spell_switch_alignment]
	{
		description = "Hold Creature spell";
		effect_script = hold_creature;
		screen_name = "Held";
		immunity = "immune_align_change";
		freeze = true;
	}
}
[t:template,n:spell_hydrack_fire]
{
	category_name = "magic";
	doc = "Hydrak Fire";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 118;
		damage_min = 114;
		area_damage_radius = 3;
	}
	[magic]
	{
		cast_range = 14;
		cast_reload_delay = 1;
		effect_duration = 3;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_damage_volume]
	{
		effect_script = hydrack_fire;
		start_radius = 1.5;
		length = 11.0;
	}
}
[t:template,n:spell_iceblast]
{
	category_name = "magic";
	doc = "spell iceblast";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 100;
	}
	[attack]
	{
		aiming_error_range_x = 10;
		aiming_error_range_y = 10;
		ammo_attach_bone = weapon_grip;
		ammo_template = ice_shard_01;
		damage_max = 0;
		damage_min = 0;
		use_aiming_error = true;
	}
	[common]
	{
		description = "Sprays a tight cone of ice shards at the Enemy.";
		screen_name = "Iceblast";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "iceblast_launch" );
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "iceblast_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_024;
		inventory_icon = b_gui_ig_i_ic_sp_024_inv;
	}
	[magic]
	{
		attack_damage_modifier_max = (#magic+1)*6.04+3;
		attack_damage_modifier_min = (#magic+1)*3.27+1.33;
		cast_range = 12;
		cast_reload_delay = 1;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*1.8)+1;
		max_level = 48;
		required_level = 24;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable | tt_terrain;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		velocity = 6;
	}
	[spell_launch]
	{
		number = 5;
		freeze_time = 2.0;
		freeze_chance = 0.01;
		freeze_description = "Frozen";
		freeze_state = "Frozen";
		explode_script = "ice_explosion_large";
		immunity = "immune_freeze";
	}
}
[t:template,n:spell_icefury]
{
	category_name = "magic";
	doc = "spell icefury";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 100;
	}
	[attack]
	{
		aiming_error_range_x = 8;
		aiming_error_range_y = 8;
		ammo_attach_bone = weapon_grip;
		ammo_template = ice_shard_06;
		damage_max = 0;
		damage_min = 0;
		use_aiming_error = true;

	}
	[common]
	{
		description = "Swift, razor-like shards of ice cut into the Enemy.";
		screen_name = "Icefury";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "iceblast_launch" );
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "icefury_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_054;
		inventory_icon = b_gui_ig_i_ic_sp_054_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*3.5+1;
		attack_damage_modifier_max = (#magic+1)*5.86+1;
		cast_range = 12;
		cast_reload_delay = 1;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*7.2)+1;
		max_level = 74;
		required_level = 54;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable | tt_terrain;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		velocity = 16;
	}
	[spell_launch]
	{
		delay_between_shots = false;
		number = 8;
		randomize_offsets = true;
		use_offsets = true;
		x_offset = .5;
		y_offset = .5;
		z_offset = .5;
		freeze_time = 2.0;
		freeze_chance = 0.01;
		freeze_description = "Frozen";
		freeze_state = "Frozen";
		explode_script = "ice_explosion_large";
		immunity = "immune_freeze";
	}
}
[t:template,n:spell_ice_mage_iceblast]
{
	category_name = "magic";
	doc = "spell Ice mage iceblast";
	specializes = base_spell_monster;
	[attack]
	{
		aiming_error_range_x = 8;
		aiming_error_range_y = 8;
		ammo_attach_bone = weapon_grip;
		ammo_template = ice_shard_03;
		damage_max = 29;
		damage_min = 27;
		use_aiming_error = true;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "ice_mage_charge" );
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 12;
		cast_reload_delay = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		velocity = 16;
	}
	[spell_launch]
	{
		launch_freq_min = .25;
		launch_freq_max = .25;
		number = 5;
	}
}
[t:template,n:spell_ice_mage_balls]
{
	category_name = "magic";
	doc = "spell Ice mage balls";
	specializes = base_spell_monster;
	[attack]
	{
		 damage_max = 99;
		 damage_min = 95;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "ice_mage_balls" );
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 12;
		cast_reload_delay = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_default] { }
}
[t:template,n:spell_iceshard]
{
	category_name = "magic";
	doc = "spell ice shard";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 450;
	}
	[attack]
	{
		aiming_error_range_x = 2;
		aiming_error_range_y = 2;
		ammo_attach_bone = weapon_grip;
		ammo_template = ice_shard_03;
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		screen_name = "Iceshard";
	}
	[common]
	{
		description = "A jagged shard of ice arcs toward the Enemy.";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "ice_shard_launch" );
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "iceshard_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_011;
		inventory_icon = b_gui_ig_i_ic_sp_011_inv;
	}
	[magic]
	{
		attack_damage_modifier_max = (#magic+1)*6.2;
		attack_damage_modifier_min = (#magic+1)*3.3+0.2;

		cast_range = 12;
		cast_reload_delay = 1;
		mana_cost = 2;
		mana_cost_modifier = (#magic+1.2);
		max_level = 37;
		required_level = 12;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_terrain;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		velocity = 7.2;
	}
	[spell_launch]
	{
		number = 1;
		freeze_time = 2.0;
		freeze_chance = 0.01;
		freeze_description = "Frozen";
		freeze_state = "Frozen";
		explode_script = "ice_explosion_large";
		immunity = "immune_freeze";
	}
}
[t:template,n:spell_ice_storm]
{
	category_name = "magic";
	doc = "spell ice storm";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 100;
	}
	[attack]
	{
		area_damage_radius = 4;
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "A storm of jagged ice shards fall from the sky around the Target.";
		screen_name = "Ice Storm";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_065;
		inventory_icon = b_gui_ig_i_ic_sp_065_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*2.98+1;
		attack_damage_modifier_max = (#magic+1)*5.55+1;
		cast_range = 14;
		cast_reload_delay = 10;
		command_cast = true;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*4.8)+1;
		max_level = 92;
		required_level = 72;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain | tt_conscious_enemy | tt_unconscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_deathrain]
	{
		drop_freq_max = .175;
		drop_freq_min = .125;
		drop_script = "ice_storm";
		max_drops = 25;
		spawn_height = 10.0;
		spawn_radius = 6;
	}
}
[t:template,n:spell_implosion]
{
	category_name = "magic";
	doc = "spell implosion";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 100;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Waves of disruptive energy collapse around the Enemy.";
		screen_name = "Implosion";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("implosion");
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_069;
		inventory_icon = b_gui_ig_i_ic_sp_069_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*7.745+1;
		attack_damage_modifier_max = (#magic+1)*8.56+1;
		cast_range = 8;
		cast_reload_delay = 5;
		command_cast = true;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*18.0723);
		max_level = 102;
		required_level = 82;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable;
		usage_context_flags = uc_offensive;
	}
	[spell_instant_hit] {}
}
[t:template,n:spell_incinerate]
{
	category_name = "magic";
	doc = "spell incinerate";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 500;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Burning flames envelop the Enemy.";
		screen_name = "Incinerate";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_134;
		inventory_icon = b_gui_ig_i_ic_sp_134_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*3.85+2;
		attack_damage_modifier_max = (#magic+1)*4.235+4;
		cast_range = 9;
		cast_reload_delay = 1;
		command_cast = true;
		effect_duration = 3;
		is_one_shot = true;
		does_damage_per_second = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5.0562);
		max_level = 108;
		required_level = 88;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable;
		usage_context_flags = uc_offensive;
	}
	[spell_fire]
	{
		effect_script = incinerate;
		particle_fit = 0.1;
	}
}
[t:template,n:spell_inferno]
{
	category_name = "magic";
	doc = "spell inferno";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 500;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "A broad sweep of flame extends from the Caster.";
		screen_name = "Inferno";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_122;
		inventory_icon = b_gui_ig_i_ic_sp_122_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*4.8+3;
		attack_damage_modifier_max = (#magic+1)*5.33+2;
		cast_range = 3;
		cast_reload_delay = 1;
		effect_duration = 1;
		does_damage_per_second = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*1.6364);
		max_level = 74;
		required_level = 54;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable;
		usage_context_flags = uc_offensive;
	}
	[spell_fire]
	{
		effect_script = inferno;
		particle_fit = 0.1;
	}
}
[t:template,n:spell_inspiration]
{
	category_name = "magic";
	doc = "spell inspiration";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 150;
	}
	[common]
	{
		description = "Enhances casting abilities of the Target, raising Intelligence by <alter_intelligence>, Nature Magic by <alter_nature_magic> and Combat Magic by <alter_combat_magic>.";
		screen_name = "Inspiration";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_161;
		inventory_icon = b_gui_ig_i_ic_sp_161_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_experience = 1;
		cast_range = 9;
		cast_reload_delay = 1;
		effect_duration = (#magic*0.62)+33;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*17.25-0.7);
		max_level = 62;
		required_level = 45;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		state_name = inspiration;
		require_state_check = false;
		[enchantments]
		{
			[*]
			{
				alteration = alter_intelligence;
				description = "Insight";
				duration = (#magic*0.62)+33;
				value = (#magic*0.05)+1;
			}
			[*]
			{
				alteration = alter_nature_magic;
				description = "Good Skill";
				duration = (#magic*0.62)+33;
				value = 1;
			}
			[*]
			{
				alteration = alter_combat_magic;
				description = "Dark Skill";
				duration = (#magic*0.62)+33;
				value = 1;
			}
		}
	}
	[spell_status_effect]
	{
		description = "Inspired";
		effect_script = inspiration;
	}
}
[t:template,n:spell_focused_mind]
{
	category_name = "magic";
	doc = "spell focused_mind";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 100;
	}
	[common]
	{
		description = "Concentration of the Target is improved, adding <alter_intelligence> to their Intelligence.";
		screen_name = "Focused Mind";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_025;
		inventory_icon = b_gui_ig_i_ic_sp_025_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_experience = (#magic*1.2);
		cast_range = 8;
		cast_reload_delay = 1;
		effect_duration = (#magic*2.8)+33;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = (#magic+1)*4.8-0.7;
		required_level = 24;
		max_level = 48;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		state_name 	= inspiration;
		require_state_check = false;
		[enchantments]
		{
			[*]
			{
				alteration = alter_intelligence;
				description = "Insight";
				duration = (#magic*2.8)+33;
				value = (#magic*0.1)+1;
			}
		}
	}
	[spell_status_effect]
	{
		description 	= "Intelligence Boost";
		effect_script = inspiration;
	}
}
[t:template,n:spell_mind_spring]
{
	category_name = "magic";
	doc = "spell mind_spring";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 100;
	}
	[common]
	{
		description = "Boosts the Party's Intelligence by <alter_intelligence> for the duration of the spell. Party Members must be within cast range.";
		screen_name = "Mind Spring";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_041;
		inventory_icon = b_gui_ig_i_ic_sp_041_inv;
	}
	[magic]
	{
		cast_experience = (#magic*0.3);
		cast_range = 10;
		cast_reload_delay = 1;
		effect_duration = (#magic*1.5)+33;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = (#magic+1)*6.5-0.7;
		required_level = 38;
		max_level = 58;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		apply_enchantments = false;
		state_name 		= inspiration;
		require_state_check = false;

		[enchantments]
		{
			[*]
			{
				alteration = alter_intelligence;
				description = "Insight";
				duration = (#magic*1.5)+33;
				value = ((#magic*0.035)+1);
			}
		}
	}
	[spell_mass_enchant]
	{
		enchant_script	= "inspiration";
		radius			= 20.0;
		description 	= "Intelligence Boost";
	}
}
[t:template,n:spell_invincibility]
{
	category_name = "magic";
	doc = "spell invincibility";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 150;
	}
	[common]
	{
		description = "The Target is rendered impervious to attack.";
		screen_name = "Invincibility";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_049;
		inventory_icon = b_gui_ig_i_ic_sp_049_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_experience = 1;
		cast_range = 8;
		cast_reload_delay = 1;
		effect_duration = (#magic*0.22);
		is_one_shot = true;
		max_level = 70;
		required_level = 46;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*17-0.7);
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		state_name = invulnerability;
		require_state_check = false;
		[enchantments]
		{
			[*]
			{
				alteration = alter_armor;
				description = "Invulnerability";
				duration = (#magic*0.22);
				value = (1000);
				is_single_instance = false;
			}
		}
	}
	[spell_status_effect]
	{
		description = "Invincible";
		effect_script = invulnerability;
	}
}
[t:template,n:spell_iron_fist]
{
	category_name = "magic";
	doc = "spell iron fist";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 300;
	}
	[common]
	{
		description = "Raises the Strength of a Party Member by <alter_strength>.";
		screen_name = "Iron Fist";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_007;
		inventory_icon = b_gui_ig_i_ic_sp_007_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_experience = (#magic*1.2);
		cast_range = 8;
		cast_reload_delay = 1;
		effect_duration = 74+(#magic*2);
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = (#magic+1)*7-.8;
		max_level = 24;
		required_level = 8;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		state_name = fist;
		require_state_check = false;
		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				description = "Raise Strength";
				duration = 74+(#magic*2);
				frequency = 0;
				initial_delay = 0.25;
				value = (#magic*0.01)+1;
			}
		}
	}
	[spell_status_effect]
	{
		description = "Strengthened";
		effect_script = iron_fist;
	}
}

[t:template,n:spell_blood_and_iron]
{
	category_name = "magic";
	doc = "spell blood and iron";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 100;
	}
	[common]
	{
		description = "Raises the Strength of every Party Member by <alter_strength>.";
		screen_name = "Blood And Iron";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_048;
		inventory_icon = b_gui_ig_i_ic_sp_048_inv;
	}
	[magic]
	{
		cast_experience = 40;
		cast_range = 8;
		cast_reload_delay = 1;
		effect_duration = (#magic*0.6)+33;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*8.5-0.7);
		max_level = 56;
		required_level = 46;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		apply_enchantments = false;
		state_name = fist;
		require_state_check = false;
		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				description = "Raise Strength";
				duration = (#magic*0.6)+33;
				frequency = 0;
				initial_delay = 0.25;
				value = ((#Magic*0.01)+1);
			}
		}
	}
	[spell_mass_enchant]
	{
		enchant_script	= blood_and_iron;
		radius			= 20.0;
		description		= "Strengthened";
	}
}
[t:template,n:spell_kell_blast]
{
	category_name = "magic";
	doc = "Kell Blast";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 280;
		damage_min = 240;
	}
	[magic]
	{
		cast_range = 13;
		cast_reload_delay = 1;
		cast_sub_animation = 0;
		effect_duration = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_fire]
	{
		 effect_script = kell_blast;
		 particle_fit = 0.2;
	}
}
[t:template,n:spell_kell_bolt]
{
	category_name = "magic";
	doc = "Kell Bolt";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 240;
		damage_min = 220;
	}
	[magic]
	{
		cast_range = 14;
		cast_reload_delay = 1;
		cast_sub_animation = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_lightning]
	{
		dur = 0.333;
		effect_script = kell_bolt;
	}
}
[t:template,n:spell_kell_shot]
{
	category_name = "magic";
	doc = "Kell Shot";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 240;
		damage_min = 220;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("kell_shot");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 13;
		cast_reload_delay = 1;
		cast_sub_animation = 2;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_default] {}
}
[t:template,n:spell_kill]
{
	category_name = "magic";
	doc = "spell kill";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 100;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Battle fury wells up, infusing the Caster with a killing touch.";
		screen_name = "Kill";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "kill" );
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "kill_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_075;
		inventory_icon = b_gui_ig_i_ic_sp_075_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*6.2+3;
		attack_damage_modifier_max = (#magic+1)*7.61+1;
		cast_range = 1.4;
		cast_reload_delay = 1;
		command_cast = true;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*19.0722);
		max_level = 116;
		required_level = 96;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_instant_hit] {}
}
[t:template,n:spell_killing_fist]
{
	category_name = "magic";
	doc = "spell killing fist";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 100;
	}
	[attack]
	{
		ammo_attach_bone = weapon_grip;
		ammo_template = rock_fist;
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "The Enemy is struck by a thunderous force.";
		screen_name = "Killing Fist";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "killing_fist" );
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_077;
		inventory_icon = b_gui_ig_i_ic_sp_077_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*4.8+9;
		attack_damage_modifier_max = (#magic+1)*7.29+4;
		cast_range = 13;
		cast_reload_delay = 1;
		command_cast = true;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*19.0292);
		max_level = 122;
		required_level = 102;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable | tt_terrain;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		velocity = 20;
	}
	[spell_launch]
	{
		number = 1;
	}
}
[t:template,n:spell_lava_imp_bullets]
{
	category_name = "magic";
	doc = "spell lava imp bullets";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 190;
		damage_min = 170;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("lava_imp_bullets");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 11;
		cast_reload_delay = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_default] {}
}
[t:template,n:spell_lava_imp_ball]
{
	category_name = "magic";
	doc = "spell lava imp bullets";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 200;
		damage_min = 160;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("lava_imp_ball");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 11;
		cast_reload_delay = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_default] {}
}
[t:template,n:spell_lava_spirit_fire]
{
	category_name = "magic";
	doc = "Lava Spirit Fire";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 245;
		damage_min = 205;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("lava_spirit_charge");
				condition* = receive_world_message("we_req_cast_charge");
			}
			[*]
			{
				action* = call_sfx_script( "lava_spirit_fire" );
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 14;
		cast_reload_delay = 1;
		effect_duration = 5;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
}
[t:template,n:spell_leech_life]
{
	category_name = "magic";
	doc = "spell leech life";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 75;
	}
	[common]
	{
		screen_name = "Leech Life";
	}
	[common]
	{
		description = "Tears <alter_life> Health from the Enemy and gives it to the Caster.";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "leech_life_cast" );
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "leech_life_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_080;
		inventory_icon = b_gui_ig_i_ic_sp_080_inv;
	}
	[magic]
	{
		cast_range = 6;
		cast_reload_delay = 1;
		mana_cost = 4;
		mana_cost_modifier = (#magic*1.7);
		max_level = 110;
		required_level = 2;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy;
		usage_context_flags = uc_offensive;
		[enchantments]
		{
			[*]
			{
				alteration = alter_life;
				description = "leech life";
				duration = 1;
				effect_script = leech_life_blob;
				frequency = 0.1;
				initial_delay = 0.0;
				is_enhancement = true;
				is_permanent = true;
				is_source_transfer = true;
				is_target_transfer = false;
				max_value = 10;
				transfer_efficiency = 1;
				value = (1 + #magic*0.27)/10;
			}
		}
	}
	[spell_default] {}
}
[t:template,n:spell_life_balance]
{
	category_name = "magic";
	doc = "spell life balance";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 50;
	}
	[common]
	{
		description = "Creates a healing resonance, allowing all Party Members to share Health.";
		screen_name = "Life Balance";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "life_balance_cast" );
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_073;
		inventory_icon = b_gui_ig_i_ic_sp_073_inv;
	}
	[magic]
	{
		cast_experience = 4+(#magic);
		cast_range = 15;
		cast_reload_delay = 1;
		effect_duration = (#magic*1.775)+33;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*10.5-0.7);
		max_level = 86;
		required_level = 66;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		state_name = Balance;
		require_state_check = false;
	}
	[spell_balance]
	{
		balance_life = true;
		description = "Balancing";
		effect_script = life_balance;
	}
}
[t:template,n:spell_light_ray]
{
	category_name = "magic";
	doc = "spell light ray";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 160;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Focuses an intense beam of pure energy at the Enemy.";
		screen_name = "Light Ray";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "light_ray_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_050;
		inventory_icon = b_gui_ig_i_ic_sp_050_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*4.65+1;
		attack_damage_modifier_max = (#magic+1)*5.13+1;
		cast_range = 8;
		cast_reload_delay = 1;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*4)+1;
		max_level = 58;
		required_level = 48;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable;
		usage_context_flags = uc_offensive;
	}
	[spell_lightning]
	{
		effect_script	= laser_minor;
		dur				= 0.5;
	}
}
[t:template,n:spell_lightning]
{
	category_name = "magic";
	doc = "spell lightning";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 150;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Piercing bolts of lightning cut into the Enemy.";
		screen_name = "Lightning";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "lightning_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_019;
		inventory_icon = b_gui_ig_i_ic_sp_019_inv;
	}
	[magic]
	{
		attack_damage_modifier_max = (#magic+1)*4+0.1;
		attack_damage_modifier_min = (#magic+1)*2.95+0.1;
		cast_range = 10;
		cast_reload_delay = 1;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*1.6)+1;
		max_level = 44;
		required_level = 20;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable;
		usage_context_flags = uc_offensive;
	}
	[spell_lightning]
	{
		effect_script	= lightning;
		dur				= 0.3;
	}
}
[t:template,n:spell_lightning_blast]
{
	category_name = "magic";
	doc = "spell lightning blast";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 100;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "A focused mass of lightning electrocutes the Enemy.";
		screen_name = "Lightning Blast";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "lightning_blast_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_038;
		inventory_icon = b_gui_ig_i_ic_sp_038_inv;
	}
	[magic]
	{
		attack_damage_modifier_max = (#magic+1)*6.06+3.7;
		attack_damage_modifier_min = (#magic+1)*4.44+3.7;
		cast_range = 10;
		cast_reload_delay = 1;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*6.6)+1;
		max_level = 56;
		required_level = 36;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable;
		usage_context_flags = uc_offensive;
	}
	[spell_lightning]
	{
		effect_script	= lightning_blast;
		dur				= 0.3;
	}
}
[t:template,n:spell_lightning_bolt]
{
	category_name = "magic";
	doc = "spell lightning bolt";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 150;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "A sustained arc of lightning ignites the Enemy until the Caster is disturbed. If the Caster is hit or moves, the spell is interrupted.";
		screen_name = "Lightning Bolt";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "lightning_bolt_chargeup" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_070;
		inventory_icon = b_gui_ig_i_ic_sp_070_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*2.9+4;
		attack_damage_modifier_max = (#magic+1)*3.9+7;
		cast_range = 15;
		cast_reload_delay = 15;
		effect_duration = 10;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*1.2943);
		max_level = 104;
		required_level = 84;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable;
		usage_context_flags = uc_offensive;
		cast_sub_animation = 1;
	}
	[spell_turret]
	{
		initial_delay = 0.4;
		shot_rate = 1.0;
		lightning_dur = 1.0;
		effect_script = lightning_bolt;
		charge_effect = lightning_bolt_charge;
		require_still = true;
	}
}
[t:template,n:spell_lightning_storm]
{
	category_name = "magic";
	doc = "spell lightning storm";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 100;
	}
	[common]
	{
		description = "A severe lightning storm is called forth by the Caster, damaging all Enemies in the area.";
		screen_name = "Lightning Storm";
	}
	[attack]
	{
		area_damage_radius = 1;
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("lightning_storm_cast");
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_074;
		inventory_icon = b_gui_ig_i_ic_sp_074_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*3.2+7.5;
		attack_damage_modifier_max = (#magic+1)*6+8;
		cast_range = 14;
		cast_reload_delay = 10;
		command_cast = true;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*3.8462);
		max_level = 110;
		required_level = 90;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable | tt_terrain;
		usage_context_flags = uc_offensive;
	}
	[spell_deathrain]
	{
		drop_freq_max = .5;
		drop_freq_min = .375;
		drop_script = "lightning_storm";
		max_drops = 10;
		spawn_height = 20.0;
		spawn_radius = 5.75;
	}
}
[t:template,n:spell_magic_armor]
{
	category_name = "magic";
	doc = "spell magic armor";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 50;
	}
	[common]
	{
		description = "A shell of magical energy surrounds the Target, adding <alter_armor> to Armor.";
		screen_name = "Magic Armor";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_004;
		inventory_icon = b_gui_ig_i_ic_sp_004_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_experience = (#magic);
		cast_range = 9;
		cast_reload_delay = 1;
		effect_duration = 15*(#magic+13);
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = (#magic+1)*2.1-.8;
		max_level = 24;
		required_level = 3;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		state_name = armor;
		require_state_check = false;

		[enchantments]
		{
			[*]
			{
				alteration = alter_armor;
				description = "Magic Armor";
				duration = 15*(#magic+13);
				value = (#magic*0.2)+1;
				is_single_instance = false;
			}
		}
	}
	[spell_status_effect]
	{
		description = "Armored";
		effect_script = magic_armor;
	}
}
[t:template,n:spell_stone_skin]
{
	category_name = "magic";
	doc = "spell stone skin";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 100;
	}
	[common]
	{
		description = "A shell of magical energy surrounds the Party, adding <alter_armor> to Armor.";
		screen_name = "Stone Skin";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_029;
		inventory_icon = b_gui_ig_i_ic_sp_029_inv;
	}
	[magic]
	{
		cast_experience = (#magic*0.25);
		cast_range = 8;
		cast_reload_delay = 1;
		effect_duration = (#magic*5.28)+33;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = (#magic+1)*6.7-.7;
		max_level = 48;
		required_level =28;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		apply_enchantments = false;
		state_name		= armor;
		require_state_check = false;

		[enchantments]
		{
			[*]
			{
				alteration = alter_armor;
				description = "Magic Armor";
				duration = (#magic*5.28)+33;
				value = 1+(#magic*0.35);
			}
		}
	}
	[spell_mass_enchant]
	{
		enchant_script	= magic_armor;
		radius			= 20.0;
		description		= "Armored";
	}
}
[t:template,n:spell_major_heal]
{
	category_name = "magic";
	doc = "spell major heal";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 100;
	}
	[common]
	{
		description = "Restores up to <alter_life> Health to a single Party Member.";
		screen_name = "Major Heal";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("major_heal", "@body_mid");
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_034;
		inventory_icon = b_gui_ig_i_ic_sp_034_inv;
	}
	[magic]
	{
		cast_experience = (#magic*0.25);
		cast_range = 12;
		cast_reload_delay = 1;
		is_one_shot = true;
		mana_cost = 1;
		mana_cost_modifier = (#magic*2.815);
		max_level = 70;
		required_level = 32;
		requires_line_of_sight = false;
		speed_bias = 1;
		target_type_flags = tt_injured_friend;
		usage_context_flags = uc_life_giving;
		[enchantments]
		{
			[*]
			{
				alteration = alter_life;
				description = "heal life";
				initial_delay = 0.5;
				value = (#magic+4)*5;
			}
		}
	}
	[spell_default] {}
}
[t:template,n:scroll_major_heal]
{
	category_name = "magic";
	doc = "scroll major heal";
	specializes = base_scroll_good;
	[aspect]
	{
		gold_value = 50;
	}
	[common]
	{
		description = "Restores up to <alter_life> Health to a single Party Member";
		screen_name = "Major Heal Scroll";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("major_heal", "@body_mid");
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sc_008;
		inventory_icon = b_gui_ig_i_ic_sc_008_inv;
	}
	[magic]
	{
		one_use = true;
		pcontent_level = 20;
		cast_experience = (32*0.25);
		cast_range = 10;
		cast_reload_delay = 1;
		is_one_shot = true;
		mana_cost = 1;
		mana_cost_modifier = (32*2.815);
		requires_line_of_sight = false;
		speed_bias = 1;
		target_type_flags = tt_injured_friend;
		usage_context_flags = uc_life_giving;
		[enchantments]
		{
			[*]
			{
				alteration = alter_life;
				description = "heal life";
				initial_delay = 0.5;
				value = (32+4)*5;
			}
		}
	}
	[spell_default] {}
}
[t:template,n:spell_nurture]
{
	category_name = "magic";
	doc = "spell nurture";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 50;
	}
	[common]
	{
		description = "Heals the entire Party by <alter_life> Health.";
		screen_name = "Nurture";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_047;
		inventory_icon = b_gui_ig_i_ic_sp_047_inv;
	}
	[magic]
	{
		cast_experience = 19 + 12*(#magic+1);
		cast_range = 14;
		cast_reload_delay = 1;
		effect_duration = 10;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*12.5108);
		max_level = 56;
		required_level = 46;
		requires_line_of_sight = false;
		speed_bias = 1;
		target_type_flags = tt_injured_friend;
		usage_context_flags = uc_life_giving;
		[enchantments]
		{
			[*]
			{
				alteration = alter_life;
				description = "heal life";
				initial_delay = 0.5;
				duration = 10.0;
				frequency = 1.0;
				value = ((19.0+((#magic+1.0)*12.0)) / 10.0);
			}
		}
	}
	[spell_mass_enchant]
	{
		effect_script	= "healing_wind";
		enchant_script	= "healing_wind_individual";
		radius			= 10.0;
		description		= "Healing";
		effect_delay	= 10;
	}
}
[t:template,n:spell_malign]
{
	category_name = "magic";
	doc = "spell malign";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 1000;
	}
	[common]
	{
		description = "Weakens an enemy by reducing its Armor. Mana cost dependent on the power of the Target.";
		screen_name = "Malign";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_149;
		inventory_icon = b_gui_ig_i_ic_sp_149_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_experience = 1;
		cast_range = 20;
		cast_reload_delay = 1;
		effect_duration = 30+(#magic*2);
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = (#maxlife*2.5);
		mana_cost_ui = 2;
		mana_cost_ui_modifier = (#maxmana*2.5);
		max_level = 111;
		required_level = 80;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy;
		usage_context_flags = uc_aggressive;
		state_name = malign;
		[enchantments]
		{
			[*]
			{
				alteration = alter_armor;
				description = "Lower Strength";
				duration = 30+(#magic*2);
				frequency = 0;
				initial_delay = 0.25;
				value = -(#armor*.2);
			}
		}
	}
	[spell_status_effect]
	{
		description = "Maligned";
		effect_script = malign;
	}
}
[t:template,n:spell_mana_balance]
{
	category_name = "magic";
	doc = "spell mana balance";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 50;
	}
	[common]
	{
		description = "Creates a magic resonance, allowing all Party Members to share and balance out Mana. Party Members must be within cast Range.";
		screen_name = "Mana Balance";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "mana_balance_cast" );
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_162;
		inventory_icon = b_gui_ig_i_ic_sp_162_inv;
	}
	[magic]
	{
		cast_experience = 4+(#magic);
		cast_range = 15;
		cast_reload_delay = 1;
		effect_duration = (#magic*2.55)+33;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = (#magic+1)*10.6-0.7;
		max_level = 66;
		required_level = 46;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		state_name = Balance;
		require_state_check = false;
	}
	[spell_balance]
	{
		balance_mana = true;
		description = "Balancing";
		effect_script = mana_balance;
	}
}
[t:template,n:spell_mana_channel]
{
	category_name = "magic";
	doc = "spell mana channel";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 250;
	}
	[common]
	{
		description = "Mana is transferred from the Caster to the Target.";
		screen_name = "Mana Channel";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script("mana_channel");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_012;
		inventory_icon = b_gui_ig_i_ic_sp_012_inv;
	}
	[magic]
	{
		cast_experience = (#magic/3);
		cast_range = 14;
		cast_reload_delay = 1;
		is_one_shot = true;
		max_level = 30;
		required_level = 12;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*0.9231);
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_can_store_mana | tt_and | TT_ACTOR;
		usage_context_flags = uc_mana_giving;
		[enchantments]
		{
			[*]
			{
				alteration = alter_mana;
				description = "mana channel";
				duration = (#magic*.85);
				effect_script = mana_trail;
				frequency = 2.00;
				initial_delay = 0.0;
				is_enhancement = true;
				is_permanent = true;
				is_source_transfer = false;
				is_target_transfer = true;
				transfer_efficiency = 1;
				value = #magic*5;
			}
		}
	}
	[spell_default] {}
}
[t:template,n:scroll_mana_channel]
{
	category_name = "magic";
	doc = "scroll mana channel";
	specializes = base_scroll_good;
	[aspect]
	{
		gold_value = 50;
	}
	[common]
	{
		description = "Mana is transferred from the Caster to the Target";
		screen_name = "Mana Channel Scroll";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script("mana_channel");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sc_007;
		inventory_icon = b_gui_ig_i_ic_sc_007_inv;
	}
	[magic]
	{
		one_use = true;
		pcontent_level = 5;
		cast_experience = (13);
		cast_range = 10;
		cast_reload_delay = 1;
		is_one_shot = true;
		mana_cost = 2;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_can_store_mana | tt_and | TT_ACTOR;
		usage_context_flags = uc_mana_giving;
		[enchantments]
		{
			[*]
			{
				alteration = alter_mana;
				description = "mana channel";
				duration = (13);
				effect_script = mana_trail;
				frequency = 2.0;
				initial_delay = 0.0;
				is_enhancement = true;
				is_permanent = true;
				is_source_transfer = false;
				is_target_transfer = true;
				transfer_efficiency = 1;
				value = 65;
			}
		}
	}
	[spell_default] {}
}

[t:template,n:spell_mana_chant]
{
	category_name = "magic";
	doc = "spell mana chant";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 150;
	}
	[common]
		{
		description = "Adds to Mana recovery at the expense of Health.";
		screen_name = "Mana Chant";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_087;
		inventory_icon = b_gui_ig_i_ic_sp_087_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_experience = (#magic*0.2);
		cast_range = 10;
		cast_reload_delay = 5;
		effect_duration = 30 + (#magic*2);
		is_one_shot = true;
		mana_cost = 0;
		max_level = 22;
		required_level = 9;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_self;
		usage_context_flags = uc_mana_getting;
		state_name = chant;
		require_state_check = false;

		[enchantments]
		{
			[*]
			{
				alteration = alter_mana_recovery_unit;
				description = "Charge Mana";
				duration = 30 + (#magic*2);
				value = (#magic/2);
			}
			[*]
			{
				alteration = alter_life;
				description = "Lower life";
				initial_delay = 0.25;
				enhancement = false;
				value = -(#magic*6.8);
			}
		}
	}

	[spell_status_effect]
	{
		 description = "Mana Boost";
		effect_script = mana_chant;
	}
}
[t:template,n:spell_mana_shield]
{
	category_name = "magic";
	doc = "spell mana shield";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 100;
	}
	[common]
	{
		description = "The Caster draws from Mana reserves to absorb damage.";
		screen_name = "Mana Shield";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_016;
		inventory_icon = b_gui_ig_i_ic_sp_016_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_experience = 4+(#magic);
		cast_range = 8;
		cast_reload_delay = 1;
		effect_duration = (#magic*1.99)+33;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*2-.7);
		max_level = 37;
		required_level = 17;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		state_name = mshield;
		require_state_check = false;
		[enchantments]
		{
			[*]
			{
				alteration = alter_mana_shield;
				description = "Mana shield";
				duration = (#magic*1.99)+33;
				value = 50;
			}
		}
	}
	[spell_status_effect]
	{
		description = "Mana Shield";
		effect_script = mana_shield;
	}
}
[t:template,n:spell_metal_shards]
{
	category_name = "magic";
	doc = "spell metal shards";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 100;
	}
	[attack]
	{
		aiming_error_range_x = 9;
		aiming_error_range_y = 9;
		ammo_attach_bone = weapon_grip;
		ammo_template = metal_shard;
		damage_max = 0;
		damage_min = 0;
		use_aiming_error = true;
	}
	[common]
	{
		description = "Jagged metal shards are cast at the Enemy.";
		screen_name = "Metal Shards";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "dust_explosion_cast" );
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "metal_shards_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_110;
		inventory_icon = b_gui_ig_i_ic_sp_110_inv;
	}
	[magic]
	{
		attack_damage_modifier_max = (#magic+1)*6.05+4.15;
		attack_damage_modifier_min = (#magic+1)*3.19+3.97;
		cast_range = 12;
		cast_reload_delay = 1;
		mana_cost = 1;
		mana_cost_modifier = (#magic*1.1);
		max_level = 84;
		required_level = 36;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable | tt_terrain;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		velocity = 12;
	}
	[spell_launch]
	{
		delay_between_shots = false;
		number = 8;
		randomize_offsets = true;
		use_offsets = true;
		x_offset = .2;
		y_offset = .2;
		z_offset = .2;
	}
}
[t:template,n:spell_meteor]
{
	category_name = "magic";
	doc = "spell meteor";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 100;
	}
	[attack]
	{
		area_damage_radius = 7;
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Calls a meteor from the sky to smite the Enemy.";
		screen_name = "Meteor";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_126;
		inventory_icon = b_gui_ig_i_ic_sp_126_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*8.61+4.2;
		attack_damage_modifier_max = (#magic+1)*11.678+4.5;
		cast_range = 15;
		cast_reload_delay = 10;
		command_cast = true;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*8.209);
		max_level = 100;
		required_level = 66;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain | tt_conscious_enemy | tt_unconscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		explosion_magnitude = 7;
	}
	[spell_deathrain]
	{
		drop_freq_max = 4.1;
		drop_freq_min = 4;
		drop_script = "meteor_ball";
		max_drops = 1;
		spawn_height = 15.0;
		spawn_radius = .5;
	}
}
[t:template,n:spell_meteor_storm]
{
	category_name = "magic";
	doc = "spell meteor storm";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 100;
	}
	[attack]
	{
		area_damage_radius = 7;
		damage_min = 0;
		damage_max = 0;
	}
	[common]
	{
		description = "Multiple Meteors hurtle down onto the Enemy.";
		screen_name = "Meteor Storm";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_138;
		inventory_icon = b_gui_ig_i_ic_sp_138_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*9.63+4.5;
		attack_damage_modifier_max = (#magic+1)*10.624+6.5;
		cast_range = 15;
		cast_reload_delay = 10;
		command_cast = true;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*18.4466);
		max_level = 112;
		required_level = 102;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain | tt_conscious_enemy | tt_unconscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		explosion_magnitude = 7;
	}
	[spell_deathrain]
	{
		drop_freq_max = 1.2;
		drop_freq_min = 1;
		drop_script = "meteor_storm";
		max_drops = 4;
		spawn_height = 15.0;
		spawn_radius = 4;
	}
}
[t:template,n:spell_mine_worm_spikes]
{
	category_name = "magic";
	doc = "Mine Worm Spikes";
	specializes = base_spell_monster;
	[attack]
	{
		aiming_error_range_x = 2.5;
		aiming_error_range_y = 2.5;
		ammo_attach_bone = ap_flame;
		ammo_template = spike_mine_worm;
		damage_max = 24;
		damage_min = 22;
		use_aiming_error = true;
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		velocity = 25;
	}
	[spell_launch]
	{
		number = 5;
	}
}
[t:template,n:spell_molten_golem_fireball]
{
	category_name = "magic";
	doc = "spell molten golem fireball";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 3;
		damage_min = 2;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("molten_golem_fireball");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_default] {}
}
[t:template,n:spell_moth_dust]
{
	category_name = "magic";
	doc = "Moth Dust";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 34;
		damage_min = 30;
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 1;
		effect_duration = 5;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("moth_dust");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[spell_default] { }
}
[t:template,n:spell_mucosa_poison]
{
	category_name = "magic";
	doc = "Spell Mucosa Poison";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 15;
		damage_min = 10;
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 1;
		effect_duration = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_fire]
	{
		effect_script = mucosa_poison;
		ignite = false;
		particle_fit = 0.6;
	}
}
[t:template,n:spell_mucosa_sparkles]
{
	category_name = "magic";
	doc = "Spell Mucosa Sparkles";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 210;
		damage_min = 190;
	}
	[magic]
	{
		cast_range = 14;
		cast_reload_delay = 1;
		effect_duration = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_fire]
	{
		effect_script = mucosa_sparkles;
		ignite = false;
		particle_fit = 0.6;
	}
}
[t:template,n:spell_ogres_might]
{
	category_name = "magic";
	doc = "spell ogres might";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 300;
	}
	[common]
	{
		description = "Boosts the Target physical power, adding <alter_strength> to Strength.";
		screen_name = "Ogre's Might";
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_109;
		inventory_icon = b_gui_ig_i_ic_sp_109_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_experience = (#magic*1.2);
		cast_range = 8;
		cast_reload_delay = 1;
		effect_duration = (#magic*3.3)+33;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*7)+1;
		max_level = 54;
		required_level = 34;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		state_name = might;
		require_state_check = false;

		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				description = "raise strength";
				duration = (#magic*3.3)+33;
				frequency = 0;
				value = (#magic*0.01)+1;
			}
		}
	}

	[spell_status_effect]
	{
		description = "Ogre's Might";
		effect_script = ogres_might;
	}
}
[t:template,n:spell_oversight]
{
	category_name = "magic";
	doc = "spell oversight";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 100;
	}
	[common]
	{
		description = "Blurs the vision of the Enemy, causing ranged attacks to be less accurate. Mana cost dependent on the power of the Target.";
		screen_name = "Oversight";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_021;
		inventory_icon = b_gui_ig_i_ic_sp_021_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_experience = (#magic*0.75);
		cast_range = 10;
		cast_reload_delay = 1;
		effect_duration = (#magic*2);
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#maxlife+1)*1.5);
		mana_cost_ui = 2;
		mana_cost_ui_modifier = (#maxmana*1.5);
		max_level = 44;
		required_level = 22;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_aggressive;
		state_name = oversight;
		[enchantments]
		{
			[*]
			{
				alteration = alter_dexterity;
				description = "lower dexterity";
				duration = (#magic*2);
				frequency = 0;
				value = -(#dex*.7);
				is_enhancement = false;
			}
			[*]
			{
				alteration = alter_ranged;
				description = "lower ranged";
				duration = (#magic*2);
				frequency = 0;
				value = -(#dex*.7);
				is_enhancement = false;
			}
		}
	}
	[spell_status_effect]
	{
		description = "Oversight";
		effect_script = oversight;
	}
}
[t:template,n:spell_perforator_minigun]
{
	category_name = "magic";
	doc = "Perforator Minigun";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 55;
		damage_min = 54;
		area_damage_radius = 1.5;
	}
	[magic]
	{
		cast_range = 12;
		cast_reload_delay = 0;
		effect_duration = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_damage_volume]
	{
		effect_script = perforator_attack;
		start_radius = .75;
		length = 11.0;
	}
}
[t:template,n:spell_phrak_dart]
{
	category_name = "magic";
	doc = "spell phrak dart";
	specializes = base_spell_monster;
	[attack]
	{
		ammo_attach_bone = Nose;
		ammo_template = phrak_dart;
		damage_max = 5;
		damage_min = 3;
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		velocity = 15;
	}
	[spell_launch]
	{
		number = 1;
	}
}
[t:template,n:spell_pestilence]
{
	category_name = "magic";
	doc = "spell pestilence";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 100;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "A cloud of plague gas descends over the targeted area, causing damage to Enemies caught within it.";
		screen_name = "Pestilence";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_113;
		inventory_icon = b_gui_ig_i_ic_sp_113_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*4.7+1.5;
		attack_damage_modifier_max = (#magic+1)*7.08+1.5;
		cast_range = 13;
		cast_reload_delay = 1;
		command_cast = true;
		effect_duration = 4;
		is_one_shot = true;
		does_damage_per_second = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*6.627907);
		max_level = 52;
		required_level = 42;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable | tt_terrain;
		usage_context_flags = uc_offensive;

	}
	[spell_fire]
	{
		effect_script = pestilence;
		particle_fit = 0.1;
		ignite = false;
	}
}
[t:template,n:spell_pestilence_cloud]
{
	category_name = "magic";
	doc = "spell pestilence cloud";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 100;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "A thick cloud of decay descends and dances over the Enemy.";
		screen_name = "Pestilence cloud";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_131;
		inventory_icon = b_gui_ig_i_ic_sp_131_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*1.96+2.5;
		attack_damage_modifier_max = (#magic+1)*4.1+2.1;
		cast_range = 13;
		cast_reload_delay = 1;
		command_cast = true;
		effect_duration = 10;
		is_one_shot = true;
		does_damage_per_second = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*7.595);
		max_level = 88;
		required_level = 78;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable | tt_terrain;
		usage_context_flags = uc_offensive;
	}
	[spell_fire]
	{
		effect_script = pestilence_roam;
		particle_fit = 0.1;
		ignite = false;
	}
}
[t:template,n:spell_pillar_fire]
{
	category_name = "magic";
	doc = "spell pillar of fire";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 100;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "A pillar of fire wanders the battlefield, incinerating Enemies caught in its path.";
		screen_name = "Pillar Of Fire";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_128;
		inventory_icon = b_gui_ig_i_ic_sp_128_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*4.1+3;
		attack_damage_modifier_max = (#magic+1)*6.85+3;
		cast_range = 14;
		cast_reload_delay = 5;
		command_cast = true;
		effect_duration = 20;
		is_one_shot = true;
		does_damage_per_second = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*3.945);
		max_level = 82;
		required_level = 72;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable | tt_terrain;
		usage_context_flags = uc_offensive;
	}
	[spell_fire]
	{
		effect_script = fire_pillar2;
		particle_fit = 0.1;
	}
}
[t:template,n:spell_polymorph]
{
	category_name = "magic";
	doc = "spell Polymorph";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 500;
	}
	[common]
	{
		description = "Transforms the Enemy into a common animal. Mana cost dependent on power of the Target.";
		screen_name = "Polymorph";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_062;
		inventory_icon = b_gui_ig_i_ic_sp_062_inv;
	}
	[inventory]
	{
		[delayed_pcontent]
		{
			[oneof*]
			{
				[all*]
				{
					chance = 0.20;
					il_main = cow_brown;
				}
				[all*]
				{
					chance = 0.20;
					il_main = cow_black_white;
				}
				[all*]
				{
					chance = 0.20;
					il_main = deer_fawn;
				}
				[all*]
				{
					chance = 0.20;
					il_main = mule;
				}
				[all*]
				{
					chance = 0.20;
					il_main = pig;
				}
			}
		}
	}
	[magic]
	{
		cast_range = 15;
		cast_reload_delay = 5;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = (#maxlife*3);
		mana_cost_ui = 2;
		mana_cost_ui_modifier = (#maxmana*3);
		max_level = 90;
		required_level = 66;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy;
		usage_context_flags = uc_aggressive;
	}
	[spell_polymorph]
	{
		effect_script = "polymorph";
		script_params = "";
		immunity = "immune_polymorph";
	}
}
[t:template,n:spell_burst]
{
	category_name = "magic";
	doc = "spell burst";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 150;
	}
	[attack]
	{
		area_damage_radius = 3;
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Violently explodes an Enemy.";
		screen_name = "Burst";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_129;
		inventory_icon = b_gui_ig_i_ic_sp_129_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*7.13+2;
		attack_damage_modifier_max = (#magic+1)*7.5+2;
		cast_range = 8;
		cast_reload_delay = 1;
		command_cast = true;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*7.6667);
		max_level = 84;
		required_level = 74;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		explosion_magnitude = 3;
	}
	[spell_body_bomb]
	{
		effect_script = "explode_body";
		make_explosion = true;
		immunity = "immune_explode";
	}
}
[t:template,n:spell_pupod_gas]
{
	category_name = "magic";
	doc = "spell pupod gas";
	specializes = base_spell_monster;
	[attack]
	{
		area_damage_radius = 3;
		damage_max = 5;
		damage_min = 4;
	}
	[magic]
	{
		cast_range = 3;
		cast_reload_delay = 1;
		effect_duration = 5;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_conscious_friend;
		usage_context_flags = uc_offensive;
	}
	[spell_damage_volume]
	{
		caster_center = true;
		effect_script = pupod_gas;
	}
}
[t:template,n:spell_rage]
{
	category_name = "magic";
	doc = "spell rage";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 150;
	}
	[common]
	{
		description = "Adds <alter_melee_damage_min> to Minimum Melee Damage and <alter_melee_damage_max> to Maximum Melee Damage at the expense of Health.";
		screen_name = "Rage";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_083;
		inventory_icon = b_gui_ig_i_ic_sp_083_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_experience = (#magic);
		cast_range = 13;
		cast_reload_delay = 1;
		effect_duration = 60+(#magic*10);
		is_one_shot = true;
		mana_cost = 3;
		mana_cost_modifier = (#magic*2.4);
		max_level = 26;
		required_level = 3;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_passive;
		state_name = rage;
		require_state_check = false;
		[enchantments]
		{
			[*]
			{
				alteration = alter_melee_damage_min;
				description = "Raise Minimun Damage";
				duration = 60+(#magic*10);
				initial_delay = 0.25;
				value = ((#magic+10)*0.078);
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				description = "Raise Maximum Damage";
				duration = 60+(#magic*10);
				initial_delay = 0.25;
				value = ((#magic+10)*0.14);
			}
			[*]
			{
				alteration = alter_life;
				description = "Lower life";
				initial_delay = 0.25;
				enhancement = false;
				value = -((#magic+10)*0.009) * #life;
			}
		}
	}
	[spell_status_effect]
	{
		description = "Rage";
		effect_script = rage;
	}
}
[t:template,n:spell_party_recharge]
{
	category_name = "magic";
	doc = "spell party recharge";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 300;
	}
	[common]
	{
		description = "Rejuvenates the Party with both Mana and Health.";
		screen_name = "Party Recharge";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("recharge_party");
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_056;
		inventory_icon = b_gui_ig_i_ic_sp_056_inv;
	}
	[magic]
	{
		cast_experience = 40;
		cast_range = 12;
		cast_reload_delay = 1;
		effect_duration = (#magic*0.99)+33;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*13.6-0.7);
		max_level = 78;
		required_level = 58;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		apply_enchantments = false;
		state_name = regen;
		require_state_check = false;
		[enchantments]
		{
			[*]
			{
				alteration = alter_life_recovery_unit;
				description = "Raise Healing";
				duration = (#magic*0.99)+33;
				frequency = 0;
				initial_delay = 0.25;
				value = 10;
			}
			[*]
			{
				alteration = alter_mana_recovery_unit;
				description = "Raise Mana Recovery";
				duration = (#magic*0.99)+33;
				frequency = 0;
				initial_delay = 0.25;
				value = 3;
			}
		}
	}
	[spell_mass_enchant]
	{
		enchant_script	= recharge;
		radius			= 10.0;
		description		= "Recharge Boost";
	}
}
[t:template,n:spell_pain_reflux]
{
	category_name = "magic";
	doc = "spell pain reflux";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 100;
	}
	[common]
	{
		description = "<alter_reflect_damage>% of damage taken is reflected back to the attacker.";
		screen_name = "Pain Reflux";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_111;
		inventory_icon = b_gui_ig_i_ic_sp_111_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 9;
		cast_reload_delay = 1;
		effect_duration = 2+(#magic*1.55);
		is_one_shot = true;
		mana_cost = 1;
		mana_cost_modifier = (#magic*6.6);
		max_level = 58;
		required_level = 38;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		state_name = reflect;
		require_state_check = false;

		[enchantments]
		{
			[*]
			{
				alteration = alter_reflect_damage;
				description = "Reflect Damage";
				duration = 2+(#magic*1.55);
				value = 30;
			}
			[*]
			{
				alteration = alter_reflect_damage_chance;
				description = "Reflect Damage chance";
				duration = 2+(#magic*1.55);
				value = 100;
			}
		}
	}
	[spell_status_effect]
	{
		description = "Pain Reflux";
		effect_script = reflect_damage;
	}
}
[t:template,n:spell_regeneration]
{
	category_name = "magic";
	doc = "spell regeneration";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 300;
	}
	[common]
	{
		description = "A warm glow surrounds the Target, adding to Health recovery.";
		screen_name = "Regeneration";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_017;
		inventory_icon = b_gui_ig_i_ic_sp_017_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_experience = 40;
		cast_range = 8;
		cast_reload_delay = 1;
		effect_duration = 5*(#magic+6);
		is_one_shot = true;
		mana_cost = 3;
		mana_cost_modifier = (#magic*4.2);
		max_level = 44;
		required_level = 18;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		state_name = regen;
		require_state_check = false;
		[enchantments]
		{
			[*]
			{
				alteration = alter_life_recovery_unit;
				description = "Raise Healing";
				duration = 5*(#magic+6);
				frequency = 0;
				initial_delay = 0.25;
				value = 3;
			}
		}
	}
	[spell_status_effect]
	{
		description = "Regenerating Health";
		effect_script = regeneration;
	}
}
[t:template,n:spell_rector_burn]
{
	category_name = "magic";
	doc = "spell rector burn";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 22;
		damage_min = 17;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("rector_burn");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 12;
		cast_reload_delay = 1;
		effect_duration = 8;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_default] {}
}
[t:template,n:spell_punisher_burn]
{
	category_name = "magic";
	doc = "spell rector burn";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 300;
		damage_min = 260;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("rector_burn");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 12;
		cast_reload_delay = 1;
		effect_duration = 8;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_default] {}
}
[t:template,n:spell_possessed_skull_burn]
{
	category_name = "magic";
	doc = "spell rector burn";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 169;
		damage_min = 150;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("rector_burn");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 12;
		cast_reload_delay = 1;
		effect_duration = 8;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_default] {}
}
[t:template,n:spell_convert]
{
	category_name = "magic";
	doc = "spell convert";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 300;
	}
	[common]
	{
		description = "Alters the magic abilities of the Caster, changing a Nature Magic user to a Combat Magic user of the same skill level.";
		screen_name = "Convert";
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_013;
		inventory_icon = b_gui_ig_i_ic_sp_013_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_experience = (#magic*1.2);
		cast_range = 8;
		cast_reload_delay = 1;
		effect_duration = (#magic*1.95)+33;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = (#magic+1)*7.2-0.7;
		max_level = 65;
		required_level = 45;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		state_name = convert;
		require_state_check = true;

		[enchantments]
		{
			[*]
			{
				alteration = alter_nature_magic_to_combat_magic;
				description = "transfer magic";
				duration = (#magic*1.95)+33;
				frequency = 0;
				value = (#nature_magic_level-#combat_magic_level);
			}
			[*]
			{
				alteration = alter_nature_magic;
				description = "transfer magic";
				duration = (#magic*1.95)+33;
				frequency = 0;
				value = (-#combat_magic_level);
			}
		}
	}
	[spell_status_effect]
	{
		description = "Convert";
		effect_script = magic_convert;
	}
}
[t:template,n:spell_corpse_transmutation]
{
	category_name = "magic";
	doc = "spell corpse transmutation";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 100;
	}
	[common]
	{
		description = "The Caster is able to draw Mana from the bodies of the dead.";
		screen_name = "Corpse Transmutation";
	}
	[common]
	{
				[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_115;
		inventory_icon = b_gui_ig_i_ic_sp_115_inv;
	}
	[magic]
	{
		cast_range = 15;
		cast_reload_delay = 1;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*0.0667);
		max_level = 64;
		required_level = 44;
		speed_bias = 1;
		target_type_flags = tt_dead_enemy;
		usage_context_flags = uc_passive;
	}
	[spell_body_bomb]
	{
		effect_script = "redeem";
		award_mana = true;
	}
}
[t:template,n:spell_resurrect]
{
	category_name = "magic";
	doc = "spell resurrect";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 60;
	}
	[common]
	{
		screen_name = "Resurrect";
	}
	[common]
		{
		description = "Grants the power to raise the dead. Mana cost dependant on power of the Target.";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_005;
		inventory_icon = b_gui_ig_i_ic_sp_005_inv;
	}
	[magic]
	{
		cast_experience = (#magic*2.8);
		cast_range = 5;
		cast_reload_delay = 1;
		is_one_shot = true;

		mana_cost = 0;
		mana_cost_modifier = (#maxlife/2.3);

		mana_cost_ui = 21;
		mana_cost_ui_modifier = (#maxmana-21);

		max_level = 111;
		required_level = 4;
		speed_bias = 1;
		target_type_flags = tt_dead_friend;
		usage_context_flags = uc_passive | uc_reanimating;
	}
	[spell_resurrect] {}
}
[t:template,n:scroll_resurrect]
{
	category_name = "magic";
	doc = "scroll resurrect";
	specializes = base_scroll_good;
	[aspect]
	{
		gold_value = 20;
	}
	[common]
	{
		screen_name = "Resurrect Scroll";
		description = "Grants the power to raise the dead";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sc_005;
		inventory_icon = b_gui_ig_i_ic_sc_005_inv;
	}
	[magic]
	{
		one_use = true;
		pcontent_level = 0;
		cast_range = 10;
		cast_reload_delay = 1;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = (#maxlife/6.1);
		mana_cost_ui = 9;
		mana_cost_ui_modifier = (#maxmana-9);
		speed_bias = 1;
		target_type_flags = tt_dead_friend;
		usage_context_flags = uc_passive | uc_reanimating;
	}
	[spell_resurrect] {}
}
[t:template,n:spell_resurrect_monster]
{
	category_name = "magic";
	doc = "spell resurrect";
	specializes = base_spell_monster;
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 1;
		is_one_shot = true;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_dead_friend;
		usage_context_flags = uc_passive | uc_reanimating;
	}
	[spell_resurrect] {}
}
[t:template,n:spell_full_resurrect]
{
	category_name = "magic";
	doc = "spell full resurrect";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 60;
	}
	[common]
	{
		screen_name = "Full Resurrect";
	}
	[common]
		{
		description = "Grants the power to raise the dead and restore them to full Health. Mana cost dependent on power of the Target.";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_160;
		inventory_icon = b_gui_ig_i_ic_sp_160_inv;
	}
	[magic]
	{
		cast_experience = (#magic*2.8);
		cast_range = 5;
		cast_reload_delay = 1;
		is_one_shot = true;

		mana_cost = 0;
		mana_cost_modifier = (#maxlife/2.3);

		mana_cost_ui = 21;
		mana_cost_ui_modifier = (#maxmana-21);

		max_level = 111;
		required_level = 40;
		speed_bias = 1;
		target_type_flags = tt_dead_friend;
		usage_context_flags = uc_passive | uc_reanimating;
	}
	[spell_resurrect]
	{
		effect_script	= full_resurrect;
		heal_ratio		= 1.0;
	}
}
[t:template,n:spell_return_summoned]
{
	category_name = "magic";
	doc = "spell return summoned";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 200;
	}
	[common]
	{
		screen_name = "Return Summoned";
	}
	[common]
		{
		description = "Removes a summoned creature from the physical plane. Mana cost dependent on power of the Target.";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script("return_summoned");
				condition* = receive_world_message("we_req_cast");
			}

		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_057;
		inventory_icon = b_gui_ig_i_ic_sp_057_inv;
	}
	[magic]
	{
		cast_experience = 70;
		cast_range = 10;
		cast_reload_delay = 1;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = (#maxlife*2.5);
		mana_cost_ui = 2;
		mana_cost_ui_modifier = (#maxmana*2.5);
		max_level = 78;
		required_level = 58;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_actor | tt_and | tt_summoned;
		usage_context_flags = uc_passive;
	}
	[spell_return_summoned]
	{
		health_per_level = 22.0;
	}
}
[t:template,n:spell_revive]
{
	category_name = "magic";
	doc = "spell revive";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 80;
	}
	[common]
	{
		screen_name = "Revive";
	}
	[common]
		{
		description = "Raises the corpse of a fallen comrade. Mana cost dependent on power of the Target.";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_144;
		inventory_icon = b_gui_ig_i_ic_sp_144_inv;
	}
	[magic]
	{
		cast_experience = (#magic*2);
		cast_range = 10;
		cast_reload_delay = 1;
		is_one_shot = true;

		mana_cost = 0;
		mana_cost_modifier = (#maxlife/1.5);

		mana_cost_ui = 32;
		mana_cost_ui_modifier = (#maxmana-32);

		max_level = 111;
		required_level = 5;
		speed_bias = 1;
		target_type_flags = tt_dead_friend;
		usage_context_flags = uc_passive | uc_reanimating;
	}
	[spell_resurrect]
	{
		effect_script = revive;
	}
}
[t:template,n:spell_shargs_revive]
{
	category_name = "magic";
	doc = "spell revive";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 80;
	}
	[common]
	{
		screen_name = "Sharg's Revive";
	}
	[common]
		{
		description = "Raises the corpse of a fallen comrade along with some health. Mana cost dependent on power of the Target.";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_177;
		inventory_icon = b_gui_ig_i_ic_sp_177_inv;
	}
	[magic]
	{
		cast_experience = (#magic*2);
		cast_range = 10;
		cast_reload_delay = 1;
		is_one_shot = true;

		mana_cost = 0;
		mana_cost_modifier = (#maxlife/1.5);

		mana_cost_ui = 32;
		mana_cost_ui_modifier = (#maxmana-32);

		max_level = 111;
		required_level = 45;
		speed_bias = 1;
		target_type_flags = tt_dead_friend;
		usage_context_flags = uc_passive | uc_reanimating;
	}
	[spell_resurrect]
	{
		effect_script	= revive;
		heal_ratio		= 0.5;
	}
}
[t:template,n:spell_rip_mana]
{
	category_name = "magic";
	doc = "spell rip mana";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 50;

	}
	[common]
	{
		screen_name = "Rip Mana";
	}
	[common]
	{
		description = "Tears <alter_mana> Mana from the Enemy and gives it to the Caster.";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script("rip_mana");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_079;
		inventory_icon = b_gui_ig_i_ic_sp_079_inv;
	}
	[magic]
	{
		cast_experience = 1+(#magic*0.05);
		cast_range = 11;
		cast_reload_delay = 1;
		is_one_shot = true;
		mana_cost = 1;
		mana_cost_modifier = (#magic*0.2);
		max_level = 17;
		required_level = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_can_store_mana | tt_and | tt_conscious_enemy;
		usage_context_flags = uc_offensive | uc_mana_getting;
		[enchantments]
		{
			[*]
			{
				alteration = alter_mana;
				description = "mana channel";
				effect_script = mana_trail;
				initial_delay = 0.0;
				is_enhancement = true;
				is_permanent = true;
				is_source_transfer = true;
				is_target_transfer = false;
				is_offensive_transfer = true;
				transfer_efficiency = 1;
				value = 10+2*#magic;
			}
		}
	}
	[spell_default] {}
}
[t:template,n:spell_robo_suit_lightning]
{
	category_name = "magic";
	doc = "Robo-Suit Lightning";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 24;
		damage_min = 20;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("robo_suit_lightning");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 17;
		cast_reload_delay = 0.2;
		is_one_shot = false;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_instant_hit] {}
}
[t:template,n:spell_robo_suit_flamethrower]
{
	category_name = "magic";
	doc = "Robo-Suit Flamethrower";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 24;
		damage_min = 20;
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_fire]
	{
		 effect_script = robo_suit_fire;
		particle_fit = 0.2;
	}
}
[t:template,n:spell_robo_suit_minigun]
{
	category_name = "magic";
	doc = "Robo-Suit Minigun";
	specializes = base_spell_monster;
	[aspect]
	{
		gold_value = 676;
	}
	[attack]
	{
		damage_max = 27;
		damage_min = 23;
		area_damage_radius = 2;
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_w_mag_dark;
	}
	[magic]
	{
		cast_range = 15;
		cast_reload_delay = 0;
		effect_duration = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_damage_volume]
	{
		effect_script = robo_suit_minigun;
		start_radius = 1;
		length = 11.0;
	}
}
[t:template,n:spell_robo_suit_torso]
{
	category_name = "magic";
	doc = "Robo-Suit Torso";
	specializes = base_spell_monster;
	[aspect]
	{
		gold_value = 676;
	}
	[attack]
	{
		damage_max = 27;
		damage_min = 23;
		area_damage_radius = 3;
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_w_mag_dark;
	}
	[magic]
	{
		cast_range = 15;
		cast_reload_delay = 0;
		effect_duration = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_damage_volume]
	{
		effect_script = robo_suit_torso;
		start_radius = 1;
		length = 11.0;
	}
}

[t:template,n:spell_rock_beast_blast]
{
	category_name = "magic";
	doc = "Rock Beast Blast";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 66;
		damage_min = 63;
		area_damage_radius = 3;
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 0.5;
		effect_duration = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_damage_volume]
	{
		effect_script = rock_beast_blast;
		start_radius = 1.5;
		length = 11.0;
	}
}

[t:template,n:spell_lava_beast_blast]
{
	category_name = "magic";
	doc = "Rock Beast Blast";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 220;
		damage_min = 190;
		area_damage_radius = 3;
	}
	[magic]
	{
		cast_range = 12;
		cast_reload_delay = 0.5;
		effect_duration = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_damage_volume]
	{
		effect_script = lava_beast_blast;
		start_radius = 1.5;
		length = 13.0;
	}
}
[t:template,n:spell_sand_mage_blast]
{
	category_name = "magic";
	doc = "Spell sand mage blast";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 152;
		damage_min = 132;
	}
	[magic]
	{
		cast_range = 11;
		cast_reload_delay = 1;
		effect_duration = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_fire]
	{
		effect_script = sand_mage_blast;
		particle_fit = 0.2;
	}
}
[t:template,n:spell_shard_zap_blue]
{
	category_name = "magic";
	doc = "Shard zap blue";
	specializes = base_spell_monster;
	[attack]
	{
		 damage_min = 58;
		 damage_max = 64;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("shard_zap_blue");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 12;
		cast_reload_delay = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_default] {}
}
[t:template,n:spell_shard_zap_green]
{
	category_name = "magic";
	doc = "Shard zap green";
	specializes = base_spell_monster;
	[attack]
	{
		 damage_min = 56;
		 damage_max = 62;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("shard_zap_green");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 12;
		cast_reload_delay = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_default] {}
}
[t:template,n:spell_shard_zap_purple]
{
	category_name = "magic";
	doc = "Shard zap purple";
	specializes = base_spell_monster;
	[attack]
	{
		 damage_min = 82;
		 damage_max = 88;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("shard_zap_purple");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 12;
		cast_reload_delay = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_default] {}
}
[t:template,n:spell_shard_zap_teal]
{
	category_name = "magic";
	doc = "Shard zap teal";
	specializes = base_spell_monster;
	[attack]
	{
		 damage_min = 41;
		 damage_max = 45;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("shard_zap_teal");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 12;
		cast_reload_delay = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_default] {}
}
[t:template,n:spell_shock]
{
	category_name = "magic";
	doc = "spell shock";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 500;
	}
	[attack]
	{
		area_damage_radius = 2;
		damage_max = 0;
		damage_min = 0;
	}
	[common]
		{
		description = "A ring of electricity extends around the Caster, damaging all nearby Enemies.";
		screen_name = "Shock";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_006;
		inventory_icon = b_gui_ig_i_ic_sp_006_inv;
	}
	[magic]
	{
		attack_damage_modifier_max = (#magic+1) * 4.6;
		attack_damage_modifier_min = (#magic+1) * 3.5 + 0.6;
		cast_range = 1.9;
		cast_reload_delay = 1;
		effect_duration = 2;
		does_damage_per_second = true;
		mana_cost = 10;
		mana_cost_modifier = (#magic*1.5);
		max_level = 37;
		required_level = 8;
		requires_line_of_sight = true;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_damage_volume]
	{
		caster_center = true;
		effect_script = shock;
	}
}
[t:template,n:spell_shock_armor]
{
	category_name = "magic";
	doc = "spell shock armor";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 100;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "A cloak of electricity surrounds the Target, adding <alter_armor> to Armor and causing electrical damage to any attacker.";
		screen_name = "Shock armor";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_036;
		inventory_icon = b_gui_ig_i_ic_sp_036_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		attack_damage_modifier_min = (#magic*1.15);
		attack_damage_modifier_max = ((#magic*1.27)+1);
		cast_range = 8;
		cast_reload_delay = 1;
		effect_duration = (#magic*2.57)+33;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = (#magic+1)*4.5-.7;
		max_level = 70;
		required_level = 34;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		state_name = Rarmor;
		require_state_check = false;
		[enchantments]
		{
			[*]
			{
				alteration = alter_armor;
				description = "Reactive Armor";
				duration = (#magic*2.57)+33;
				value = (#magic*0.07)+1;
				is_single_instance = false;
			}
		}
	}
	[spell_reactive_armor]
	{
		description = "Shock Armor";
		effect_script = shock_armor;
		react_script = zap;
		max_range = 3.0;
		lightning_dur = 0.15;
	}
}
[t:template,n:spell_shock_wave]
{
	category_name = "magic";
	doc = "spell shock wave";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 100;
	}
	[attack]
	{
		area_damage_radius = 3;
		damage_max = 0;
		damage_min = 0;

	}
	[common]
	{
		description = "A wave of distorted energy encompasses the Target, damaging all nearby Enemies.";
		screen_name = "Shock Wave";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "shock_wave_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_044;
		inventory_icon = b_gui_ig_i_ic_sp_044_inv;
	}
	[magic]
	{
		attack_damage_modifier_max = (#magic+1)*3.025+1;
		attack_damage_modifier_min = (#magic+1)*2.35+1;
		cast_range = 9;
		cast_reload_delay = 1;
		is_one_shot = false;
		does_damage_per_second = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*4.7)+1;
		max_level = 78;
		required_level = 42;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		explosion_magnitude = 3;
	}
	[spell_area_effect]
	{
		damage_checks = 1;
		damage_frequency = 1;
		effect_script = "shock_wave";
	}
}
[t:template,n:spell_skrubb_spit]
{
	category_name = "magic";
	doc = "spell skrubb spit";
	specializes = base_spell_monster;
	[attack]
	{
		ammo_attach_bone = lowerjawBone10;
		ammo_template = skrub_spit;
		damage_max = 10;
		damage_min = 4;
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		velocity = 10;
	}
	[spell_launch]
	{
		number = 1;
	}
}
[t:template,n:spell_skrubb_spit_farm]
{
	category_name = "magic";
	doc = "spell skrubb spit small";
	specializes = base_spell_monster;
	[attack]
	{
		ammo_attach_bone = lowerjawBone10;
		ammo_template = skrub_spit_farm;
		damage_max = 6;
		damage_min = 3;
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 0.7;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		velocity = 7;
	}
	[spell_launch]
	{
		number = 1;
	}
}
[t:template,n:spell_skrubb_spit_small]
{
	category_name = "magic";
	doc = "spell skrubb spit small";
	specializes = base_spell_monster;
	[attack]
	{
		ammo_attach_bone = lowerjawBone10;
		ammo_template = skrub_spit_small;
		damage_max = 30;
		damage_min = 28;
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 0.7;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		velocity = 7;
	}
	[spell_launch]
	{
		number = 1;
	}
}
[t:template,n:spell_spitter_steam]
{
	category_name = "magic";
	doc = "Slarg steam";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 130;
		damage_min = 110;
	}
	[magic]
	{
		cast_range = 9;
		cast_reload_delay = 1;
		effect_duration = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_fire]
	{
		effect_script = spitter_steam;
		ignite = false;
		particle_fit = 0.2;
	}
}
[t:template,n:spell_spark]
{
	category_name = "magic";
	doc = "spell spark";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 160;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Fires two globes of electricity that will track to the Enemy.";
		screen_name = "Spark";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("spark");
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "spark_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_003;
		inventory_icon = b_gui_ig_i_ic_sp_003_inv;
	}
	[magic]
	{
		attack_damage_modifier_max = (#magic+1) * 4.3 + 0.2;
		attack_damage_modifier_min = (#magic+1) * 3.2 + 0.7;
		cast_range = 11;
		cast_reload_delay = 1;
		mana_cost = 4;
		mana_cost_modifier = (#magic*1.6);
		max_level = 24;
		required_level = 4;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_terrain | tt_breakable;
		usage_context_flags = uc_offensive;
	}
	[spell_default] {}
}
[t:template,n:spell_spark_multi]
{
	category_name = "magic";
	doc = "spell spark multi";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 160;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Releases multiple, concentrated globes of electricity that track toward the Enemy.";
		screen_name = "Multi-Spark";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("spark_multi");
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_031;
		inventory_icon = b_gui_ig_i_ic_sp_031_inv;
	}
	[magic]
	{
		attack_damage_modifier_max = (#magic+1)*3.774;
		attack_damage_modifier_min = (#magic+1)*2.806;
		cast_range = 12;
		cast_reload_delay = 1;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*2.2)+1;
		max_level = 70;
		required_level = 30;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_terrain | tt_breakable;
		usage_context_flags = uc_offensive;
	}
	[spell_default] {}
}
[t:template,n:spell_spiked_maw_spikes]
{
	category_name = "magic";
	doc = "Spiked Maw Spikes";
	specializes = base_spell_monster;
	[attack]
	{
		aiming_error_range_x = 2.5;
		aiming_error_range_y = 2.5;
		ammo_attach_bone = bip01_spine;
		ammo_template = spike_spiked_maw;
		damage_max = 27;
		damage_min = 26;
		use_aiming_error = true;
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		velocity = 15;
	}
	[spell_launch]
	{
		number = 1;
	}
}
[t:template,n:spell_spiked_dweller_spikes]
{
	category_name = "magic";
	doc = "Spiked Dweller Spikes";
	specializes = base_spell_monster;
	[attack]
	{
		aiming_error_range_x = 2.5;
		aiming_error_range_y = 2.5;
		ammo_attach_bone = bip01_spine;
		ammo_template = spike_spiked_maw;
		damage_max = 54;
		damage_min = 53;
		use_aiming_error = true;
	}
	[magic]
	{
		cast_range = 12;
		cast_reload_delay = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		velocity = 16;
	}
	[spell_launch]
	{
		number = 1;
	}
}
[t:template,n:spell_spirit_armor]
{
	category_name = "magic";
	doc = "spell spirit armor";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 250;
	}
	[common]
	{
		description = "A shifting spectral aura surrounds the Target, adding <alter_armor> to Armor.";
		screen_name = "Spirit Armor";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_090;
		inventory_icon = b_gui_ig_i_ic_sp_090_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_experience = (#magic);
		cast_range = 8;
		cast_reload_delay = 1;
		effect_duration = 2*(#magic+5);
		is_one_shot = true;
		mana_cost = 1;
		mana_cost_modifier = (#magic*5.2);
		required_level = 12;
		max_level = 30;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		state_name = armor;
		require_state_check = false;
		[enchantments]
		{
			[*]
			{
				alteration = alter_armor;
				description = "Magic Armor";
				duration = 2*(#magic+5);
				value = (#magic*0.7)+1;
			}
		}
	}
	[spell_status_effect]
	{
		description = "Armored";
		effect_script = spirit_armor;
	}
}
[t:template,n:spell_maljin_spike_01]
{
	category_name = "magic";
	doc = "Maljin Spikes";
	specializes = base_spell_monster;
	[attack]
	{
		ammo_attach_bone = Bip01_R_Hand;
		ammo_template = spike_maljin;
		damage_max = 1;
		damage_min = 1;
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 0;
		cast_sub_animation = 0;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		velocity = 15;
	}
	[spell_launch]
	{
		number = 1;
	}
}
[t:template,n:spell_maljin_spike_02]
{
	category_name = "magic";
	doc = "Maljin Spikes 02";
	specializes = base_spell_monster;
	[attack]
	{
		ammo_attach_bone = Bip01_R_Hand;
		ammo_template = spike_maljin;
		damage_max = 1;
		damage_min = 1;
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 0;
		cast_sub_animation = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		velocity = 15;
	}
	[spell_launch]
	{
		number = 1;
	}
}
[t:template,n:spell_maljin_spike_03]
{
	category_name = "magic";
	doc = "Maljin Spikes 03";
	specializes = base_spell_monster;
	[attack]
	{
		ammo_attach_bone = Bip01_R_Hand;
		ammo_template = spike_maljin;
		damage_max = 1;
		damage_min = 1;
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 0;
		cast_sub_animation = 2;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		velocity = 15;
	}
	[spell_launch]
	{
		number = 1;
	}
}

[t:template,n:spell_maljin_ball_01]
{
	category_name = "magic";
	doc = "Maljin ball";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 1;
		damage_min = 1;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("maljin_ball");
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "maljin_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 0;
		cast_sub_animation = 0;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_default] {}
}
[t:template,n:spell_maljin_ball_02]
{
	category_name = "magic";
	doc = "Maljin ball 02";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 1;
		damage_min = 1;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("maljin_ball_02");
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "maljin_charge_02" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 0;
		cast_sub_animation = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_instant_hit] {}
}
[t:template,n:spell_maljin_ball_03]
{
	category_name = "magic";
	doc = "Maljin ball 03";
	specializes = base_spell_monster;
	[attack]
	{
		ammo_attach_bone = Bip01_R_Hand;
		ammo_template = spike_maljin;
		damage_max = 1;
		damage_min = 1;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("maljin_ball_03");
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "maljin_charge_03" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 0;
		cast_sub_animation = 2;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_instant_hit] {}
}
[t:template,n:spell_meriks_windfall]
{
	category_name = "magic";
	doc = "spell merik's windfall";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 300;
	}
	[common]
	{
		description = "Greatly enhances the capabilities of the Party, adding <alter_strength> to Strength, <alter_dexterity> to Dexterity and <alter_intelligence> to Intelligence.";
		screen_name = "Merik's Windfall";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_064;
		inventory_icon = b_gui_ig_i_ic_sp_064_inv;
	}
	[magic]
	{
		cast_experience = 40;
		cast_range = 10;
		cast_reload_delay = 1;
		effect_duration = (#magic*0.96)+33;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*17.4-0.7);
		max_level = 90;
		required_level = 70;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		apply_enchantments = false;
		state_name = boost;
		require_state_check = false;
		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				description = "Raise Strength";
				duration = (#magic*0.96)+33;
				frequency = 0;
				initial_delay = 0.25;
				value = ((#magic*0.034)+1);
			}
			[*]
			{
				alteration = alter_dexterity;
				description = "Raise Dexterity";
				duration = (#magic*0.96)+33;
				frequency = 0;
				initial_delay = 0.25;
				value = ((#magic*0.0575)+1);
			}
			[*]
			{
				alteration = alter_intelligence;
				description = "Raise intelligence";
				duration = (#magic*0.96)+33;
				frequency = 0;
				initial_delay = 0.25;
				value = ((#magic*0.045)+1);
			}

		}
	}
	[spell_mass_enchant]
	{
		enchant_script	= stats_boost;
		radius			= 20.0;
		description		= "Boosted";
	}
}
[t:template,n:spell_mystic_aid]
{
	category_name = "magic";
	doc = "spell mystic aid";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 300;
	}
	[common]
	{
		description = "Enhances the physical damage abilities of the Party, boosting the chance to hit in Melee combat by <alter_chance_to_hit_melee>% and chance to hit in Ranged Combat by <alter_chance_to_hit_ranged>%.";
		screen_name = "Mystic Aid";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_071;
		inventory_icon = b_gui_ig_i_ic_sp_071_inv;
	}
	[magic]
	{
		cast_experience = 40;
		cast_range = 11;
		cast_reload_delay = 1;
		effect_duration = (#magic*0.8)+33;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*11.8-0.7);
		max_level = 104;
		required_level = 84;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		apply_enchantments = false;
		state_name = boost;
		require_state_check = false;
		[enchantments]
		{
			[*]
			{
				alteration = alter_chance_to_hit_melee;
				description = "Raise ALTER CHANCE TO HIT MELEE";
				duration = (#magic*0.8)+33;
				frequency = 0;
				initial_delay = 0.25;
				value = (#magic*0.1157)-4;
			}
			[*]
			{
				alteration = alter_chance_to_hit_ranged;
				description = "Raise ALTER CHANCE TO HIT RANGED";
				duration = (#magic*0.8)+33;
				frequency = 0;
				initial_delay = 0.25;
				value = (#magic*0.1157)-4;
			}
		}
	}
	[spell_mass_enchant]
	{
		enchant_script	= stats_boost;
		radius			= 20.0;
		description		= "Mystic Aid";
	}
}
[t:template,n:spell_storm]
{
	category_name = "magic";
	doc = "spell storm";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 100;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Charges the caster, creating electrical energy flows in the sky, bringing forth lightning on nearby enemies every few seconds.";
		screen_name = "Storm";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_067;
		inventory_icon = b_gui_ig_i_ic_sp_067_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*4.05+2;
		attack_damage_modifier_max = (#magic+1)*6.1+1;
		cast_range = 14;
		cast_reload_delay = 10;
		command_cast = true;
		effect_duration = 40;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*7.5951);
		max_level = 98;
		required_level = 78;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_self | tt_terrain;
		usage_context_flags = uc_passive;
		state_name = "storm";
	}
	[spell_turret]
	{
		charge_effect = storm_cast;
		effect_script = storm;
		description = "Calling Lightning";
		lightning_dur = 0.5;
	}
}
[t:template,n:spell_stumble]
{
	category_name = "magic";
	doc = "spell stumble";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 100;
	}
	[common]
	{
		description = "Causes the Enemy to lose footing, lowering the chance to hit in Melee combat by 10%. Mana cost dependent on power of the Target.";
		screen_name = "Stumble";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_042;
		inventory_icon = b_gui_ig_i_ic_sp_042_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_experience = 40;
		cast_range = 10;
		cast_reload_delay = 1;
		effect_duration = (#magic*.8);
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = (#maxlife*1.5);
		mana_cost_ui = 2;
		mana_cost_ui_modifier = (#maxmana*1.5);
		max_level = 60;
		required_level = 40;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy;
		usage_context_flags = uc_defensive;
		state_name = stumble;
		[enchantments]
		{
			[*]
			{
				alteration = alter_chance_to_hit;
				description = "Increase chance to hit";
				duration = (#magic*.8);
				frequency = 0;
				initial_delay = 0.25;
				value = -.1;
				is_enhancement = false;
			}
		}
	}
	[spell_status_effect]
	{
		description = "Stumble";
		effect_script = stumble;
	}
}
[t:template,n:spell_summon_braak_desert]
{
	category_name = "magic";
	doc = "spell summon braak_desert";
	specializes = base_summon_dark;
	[aspect]
	{
		gold_value = 500;
	}
	[common]
	{
		description = "Summons a Desert Braak to guard the Caster.";
		screen_name = "Summon Desert Braak";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_175;
		inventory_icon = b_gui_ig_i_ic_sp_175_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 240;
		is_one_shot = true;
		max_level = 89;
		required_level = 69;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5);
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;

		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				duration = #infinite;
				value = ((((#magic*0.64)+10)*.56)-#str);
			}
			[*]
			{
				alteration = alter_dexterity;
				duration = #infinite;
				value = ((((#magic*0.27)+10)*.64)-#dex);
			}
			[*]
			{
				alteration = alter_intelligence;
				duration = #infinite;
				value = ((((#magic*0.09)+10)*.79)-#int);
			}
			[*]
			{
				alteration = alter_melee;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nature_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_combat_magic;
				duration = #infinite;
				value = ((#magic-19)-#combat_magic_level);
			}
			[*]
			{
				alteration = alter_armor;
				duration = #infinite;
				value = (((#magic*9)*.85)-#base_defense);
			}
			[*]
			{
				alteration = alter_max_life;
				duration = #infinite;
				value = (((#magic*24)*1.3)-#maxlife);
			}
			[*]
			{
				alteration = alter_life;
				duration = 1.0;
				value = (((#magic*24)*1.3)-#life);
			}
			[*]
			{
				alteration = alter_max_mana;
				duration = #infinite;
				value = (((#magic*19)*0.2)-#maxmana);
			}
			[*]
			{
				alteration = alter_mana;
				duration = 1.0;
				value = (((#magic*19)*0.2)-#mana);
			}
			[*]
			{
				alteration = alter_melee_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_min;
				duration = #infinite;
				value = ((((#magic*4.2)*.9)-194)*0.9);
			}
			[*]
			{
				alteration = alter_cmagic_damage_max;
				duration = #infinite;
				value = ((((#magic*4.2)*.9)-194)*1.1);
			}
			[*]
			{
				alteration = alter_nmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
		}

	}
	[spell_summon]
	{
		effect_script = "summon";
		end_script = "un_summon";
		template_name = braak_desert_summon;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_cave_giant]
{
	category_name = "magic";
	doc = "spell Summon Cave Giant";
	specializes = base_summon_good;
	[aspect]
	{
		gold_value = 450;
	}
	[common]
	{
		description = "Summons a Cave Giant to guard the Caster.";
		screen_name = "Summon Cave Giant";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_033;
		inventory_icon = b_gui_ig_i_ic_sp_033_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 120;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5);
		max_level = 50;
		required_level = 30;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;

		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				duration = #infinite;
				value = ((((#magic*0.64)+10)*1.09)-#str);
			}
			[*]
			{
				alteration = alter_dexterity;
				duration = #infinite;
				value = ((((#magic*0.27)+10)*.73)-#dex);
			}
			[*]
			{
				alteration = alter_intelligence;
				duration = #infinite;
				value = ((((#magic*0.09)+10)*.55)-#int);
			}
			[*]
			{
				alteration = alter_melee;
				duration = #infinite;
				value = ((#magic-11)-#melee);
			}
			[*]
			{
				alteration = alter_ranged;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nature_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_combat_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_armor;
				duration = #infinite;
				value = (((#magic*9)*.51)-#base_defense);
			}
			[*]
			{
				alteration = alter_max_life;
				duration = #infinite;
				value = (((#magic*24)*3.64)-#maxlife);
			}
			[*]
			{
				alteration = alter_life;
				duration = 1.0;
				value = (((#magic*24)*3.64)-#life);
			}
			[*]
			{
				alteration = alter_max_mana;
				duration = #infinite;
				value = (((#magic*19)*0.06)-#maxmana);
			}
			[*]
			{
				alteration = alter_mana;
				duration = 1.0;
				value = (((#magic*19)*0.06)-#mana);
			}
			[*]
			{
				alteration = alter_melee_damage_min;
				duration = #infinite;
				value = ((((#magic*4.2)*1.06)-90)*0.9);
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				duration = #infinite;
				value = ((((#magic*4.2)*1.06)-90)*1.1);
			}
			[*]
			{
				alteration = alter_ranged_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
		}

	}
	[spell_summon]
	{
		effect_script = "summon";
		end_script = "un_summon";
		script_params = "[scale(1.75)]";
		template_name = cave_giant_summon;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_darkling]
{
	category_name = "magic";
	doc = "spell summon darkling";
	specializes = base_summon_dark;
	[aspect]
	{
		gold_value = 500;
	}
	[common]
	{
		description = "Summons a Darkling to guard the Caster.";
		screen_name = "Summon Darkling";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_112;
		inventory_icon = b_gui_ig_i_ic_sp_112_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 240;
		is_one_shot = true;
		max_level = 41;
		required_level = 21;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5);
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;

		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				duration = #infinite;
				value = ((((#magic*0.64)+10)*.93)-#str);
			}
			[*]
			{
				alteration = alter_dexterity;
				duration = #infinite;
				value = ((((#magic*0.27)+10)*1.08)-#dex);
			}
			[*]
			{
				alteration = alter_intelligence;
				duration = #infinite;
				value = ((((#magic*0.09)+10)*.8)-#int);
			}
			[*]
			{
				alteration = alter_melee;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nature_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_combat_magic;
				duration = #infinite;
				value = ((#magic)-#combat_magic_level);
			}
			[*]
			{
				alteration = alter_armor;
				duration = #infinite;
				value = (((#magic*9)*.47)-#base_defense);
			}
			[*]
			{
				alteration = alter_max_life;
				duration = #infinite;
				value = (((#magic*24)*2.2)-#maxlife);
			}
			[*]
			{
				alteration = alter_life;
				duration = 1.0;
				value = (((#magic*24)*2.2)-#life);
			}
			[*]
			{
				alteration = alter_max_mana;
				duration = #infinite;
				value = (((#magic*19)*0.3)-#maxmana);
			}
			[*]
			{
				alteration = alter_mana;
				duration = 1.0;
				value = (((#magic*19)*0.3)-#mana);
			}
			[*]
			{
				alteration = alter_melee_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_min;
				duration = #infinite;
				value = ((((#magic*4.2)*.9)-22)*0.9);
			}
			[*]
			{
				alteration = alter_cmagic_damage_max;
				duration = #infinite;
				value = ((((#magic*4.2)*.9)-22)*1.1);
			}
			[*]
			{
				alteration = alter_nmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
		}

	}
	[spell_summon]
	{
		effect_script = "summon";
		end_script = "un_summon";
		template_name = darkling_summon;
		description = "Summoned Creature";
		caster_description = "Caster Control";
	}
}
[t:template,n:spell_summon_drake_black]
{
	category_name = "magic";
	doc = "spell summon drake black";
	specializes = base_summon_dark;
	[aspect]
	{
		gold_value = 500;
	}
	[common]
	{
		description = "Summons a Black Drake to guard the Caster.";
		screen_name = "Summon Black Drake";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_173;
		inventory_icon = b_gui_ig_i_ic_sp_173_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 120;
		is_one_shot = true;
		max_level = 112;
		required_level = 94;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5);
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;

		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				duration = #infinite;
				value = ((((#magic*0.64)+10)*1.22)-#str);
			}
			[*]
			{
				alteration = alter_dexterity;
				duration = #infinite;
				value = ((((#magic*0.27)+10)*2.16)-#dex);
			}
			[*]
			{
				alteration = alter_intelligence;
				duration = #infinite;
				value = ((((#magic*0.09)+10)*1.74)-#int);
			}
			[*]
			{
				alteration = alter_melee;
				duration = #infinite;
				value = ((#magic-6)-#melee);
			}
			[*]
			{
				alteration = alter_ranged;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nature_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_combat_magic;
				duration = #infinite;
				value = ((#magic-6)-#combat_magic_level);
			}
			[*]
			{
				alteration = alter_armor;
				duration = #infinite;
				value = (((#magic*9)*1.08)-#base_defense);
			}
			[*]
			{
				alteration = alter_max_life;
				duration = #infinite;
				value = (((#magic*24)*1.8)-#maxlife);
			}
			[*]
			{
				alteration = alter_life;
				duration = 1.0;
				value = (((#magic*24)*1.8)-#life);
			}
			[*]
			{
				alteration = alter_max_mana;
				duration = #infinite;
				value = (((#magic*19)*0.4)-#maxmana);
			}
			[*]
			{
				alteration = alter_mana;
				duration = 1.0;
				value = (((#magic*19)*0.4)-#mana);
			}
			[*]
			{
				alteration = alter_melee_damage_min;
				duration = #infinite;
				value = ((((#magic*4.2)*1.1)-205)*0.9);
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				duration = #infinite;
				value = ((((#magic*4.2)*1.1)-205)*1.1);
			}
			[*]
			{
				alteration = alter_ranged_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_min;
				duration = #infinite;
				value = ((((#magic*4.2)*1.1)-205)*0.9);
			}
			[*]
			{
				alteration = alter_cmagic_damage_max;
				duration = #infinite;
				value = ((((#magic*4.2)*1.1)-205)*1.1);
			}
			[*]
			{
				alteration = alter_nmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
		}

	}
	[spell_summon]
	{
		effect_script = "summon";
		end_script = "un_summon";
		template_name = drake_black_summon;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_drake_green]
{
	category_name = "magic";
	doc = "spell Summon drake green";
	specializes = base_summon_good;
	[aspect]
	{
		gold_value = 450;
	}
	[common]
	{
		description = "Summons a Green Drake to guard the Caster.";
		screen_name = "Summon Green Drake";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_072;
		inventory_icon = b_gui_ig_i_ic_sp_072_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 120;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5);
		max_level = 106;
		required_level = 86;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;

		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				duration = #infinite;
				value = ((((#magic*0.64)+10)*.72)-#str);
			}
			[*]
			{
				alteration = alter_dexterity;
				duration = #infinite;
				value = ((((#magic*0.27)+10)*.82)-#dex);
			}
			[*]
			{
				alteration = alter_intelligence;
				duration = #infinite;
				value = ((((#magic*0.09)+10)*1.21)-#int);
			}
			[*]
			{
				alteration = alter_melee;
				duration = #infinite;
				value = ((#magic-16)-#melee);
			}
			[*]
			{
				alteration = alter_ranged;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nature_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_combat_magic;
				duration = #infinite;
				value = ((#magic-16)-#combat_magic_level);
			}
			[*]
			{
				alteration = alter_armor;
				duration = #infinite;
				value = (((#magic*9)*1.22)-#base_defense);
			}
			[*]
			{
				alteration = alter_max_life;
				duration = #infinite;
				value = (((#magic*24)*1.6)-#maxlife);
			}
			[*]
			{
				alteration = alter_life;
				duration = 1.0;
				value = (((#magic*24)*1.6)-#life);
			}
			[*]
			{
				alteration = alter_max_mana;
				duration = #infinite;
				value = (((#magic*19)*0.5)-#maxmana);
			}
			[*]
			{
				alteration = alter_mana;
				duration = 1.0;
				value = (((#magic*19)*0.5)-#mana);
			}
			[*]
			{
				alteration = alter_melee_damage_min;
				duration = #infinite;
				value = ((((#magic*4.2)*1.09)-210)*0.9);
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				duration = #infinite;
				value = ((((#magic*4.2)*1.09)-210)*1.1);
			}
			[*]
			{
				alteration = alter_ranged_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_min;
				duration = #infinite;
				value = ((((#magic*4.2)*1.09)-210)*0.9);
			}
			[*]
			{
				alteration = alter_cmagic_damage_max;
				duration = #infinite;
				value = ((((#magic*4.2)*1.09)-210)*1.1);
			}
			[*]
			{
				alteration = alter_nmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
		}

	}
	[spell_summon]
	{
		effect_script = "summon";
		end_script = "un_summon";
		script_params = "[scale(1.75)]";
		template_name = drake_green_summon;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_fire_elemental]
{
	category_name = "magic";
	doc = "spell_summon_fire_elemental";
	specializes = base_summon_dark;
	[aspect]
	{
		gold_value = 500;
	}
	[common]
	{
		description = "Summons a Fire Elemental to guard the Caster.";
		screen_name = "Summon Fire Elemental";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_178;
		inventory_icon = b_gui_ig_i_ic_sp_178_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 240;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5);
		max_level = 112;
		required_level = 105;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;
	}
	[spell_summon]
	{
		effect_script = "summon";
		end_script = "un_summon";
		template_name = fire_elemental;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_forest_klaw]
{
	category_name = "magic";
	doc = "spell Summon Forest Klaw";
	specializes = base_summon_good;
	[aspect]
	{
		gold_value = 450;
	}
	[common]
	{
		description = "Summons a Forest Klaw to guard the Caster.";
		screen_name = "Summon Forest Klaw";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_040;
		inventory_icon = b_gui_ig_i_ic_sp_040_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 240;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5);
		max_level = 55;
		required_level = 35;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;

		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				duration = #infinite;
				value = ((((#magic*0.64)+10)*.91)-#str);
			}
			[*]
			{
				alteration = alter_dexterity;
				duration = #infinite;
				value = ((((#magic*0.27)+10)*1)-#dex);
			}
			[*]
			{
				alteration = alter_intelligence;
				duration = #infinite;
				value = ((((#magic*0.09)+10)*.82)-#int);
			}
			[*]
			{
				alteration = alter_melee;
				duration = #infinite;
				value = ((#magic-5)-#melee);
			}
			[*]
			{
				alteration = alter_ranged;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nature_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_combat_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_armor;
				duration = #infinite;
				value = (((#magic*9)*.78)-#base_defense);
			}
			[*]
			{
				alteration = alter_max_life;
				duration = #infinite;
				value = (((#magic*24)*1.5)-#maxlife);
			}
			[*]
			{
				alteration = alter_life;
				duration = 1.0;
				value = (((#magic*24)*1.5)-#life);
			}
			[*]
			{
				alteration = alter_max_mana;
				duration = #infinite;
				value = (((#magic*19)*0.08)-#maxmana);
			}
			[*]
			{
				alteration = alter_mana;
				duration = 1.0;
				value = (((#magic*19)*0.08)-#mana);
			}
			[*]
			{
				alteration = alter_melee_damage_min;
				duration = #infinite;
				value = ((((#magic*4.2)*1.03)-88)*0.9);
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				duration = #infinite;
				value = ((((#magic*4.2)*1.03)-88)*1.1);
			}
			[*]
			{
				alteration = alter_ranged_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
		}

	}
	[spell_summon]
	{
		effect_script = "summon";
		end_script = "un_summon";
		script_params = "[scale(1.75)]";
		template_name = forest_klaw_summon;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_furok]
{
	category_name = "magic";
	doc = "spell Summon Furok";
	specializes = base_summon_good;
	[aspect]
	{
		gold_value = 450;
	}
	[common]
	{
		description = "Summons a Furok to guard the Caster.";
		screen_name = "Summon Furok";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_028;
		inventory_icon = b_gui_ig_i_ic_sp_028_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 120;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5);
		max_level = 42;
		required_level = 22;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;

		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				duration = #infinite;
				value = ((((#magic*0.64)+10)*.94)-#str);
			}
			[*]
			{
				alteration = alter_dexterity;
				duration = #infinite;
				value = ((((#magic*0.27)+10)*.83)-#dex);
			}
			[*]
			{
				alteration = alter_intelligence;
				duration = #infinite;
				value = ((((#magic*0.09)+10)*.8)-#int);
			}
			[*]
			{
				alteration = alter_melee;
				duration = #infinite;
				value = ((#magic-2)-#melee);
			}
			[*]
			{
				alteration = alter_ranged;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nature_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_combat_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_armor;
				duration = #infinite;
				value = (((#magic*9)*.78)-#base_defense);
			}
			[*]
			{
				alteration = alter_max_life;
				duration = #infinite;
				value = (((#magic*24)*2)-#maxlife);
			}
			[*]
			{
				alteration = alter_life;
				duration = 1.0;
				value = (((#magic*24)*2)-#life);
			}
			[*]
			{
				alteration = alter_max_mana;
				duration = #infinite;
				value = (((#magic*19)*0.02)-#maxmana);
			}
			[*]
			{
				alteration = alter_mana;
				duration = 1.0;
				value = (((#magic*19)*0.02)-#mana);
			}
			[*]
			{
				alteration = alter_melee_damage_min;
				duration = #infinite;
				value = ((((#magic*4.2)*1.2)-64)*0.9);
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				duration = #infinite;
				value = ((((#magic*4.2)*1.2)-64)*1.1);
			}
			[*]
			{
				alteration = alter_ranged_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
		}

	}
	[spell_summon]
	{
		effect_script = "summon";
		end_script = "un_summon";
		script_params = "[scale(1.75)]";
		template_name = furok_summon;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_gargoyle]
{
	category_name = "magic";
	doc = "spell Summon Gargoyle";
	specializes = base_summon_dark;
	[aspect]
	{
		gold_value = 180;
	}
	[common]
	{
		screen_name = "Summon Jade Gargoyle";
	}
	[common]
	{
		description = "Summons a Jade Gargoyle to guard the Caster.";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_084;
		inventory_icon = b_gui_ig_i_ic_sp_084_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 360;
		is_one_shot = true;
		mana_cost = 20;
		mana_cost_modifier = (#magic);
		max_level = 26;
		required_level = 5;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;

		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				duration = #infinite;
				value = ((((#magic*0.64)+10)*.63)-#str);
			}
			[*]
			{
				alteration = alter_dexterity;
				duration = #infinite;
				value = ((((#magic*0.27)+10)*1.2)-#dex);
			}
			[*]
			{
				alteration = alter_intelligence;
				duration = #infinite;
				value = ((((#magic*0.09)+10)*.5)-#int);
			}
			[*]
			{
				alteration = alter_melee;
				duration = #infinite;
				value = 0s;
			}
			[*]
			{
				alteration = alter_ranged;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nature_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_combat_magic;
				duration = #infinite;
				value = ((#magic-1)-#combat_magic_level);
			}
			[*]
			{
				alteration = alter_armor;
				duration = #infinite;
				value = (((#magic*9)*.4)-#base_defense);
			}
			[*]
			{
				alteration = alter_max_life;
				duration = #infinite;
				value = (((#magic*24)*0.93)-#maxlife);
			}
			[*]
			{
				alteration = alter_life;
				duration = 1.0;
				value = (((#magic*24)*0.93)-#life);
			}
			[*]
			{
				alteration = alter_max_mana;
				duration = #infinite;
				value = (((#magic*19)*0.25)-#maxmana);
			}
			[*]
			{
				alteration = alter_mana;
				duration = 1.0;
				value = (((#magic*19)*0.25)-#mana);
			}
			[*]
			{
				alteration = alter_melee_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_min;
				duration = #infinite;
				value = ((((#magic*4.2)*.7)-9)*0.9);
			}
			[*]
			{
				alteration = alter_cmagic_damage_max;
				duration = #infinite;
				value = ((((#magic*4.2)*.7)-9)*1.1);
			}
			[*]
			{
				alteration = alter_nmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
        }
	}
	[spell_summon]
	{
		effect_script = "gargoyle_summon";
		end_script = "un_summon";
		script_params = "[scale(1.75)]";
		template_name = gargoyle_ranged_summon;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_golem_frost]
{
	category_name = "magic";
	doc = "spell Summon Frost Golem";
	specializes = base_summon_good;
	[aspect]
	{
		gold_value = 450;
	}
	[common]
	{
		description = "Summons a Frost Golem to guard the Caster.";
		screen_name = "Summon Frost Golem";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_076;
		inventory_icon = b_gui_ig_i_ic_sp_076_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 240;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5);
		max_level = 112;
		required_level = 95;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;

		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				duration = #infinite;
				value = ((((#magic*0.64)+10)*1.06)-#str);
			}
			[*]
			{
				alteration = alter_dexterity;
				duration = #infinite;
				value = ((((#magic*0.27)+10)*.54)-#dex);
			}
			[*]
			{
				alteration = alter_intelligence;
				duration = #infinite;
				value = ((((#magic*0.09)+10)*.45)-#int);
			}
			[*]
			{
				alteration = alter_melee;
				duration = #infinite;
				value = ((#magic-7)-#melee);
			}
			[*]
			{
				alteration = alter_ranged;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nature_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_combat_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_armor;
				duration = #infinite;
				value = (((#magic*9)*.78)-#base_defense);
			}
			[*]
			{
				alteration = alter_max_life;
				duration = #infinite;
				value = (((#magic*24)*1.5)-#maxlife);
			}
			[*]
			{
				alteration = alter_life;
				duration = 1.0;
				value = (((#magic*24)*1.5)-#life);
			}
			[*]
			{
				alteration = alter_max_mana;
				duration = #infinite;
				value = (((#magic*19)*0.1)-#maxmana);
			}
			[*]
			{
				alteration = alter_mana;
				duration = 1.0;
				value = (((#magic*19)*0.1)-#mana);
			}
			[*]
			{
				alteration = alter_melee_damage_min;
				duration = #infinite;
				value = ((((#magic*4.2)*.9)-53)*0.9);
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				duration = #infinite;
				value = ((((#magic*4.2)*.9)-53)*1.1);
			}
			[*]
			{
				alteration = alter_ranged_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
		}

	}
	[spell_summon]
	{
		effect_script = "summon";
		end_script = "un_summon";
		script_params = "[scale(1.75)]";
		template_name = golem_frost_summon;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_hell_boar]
{
	category_name = "magic";
	doc = "spell Summon Hell Boar";
	specializes = base_summon_dark;
	[aspect]
	{
		gold_value = 450;
	}
	[common]
	{
		description = "Summons a Hell Boar to guard the Caster.";
		screen_name = "Summon Hell Boar";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_127;
		inventory_icon = b_gui_ig_i_ic_sp_127_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 360;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5);
		max_level = 59;
		required_level = 39;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;

		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				duration = #infinite;
				value = ((((#magic*0.64)+10)*.74)-#str);
			}
			[*]
			{
				alteration = alter_dexterity;
				duration = #infinite;
				value = ((((#magic*0.27)+10)*.8)-#dex);
			}
			[*]
			{
				alteration = alter_intelligence;
				duration = #infinite;
				value = ((((#magic*0.09)+10)*.55)-#int);
			}
			[*]
			{
				alteration = alter_melee;
				duration = #infinite;
				value = ((#magic-13)-#melee);
			}
			[*]
			{
				alteration = alter_ranged;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nature_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_combat_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_armor;
				duration = #infinite;
				value = (((#magic*9)*.88)-#base_defense);
			}
			[*]
			{
				alteration = alter_max_life;
				duration = #infinite;
				value = (((#magic*24)*0.5)-#maxlife);
			}
			[*]
			{
				alteration = alter_life;
				duration = 1.0;
				value = (((#magic*24)*0.5)-#life);
			}
			[*]
			{
				alteration = alter_max_mana;
				duration = #infinite;
				value = (((#magic*19)*0.04)-#maxmana);
			}
			[*]
			{
				alteration = alter_mana;
				duration = 1.0;
				value = (((#magic*19)*0.04)-#mana);
			}
			[*]
			{
				alteration = alter_melee_damage_min;
				duration = #infinite;
				value = ((((#magic*4.2)*.8)-51)*0.9);
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				duration = #infinite;
				value = ((((#magic*4.2)*.8)-51)*1.1);
			}
			[*]
			{
				alteration = alter_ranged_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
		}

	}
	[spell_summon]
	{
		effect_script = "summon";
		end_script = "un_summon";
		script_params = "[scale(1.75)]";
		template_name = hell_boar_summon;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_helper]
{
	category_name = "magic";
	doc = "spell Summon Helper";
	specializes = base_summon_good;
	[aspect]
	{
		gold_value = 100;
	}
	[common]
	{
		screen_name = "Summon Helper";
		description = "Summons a companion to gather treasure from the battlefield.";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_020;
		inventory_icon = b_gui_ig_i_ic_sp_020_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_experience = (#magic/3);
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = (#magic*14.2865);
		required_level = 21;
		max_level = 44;
		is_one_shot = true;
		mana_cost = 79;
		mana_cost_modifier = (#magic);
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;
	}
	[spell_summon]
	{
		template_name = clay_golem;
		effect_script = "summon";
		end_script = "un_summon";
		script_params = "[scale(0.5)]";
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
		delete_inv = false;
	}
}
[t:template,n:scroll_summon_helper]
{
	category_name = "magic";
	doc = "Scroll Summon Helper";
	specializes = base_scroll_good;
	[aspect]
	{
		gold_value = 50;
	}
	[common]
	{
		screen_name = "Summon Helper Scroll";
	}
	[common]
	{
		description = "Summons a companion to gather treasure from the battlefield";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sc_002;
		inventory_icon = b_gui_ig_i_ic_sc_002_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		one_use = true;
		pcontent_level = 4;
		cast_experience = (3);
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = (10*14.2865);
		is_one_shot = true;
		mana_cost = 60;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;
	}
	[spell_summon]
	{
		template_name = clay_golem;
		effect_script = "summon";
		end_script = "un_summon";
		script_params = "[scale(0.5)]";
		description = "Summoned Creature";
		caster_description = "Caster Control";
	}
}
[t:template,n:spell_summon_impaler]
{
	category_name = "magic";
	doc = "spell summon impaler";
	specializes = base_summon_dark;
	[aspect]
	{
		gold_value = 500;
	}
	[common]
	{
		description = "Summons an Impaler to guard the Caster.";
		screen_name = "Summon Impaler";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_176;
		inventory_icon = b_gui_ig_i_ic_sp_176_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 120;
		is_one_shot = true;
		max_level = 95;
		required_level = 75;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5);
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;

		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				duration = #infinite;
				value = ((((#magic*0.64)+10)*.68)-#str);
			}
			[*]
			{
				alteration = alter_dexterity;
				duration = #infinite;
				value = ((((#magic*0.27)+10)*.68)-#dex);
			}
			[*]
			{
				alteration = alter_intelligence;
				duration = #infinite;
				value = ((((#magic*0.09)+10)*.38)-#int);
			}
			[*]
			{
				alteration = alter_melee;
				duration = #infinite;
				value = ((#magic-23)-#melee);
			}
			[*]
			{
				alteration = alter_ranged;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nature_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_combat_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_armor;
				duration = #infinite;
				value = (((#magic*9)*1.05)-#base_defense);
			}
			[*]
			{
				alteration = alter_max_life;
				duration = #infinite;
				value = (((#magic*24)*1.7)-#maxlife);
			}
			[*]
			{
				alteration = alter_life;
				duration = 1.0;
				value = (((#magic*24)*1.7)-#life);
			}
			[*]
			{
				alteration = alter_max_mana;
				duration = #infinite;
				value = (((#magic*19)*0.07)-#maxmana);
			}
			[*]
			{
				alteration = alter_mana;
				duration = 1.0;
				value = (((#magic*19)*0.07)-#mana);
			}
			[*]
			{
				alteration = alter_melee_damage_min;
				duration = #infinite;
				value = ((((#magic*4.2)*1.15)-250)*0.9);
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				duration = #infinite;
				value = ((((#magic*4.2)*1.15)-250)*1.1);
			}
			[*]
			{
				alteration = alter_ranged_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
		}

	}
	[spell_summon]
	{
		effect_script = "summon";
		end_script = "un_summon";
		template_name = impaler_summon;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_killer_gremal]
{
	category_name = "magic";
	doc = "spell summon killer gremal";
	specializes = base_summon_good;
	[aspect]
	{
		gold_value = 150;
	}
	[common]
	{
		screen_name = "Summon Killer Gremal";
		description = "Summons a Killer Gremal to guard the Caster.";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_008;
		inventory_icon = b_gui_ig_i_ic_sp_008_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 360;
		is_one_shot = true;
		mana_cost = 25;
		mana_cost_modifier = (#magic);
		max_level = 37;
		required_level = 7;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;

		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				duration = #infinite;
				value = ((((#magic*0.64)+10)*.46)-#str);
			}
			[*]
			{
				alteration = alter_dexterity;
				duration = #infinite;
				value = ((((#magic*0.27)+10)*1)-#dex);
			}
			[*]
			{
				alteration = alter_intelligence;
				duration = #infinite;
				value = ((((#magic*0.09)+10)*.2)-#int);
			}
			[*]
			{
				alteration = alter_melee;
				duration = #infinite;
				value = ((#magic-1)-#melee);
			}
			[*]
			{
				alteration = alter_ranged;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nature_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_combat_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_armor;
				duration = #infinite;
				value = (((#magic*9)*.3)-#base_defense);
			}
			[*]
			{
				alteration = alter_max_life;
				duration = #infinite;
				value = (((#magic*24)*1.2)-#maxlife);
			}
			[*]
			{
				alteration = alter_life;
				duration = 1.0;
				value = (((#magic*24)*1.2)-#life);
			}
			[*]
			{
				alteration = alter_max_mana;
				duration = #infinite;
				value = (((#magic*19)*0.09)-#maxmana);
			}
			[*]
			{
				alteration = alter_mana;
				duration = 1.0;
				value = (((#magic*19)*0.09)-#mana);
			}
			[*]
			{
				alteration = alter_melee_damage_min;
				duration = #infinite;
				value = ((((#magic*4.2)*.83)-22)*0.9);
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				duration = #infinite;
				value = ((((#magic*4.2)*.83)-22)*1.1);
			}
			[*]
			{
				alteration = alter_ranged_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
		}

	}
	[spell_summon]
	{
		effect_script = "summon";
		end_script = "un_summon";
		script_params = "[scale(2.75)]";
		template_name = gremal_killer_summon;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_krug_dog_skeleton]
{
	category_name = "magic";
	doc = "spell summon krug dog skeleton";
	specializes = base_summon_dark;
	[aspect]
	{
		gold_value = 500;
	}
	[common]
	{
		description = "Summons a Skeleton Krug Dog to guard the Caster.";
		screen_name = "Summon Skeleton Krug Dog";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_141;
		inventory_icon = b_gui_ig_i_ic_sp_141_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 360;
		is_one_shot = true;
		max_level = 81;
		required_level = 61;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5);
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;

		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				duration = #infinite;
				value = ((((#magic*0.64)+10)*.5)-#str);
			}
			[*]
			{
				alteration = alter_dexterity;
				duration = #infinite;
				value = ((((#magic*0.27)+10)*.62)-#dex);
			}
			[*]
			{
				alteration = alter_intelligence;
				duration = #infinite;
				value = ((((#magic*0.09)+10)*.3)-#int);
			}
			[*]
			{
				alteration = alter_melee;
				duration = #infinite;
				value = ((#magic-21)-#melee);
			}
			[*]
			{
				alteration = alter_ranged;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nature_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_combat_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_armor;
				duration = #infinite;
				value = (((#magic*9)*.75)-#base_defense);
			}
			[*]
			{
				alteration = alter_max_life;
				duration = #infinite;
				value = (((#magic*24)*0.63)-#maxlife);
			}
			[*]
			{
				alteration = alter_life;
				duration = 1.0;
				value = (((#magic*24)*0.63)-#life);
			}
			[*]
			{
				alteration = alter_max_mana;
				duration = #infinite;
				value = (((#magic*19)*0.01)-#maxmana);
			}
			[*]
			{
				alteration = alter_mana;
				duration = 1.0;
				value = (((#magic*19)*0.01)-#mana);
			}
			[*]
			{
				alteration = alter_melee_damage_min;
				duration = #infinite;
				value = ((((#magic*4.2)*.83)-132)*0.9);
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				duration = #infinite;
				value = ((((#magic*4.2)*.83)-132)*1.1);
			}
			[*]
			{
				alteration = alter_ranged_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
		}

	}
	[spell_summon]
	{
		effect_script = "summon";
		end_script = "un_summon";
		template_name = krug_dog_skeleton_summon;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_larch]
{
	category_name = "magic";
	doc = "spell Summon Larch";
	specializes = base_summon_good;
	[aspect]
	{
		gold_value = 450;
	}
	[common]
	{
		description = "Summons a Larch to guard the Caster.";
		screen_name = "Summon Larch";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_066;
		inventory_icon = b_gui_ig_i_ic_sp_066_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 240;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5);
		max_level = 80;
		required_level = 60;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;

		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				duration = #infinite;
				value = ((((#magic*0.64)+10)*.81)-#str);
			}
			[*]
			{
				alteration = alter_dexterity;
				duration = #infinite;
				value = ((((#magic*0.27)+10)*.47)-#dex);
			}
			[*]
			{
				alteration = alter_intelligence;
				duration = #infinite;
				value = ((((#magic*0.09)+10)*.38)-#int);
			}
			[*]
			{
				alteration = alter_melee;
				duration = #infinite;
				value = ((#magic-27)-#melee);
			}
			[*]
			{
				alteration = alter_ranged;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nature_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_combat_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_armor;
				duration = #infinite;
				value = (((#magic*9)*1.4)-#base_defense);
			}
			[*]
			{
				alteration = alter_max_life;
				duration = #infinite;
				value = (((#magic*24)*0.82)-#maxlife);
			}
			[*]
			{
				alteration = alter_life;
				duration = 1.0;
				value = (((#magic*24)*0.82)-#life);
			}
			[*]
			{
				alteration = alter_max_mana;
				duration = #infinite;
				value = (((#magic*19)*0.12)-#maxmana);
			}
			[*]
			{
				alteration = alter_mana;
				duration = 1.0;
				value = (((#magic*19)*0.12)-#mana);
			}
			[*]
			{
				alteration = alter_melee_damage_min;
				duration = #infinite;
				value = ((((#magic*4.2)*1)-180)*0.9);
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				duration = #infinite;
				value = ((((#magic*4.2)*1)-180)*1.1);
			}
			[*]
			{
				alteration = alter_ranged_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
		}

	}
	[spell_summon]
	{
		effect_script = "summon";
		end_script = "un_summon";
		script_params = "[scale(1.75)]";
		template_name = larch_summon;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_lava_spirit]
{
	category_name = "magic";
	doc = "spell summon lava spirit";
	specializes = base_summon_dark;
	[aspect]
	{
		gold_value = 500;
	}
	[common]
	{
		description = "Summons a Lava Spirit to guard the Caster.";
		screen_name = "Summon Lava Spirit";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_172;
		inventory_icon = b_gui_ig_i_ic_sp_172_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 240;
		is_one_shot = true;
		max_level = 106;
		required_level = 86;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5);
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;

		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				duration = #infinite;
				value = ((((#magic*0.64)+10)*1.11)-#str);
			}
			[*]
			{
				alteration = alter_dexterity;
				duration = #infinite;
				value = ((((#magic*0.27)+10)*1.08)-#dex);
			}
			[*]
			{
				alteration = alter_intelligence;
				duration = #infinite;
				value = ((((#magic*0.09)+10)*1.14)-#int);
			}
			[*]
			{
				alteration = alter_melee;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nature_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_combat_magic;
				duration = #infinite;
				value = ((#magic-1)-#combat_magic_level);
			}
			[*]
			{
				alteration = alter_armor;
				duration = #infinite;
				value = (((#magic*9)*1.20)-#base_defense);
			}
			[*]
			{
				alteration = alter_max_life;
				duration = #infinite;
				value = (((#magic*24)*0.9)-#maxlife);
			}
			[*]
			{
				alteration = alter_life;
				duration = 1.0;
				value = (((#magic*24)*0.9)-#life);
			}
			[*]
			{
				alteration = alter_max_mana;
				duration = #infinite;
				value = (((#magic*19)*0.33)-#maxmana);
			}
			[*]
			{
				alteration = alter_mana;
				duration = 1.0;
				value = (((#magic*19)*0.33)-#mana);
			}
			[*]
			{
				alteration = alter_melee_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_min;
				duration = #infinite;
				value = ((((#magic*4.2)*.95)-220)*0.9);
			}
			[*]
			{
				alteration = alter_cmagic_damage_max;
				duration = #infinite;
				value = ((((#magic*4.2)*.95)-220)*1.1);
			}
			[*]
			{
				alteration = alter_nmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
		}

	}
	[spell_summon]
	{
		effect_script = "summon";
		end_script = "un_summon";
		template_name = lava_spirit_magic_summon;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}

[t:template,n:spell_summon_molten_golem]
{
	category_name = "magic";
	doc = "spell Summon Molten Golem";
	specializes = base_summon_dark;
	[aspect]
	{
		gold_value = 500;
	}
	[common]
	{
		description = "Summons a Molten Golem to guard the Caster.";
		screen_name = "Summon Slag";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_174;
		inventory_icon = b_gui_ig_i_ic_sp_174_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 240;
		is_one_shot = true;
		max_level = 112;
		required_level = 100;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5);
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;
	}
	[spell_summon]
	{
		effect_script = "summon";
		end_script = "un_summon";
		script_params = "[scale(1.75)]";
		template_name = molten_golem;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_mucosa]
{
	category_name = "magic";
	doc = "spell summon mucosa";
	specializes = base_summon_dark;
	[aspect]
	{
		gold_value = 500;
	}
	[common]
	{
		description = "Summons a Mucosa to guard the Caster.";
		screen_name = "Summon Mucosa";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_103;
		inventory_icon = b_gui_ig_i_ic_sp_103_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 120;
		is_one_shot = true;
		max_level = 36;
		required_level = 16;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5);
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;

		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				duration = #infinite;
				value = ((((#magic*0.77)+10)*1)-#str);
			}
			[*]
			{
				alteration = alter_dexterity;
				duration = #infinite;
				value = ((((#magic*1)+10)*.3)-#dex);
			}
			[*]
			{
				alteration = alter_intelligence;
				duration = #infinite;
				value = ((((#magic*0.5)+10)*.1)-#int);
			}
			[*]
			{
				alteration = alter_melee;
				duration = #infinite;
				value = ((#magic-1)-#melee);
			}
			[*]
			{
				alteration = alter_ranged;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nature_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_combat_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_armor;
				duration = #infinite;
				value = (((#magic*9)*.57)-#base_defense);
			}
			[*]
			{
				alteration = alter_max_life;
				duration = #infinite;
				value = (((#magic*24)*3)-#maxlife);
			}
			[*]
			{
				alteration = alter_life;
				duration = 1.0;
				value = (((#magic*24)*3)-#life);
			}
			[*]
			{
				alteration = alter_max_mana;
				duration = #infinite;
				value = (((#magic*19)*0.06)-#maxmana);
			}
			[*]
			{
				alteration = alter_mana;
				duration = 1.0;
				value = (((#magic*19)*0.06)-#mana);
			}
			[*]
			{
				alteration = alter_melee_damage_min;
				duration = #infinite;
				value = ((((#magic*4.2)*1.1)-20)*0.9);
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				duration = #infinite;
				value = ((((#magic*4.2)*1.1)-20)*1.1);
			}
			[*]
			{
				alteration = alter_ranged_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
		}

	}
	[spell_summon]
	{
		effect_script = "summon";
		end_script = "un_summon";
		template_name = mucosa_summon;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_mucosa_predator]
{
	category_name = "magic";
	doc = "spell summon mucosa predator";
	specializes = base_summon_dark;
	[aspect]
	{
		gold_value = 500;
	}
	[common]
	{
		description = "Summons a Mucosa Predator to guard the Caster.";
		screen_name = "Summon Mucosa Predator";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_171;
		inventory_icon = b_gui_ig_i_ic_sp_171_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 120;
		is_one_shot = true;
		max_level = 100;
		required_level = 80;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5);
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;

		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				duration = #infinite;
				value = ((((#magic*0.64)+10)*.83)-#str);
			}
			[*]
			{
				alteration = alter_dexterity;
				duration = #infinite;
				value = ((((#magic*0.27)+10)*.83)-#dex);
			}
			[*]
			{
				alteration = alter_intelligence;
				duration = #infinite;
				value = ((((#magic*0.09)+10)*.93)-#int);
			}
			[*]
			{
				alteration = alter_melee;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nature_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_combat_magic;
				duration = #infinite;
				value = ((#magic-26)-#combat_magic_level);
			}
			[*]
			{
				alteration = alter_armor;
				duration = #infinite;
				value = (((#magic*9)*1.12)-#base_defense);
			}
			[*]
			{
				alteration = alter_max_life;
				duration = #infinite;
				value = (((#magic*24)*1.35)-#maxlife);
			}
			[*]
			{
				alteration = alter_life;
				duration = 1.0;
				value = (((#magic*24)*1.35)-#life);
			}
			[*]
			{
				alteration = alter_max_mana;
				duration = #infinite;
				value = (((#magic*19)*0.09)-#maxmana);
			}
			[*]
			{
				alteration = alter_mana;
				duration = 1.0;
				value = (((#magic*19)*0.09)-#mana);
			}
			[*]
			{
				alteration = alter_melee_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_min;
				duration = #infinite;
				value = ((((#magic*4.2)*1.08)-200)*0.9);
			}
			[*]
			{
				alteration = alter_cmagic_damage_max;
				duration = #infinite;
				value = ((((#magic*4.2)*1.08)-200)*1.1);
			}
			[*]
			{
				alteration = alter_nmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
		}

	}
	[spell_summon]
	{
		effect_script = "summon";
		end_script = "un_summon";
		template_name = mucosa_predator_summon;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_picker]
{
	category_name = "magic";
	doc = "spell summon picker";
	specializes = base_summon_dark;
	[aspect]
	{
		gold_value = 500;
	}
	[common]
	{
		description = "Summons a Picker to guard the Caster.";
		screen_name = "Summon Picker";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_133;
		inventory_icon = b_gui_ig_i_ic_sp_133_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 240;
		is_one_shot = true;
		max_level = 68;
		required_level = 48;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5);
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;

		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				duration = #infinite;
				value = ((((#magic*0.64)+10)*.41)-#str);
			}
			[*]
			{
				alteration = alter_dexterity;
				duration = #infinite;
				value = ((((#magic*0.27)+10)*.85)-#dex);
			}
			[*]
			{
				alteration = alter_intelligence;
				duration = #infinite;
				value = ((((#magic*0.09)+10)*.54)-#int);
			}
			[*]
			{
				alteration = alter_melee;
				duration = #infinite;
				value = ((#magic-16)-#melee);
			}
			[*]
			{
				alteration = alter_ranged;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nature_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_combat_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_armor;
				duration = #infinite;
				value = (((#magic*9)*.89)-#base_defense);
			}
			[*]
			{
				alteration = alter_max_life;
				duration = #infinite;
				value = (((#magic*24)*1.15)-#maxlife);
			}
			[*]
			{
				alteration = alter_life;
				duration = 1.0;
				value = (((#magic*24)*1.15)-#life);
			}
			[*]
			{
				alteration = alter_max_mana;
				duration = #infinite;
				value = (((#magic*19)*0.03)-#maxmana);
			}
			[*]
			{
				alteration = alter_mana;
				duration = 1.0;
				value = (((#magic*19)*0.03)-#mana);
			}
			[*]
			{
				alteration = alter_melee_damage_min;
				duration = #infinite;
				value = ((((#magic*4.2)*.95)-145)*0.9);
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				duration = #infinite;
				value = ((((#magic*4.2)*.95)-145)*1.1);
			}
			[*]
			{
				alteration = alter_ranged_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
		}

	}
	[spell_summon]
	{
		effect_script = "summon";
		end_script = "un_summon";
		template_name = picker_summon;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_rock_golem]
{
	category_name = "magic";
	doc = "spell Summon Rock Golem";
	specializes = base_summon_good;
	[aspect]
	{
		gold_value = 500;
	}
	[common]
	{
		description = "Summons a Rock Golem to guard the Caster.";
		screen_name = "Summon Rock Golem";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_169;
		inventory_icon = b_gui_ig_i_ic_sp_169_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 240;
		is_one_shot = true;
		max_level = 112;
		required_level = 100;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5);
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;
	}
	[spell_summon]
	{
		effect_script = "summon";
		end_script = "un_summon";
		script_params = "[scale(1.75)]";
		template_name = rock_golem;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_rock_beast]
{
	category_name = "magic";
	doc = "spell Summon Rock Beast";
	specializes = base_summon_good;
	[aspect]
	{
		gold_value = 450;
	}
	[common]
	{
		description = "Summons a Rock Beast to guard the Caster.";
		screen_name = "Summon Rock Beast";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_170;
		inventory_icon = b_gui_ig_i_ic_sp_170_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 120;
		is_one_shot = true;
		max_level = 112;
		required_level = 105;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5);
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;

		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				duration = #infinite;
				value = ((((#magic*0.64)+10)*1.38)-#str);
			}
			[*]
			{
				alteration = alter_dexterity;
				duration = #infinite;
				value = ((((#magic*0.27)+10)*.75)-#dex);
			}
			[*]
			{
				alteration = alter_intelligence;
				duration = #infinite;
				value = ((((#magic*0.09)+10)*.5)-#int);
			}
			[*]
			{
				alteration = alter_melee;
				duration = #infinite;
				value = ((#magic-5)-#melee);
			}
			[*]
			{
				alteration = alter_ranged;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nature_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_combat_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_armor;
				duration = #infinite;
				value = (((#magic*9)*1.42)-#base_defense);
			}
			[*]
			{
				alteration = alter_max_life;
				duration = #infinite;
				value = (((#magic*24)*1.22)-#maxlife);
			}
			[*]
			{
				alteration = alter_life;
				duration = 1.0;
				value = (((#magic*24)*1.22)-#life);
			}
			[*]
			{
				alteration = alter_max_mana;
				duration = #infinite;
				value = (((#magic*19)*0.14)-#maxmana);
			}
			[*]
			{
				alteration = alter_mana;
				duration = 1.0;
				value = (((#magic*19)*0.14)-#mana);
			}
			[*]
			{
				alteration = alter_melee_damage_min;
				duration = #infinite;
				value = ((((#magic*4.2)*1.15)-67)*0.9);
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				duration = #infinite;
				value = ((((#magic*4.2)*1.15)-67)*1.1);
			}
			[*]
			{
				alteration = alter_ranged_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
		}

	}
	[spell_summon]
	{
		effect_script = "summon";
		end_script = "un_summon";
		script_params = "[scale(1.75)]";
		template_name = rock_beast_summon;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_scorpion]
{
	category_name = "magic";
	doc = "spell summon scorpion";
	specializes = base_summon_good;
	[aspect]
	{
		gold_value = 500;
	}
	[common]
	{
		description = "Summons a Scorpion to guard the Caster.";
		screen_name = "Summon Scorpion";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_018;
		inventory_icon = b_gui_ig_i_ic_sp_018_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 120;
		is_one_shot = true;
		max_level = 35;
		required_level = 15;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5);
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;

		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				duration = #infinite;
				value = ((((#magic*0.64)+10)*.87)-#str);
			}
			[*]
			{
				alteration = alter_dexterity;
				duration = #infinite;
				value = ((((#magic*0.27)+10)*.75)-#dex);
			}
			[*]
			{
				alteration = alter_intelligence;
				duration = #infinite;
				value = ((((#magic*0.09)+10)*.3)-#int);
			}
			[*]
			{
				alteration = alter_melee;
				duration = #infinite;
				value = ((#magic-4)-#melee);
			}
			[*]
			{
				alteration = alter_ranged;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nature_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_combat_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_armor;
				duration = #infinite;
				value = (((#magic*9)*1.25)-#base_defense);
			}
			[*]
			{
				alteration = alter_max_life;
				duration = #infinite;
				value = (((#magic*24)*1.54)-#maxlife);
			}
			[*]
			{
				alteration = alter_life;
				duration = 1.0;
				value = (((#magic*24)*1.54)-#life);
			}
			[*]
			{
				alteration = alter_max_mana;
				duration = #infinite;
				value = (((#magic*19)*0.04)-#maxmana);
			}
			[*]
			{
				alteration = alter_mana;
				duration = 1.0;
				value = (((#magic*19)*0.04)-#mana);
			}
			[*]
			{
				alteration = alter_melee_damage_min;
				duration = #infinite;
				value = ((((#magic*4.2)*.98)-41)*0.9);
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				duration = #infinite;
				value = ((((#magic*4.2)*.98)-41)*1.1);
			}
			[*]
			{
				alteration = alter_ranged_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
		}

	}
	[spell_summon]
	{
		effect_script = "summon";
		end_script = "un_summon";
		script_params = "[scale(1.75)]";
		template_name = scorpion_summon;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_skeleton]
{
	category_name = "magic";
	doc = "spell summon skeleton";
	specializes = base_summon_dark;
	[aspect]
	{
		gold_value = 500;
	}
	[common]
	{
		description = "Summons a Skeleton to guard the Caster.";
		screen_name = "Summon Skeleton";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_091;
		inventory_icon = b_gui_ig_i_ic_sp_091_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 240;
		is_one_shot = true;
		max_level = 30;
		required_level = 10;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*13);
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;

		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				duration = #infinite;
				value = ((((#magic*0.64)+10)*1)-#str);
			}
			[*]
			{
				alteration = alter_dexterity;
				duration = #infinite;
				value = ((((#magic*0.27)+10)*.3)-#dex);
			}
			[*]
			{
				alteration = alter_intelligence;
				duration = #infinite;
				value = ((((#magic*0.09)+10)*.1)-#int);
			}
			[*]
			{
				alteration = alter_melee;
				duration = #infinite;
				value = ((#magic-2)-#melee);
			}
			[*]
			{
				alteration = alter_ranged;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nature_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_combat_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_armor;
				duration = #infinite;
				value = (((#magic*9)*1.25)-#base_defense);
			}
			[*]
			{
				alteration = alter_max_life;
				duration = #infinite;
				value = (((#magic*24)*0.9)-#maxlife);
			}
			[*]
			{
				alteration = alter_life;
				duration = 1.0;
				value = (((#magic*24)*0.9)-#life);
			}
			[*]
			{
				alteration = alter_max_mana;
				duration = #infinite;
				value = (((#magic*19)*0.02)-#maxmana);
			}
			[*]
			{
				alteration = alter_mana;
				duration = 1.0;
				value = (((#magic*19)*0.02)-#mana);
			}
			[*]
			{
				alteration = alter_melee_damage_min;
				duration = #infinite;
				value = ((((#magic*4.2)*.95)-17)*0.9);
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				duration = #infinite;
				value = ((((#magic*4.2)*.95)-17)*1.1);
			}
			[*]
			{
				alteration = alter_ranged_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
		}

	}
	[spell_summon]
	{
		effect_script = "summon";
		end_script = "un_summon";
		template_name = skeleton_summon;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_skick]
{
	category_name = "magic";
	doc = "spell summon skick";
	specializes = base_summon_dark;
	[aspect]
	{
		gold_value = 500;
	}
	[common]
	{
		description = "Summons a Skick to guard the Caster.";
		screen_name = "Summon Skick";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_118;
		inventory_icon = b_gui_ig_i_ic_sp_118_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 120;
		is_one_shot = true;
		max_level = 48;
		required_level = 28;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5);
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;

		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				duration = #infinite;
				value = ((((#magic*0.64)+10)*.64)-#str);
			}
			[*]
			{
				alteration = alter_dexterity;
				duration = #infinite;
				value = ((((#magic*0.27)+10)*.87)-#dex);
			}
			[*]
			{
				alteration = alter_intelligence;
				duration = #infinite;
				value = ((((#magic*0.09)+10)*.72)-#int);
			}
			[*]
			{
				alteration = alter_melee;
				duration = #infinite;
				value = ((#magic-8)-#melee);
			}
			[*]
			{
				alteration = alter_ranged;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nature_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_combat_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_armor;
				duration = #infinite;
				value = (((#magic*9)*.86)-#base_defense);
			}
			[*]
			{
				alteration = alter_max_life;
				duration = #infinite;
				value = (((#magic*24)*1.75)-#maxlife);
			}
			[*]
			{
				alteration = alter_life;
				duration = 1.0;
				value = (((#magic*24)*1.75)-#life);
			}
			[*]
			{
				alteration = alter_max_mana;
				duration = #infinite;
				value = (((#magic*19)*0.03)-#maxmana);
			}
			[*]
			{
				alteration = alter_mana;
				duration = 1.0;
				value = (((#magic*19)*0.03)-#mana);
			}
			[*]
			{
				alteration = alter_melee_damage_min;
				duration = #infinite;
				value = ((((#magic*4.2)*1.15)-102)*0.9);
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				duration = #infinite;
				value = ((((#magic*4.2)*1.15)-102)*1.1);
			}
			[*]
			{
				alteration = alter_ranged_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
		}

	}
	[spell_summon]
	{
		effect_script = "summon";
		end_script = "un_summon";
		template_name = skick_summon;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_spiked_dweller]
{
	category_name = "magic";
	doc = "spell Summon Spiked Dweller";
	specializes = base_summon_good;
	[aspect]
	{
		gold_value = 450;
	}
	[common]
	{
		description = "Summons a Spiked Dweller to guard the Caster.";
		screen_name = "Summon Spiked Dweller";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_055;
		inventory_icon = b_gui_ig_i_ic_sp_055_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 360;
		is_one_shot = true;
		max_level = 68;
		required_level = 48;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5);
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;

		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				duration = #infinite;
				value = ((((#magic*0.64)+10)*.42)-#str);
			}
			[*]
			{
				alteration = alter_dexterity;
				duration = #infinite;
				value = ((((#magic*0.27)+10)*.47)-#dex);
			}
			[*]
			{
				alteration = alter_intelligence;
				duration = #infinite;
				value = ((((#magic*0.09)+10)*.38)-#int);
			}
			[*]
			{
				alteration = alter_melee;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nature_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_combat_magic;
				duration = #infinite;
				value = ((#magic-18)-#combat_magic_level);
			}
			[*]
			{
				alteration = alter_armor;
				duration = #infinite;
				value = (((#magic*9)*.9)-#base_defense);
			}
			[*]
			{
				alteration = alter_max_life;
				duration = #infinite;
				value = (((#magic*24)*0.51)-#maxlife);
			}
			[*]
			{
				alteration = alter_life;
				duration = 1.0;
				value = (((#magic*24)*0.51)-#life);
			}
			[*]
			{
				alteration = alter_max_mana;
				duration = #infinite;
				value = (((#magic*19)*0.09)-#maxmana);
			}
			[*]
			{
				alteration = alter_mana;
				duration = 1.0;
				value = (((#magic*19)*0.09)-#mana);
			}
			[*]
			{
				alteration = alter_melee_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_min;
				duration = #infinite;
				value = ((((#magic*4.2)*.7)-129)*0.9);
			}
			[*]
			{
				alteration = alter_cmagic_damage_max;
				duration = #infinite;
				value = ((((#magic*4.2)*.7)-129)*1.1);
			}
			[*]
			{
				alteration = alter_nmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
		}

	}
	[spell_summon]
	{
		effect_script = "summon";
		end_script = "un_summon";
		script_params = "[scale(1.75)]";
		template_name = spiked_dweller_summon;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_troll_forest]
{
	category_name = "magic";
	doc = "spell summon troll forest";
	specializes = base_summon_dark;
	[aspect]
	{
		gold_value = 500;
	}
	[common]
	{
		description = "Summons a Forest Troll to guard the Caster.";
		screen_name = "Summon Forest Troll";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_124;
		inventory_icon = b_gui_ig_i_ic_sp_124_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 240;
		is_one_shot = true;
		max_level = 53;
		required_level = 33;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5);
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;

		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				duration = #infinite;
				value = ((((#magic*0.64)+10)*.65)-#str);
			}
			[*]
			{
				alteration = alter_dexterity;
				duration = #infinite;
				value = ((((#magic*0.27)+10)*1)-#dex);
			}
			[*]
			{
				alteration = alter_intelligence;
				duration = #infinite;
				value = ((((#magic*0.09)+10)*.91)-#int);
			}
			[*]
			{
				alteration = alter_melee;
				duration = #infinite;
				value = ((#magic-5)-#melee);
			}
			[*]
			{
				alteration = alter_ranged;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nature_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_combat_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_armor;
				duration = #infinite;
				value = (((#magic*9)*.57)-#base_defense);
			}
			[*]
			{
				alteration = alter_max_life;
				duration = #infinite;
				value = (((#magic*24)*1.6)-#maxlife);
			}
			[*]
			{
				alteration = alter_life;
				duration = 1.0;
				value = (((#magic*24)*1.6)-#life);
			}
			[*]
			{
				alteration = alter_max_mana;
				duration = #infinite;
				value = (((#magic*19)*0.09)-#maxmana);
			}
			[*]
			{
				alteration = alter_mana;
				duration = 1.0;
				value = (((#magic*19)*0.09)-#mana);
			}
			[*]
			{
				alteration = alter_melee_damage_min;
				duration = #infinite;
				value = ((((#magic*4.2)*1)-62)*0.9);
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				duration = #infinite;
				value = ((((#magic*4.2)*1)-62)*1.1);
			}
			[*]
			{
				alteration = alter_ranged_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
		}

	}
	[spell_summon]
	{
		effect_script = "summon";
		end_script = "un_summon";
		template_name = troll_forest_summon;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_wolf_black]
{
	category_name = "magic";
	doc = "spell Summon Black Wolf";
	specializes = base_summon_good;
	[aspect]
	{
		gold_value = 450;
	}
	[common]
	{
		description = "Summons a Black Wolf to guard the Caster.";
		screen_name = "Summon Black Wolf";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_046;
		inventory_icon = b_gui_ig_i_ic_sp_046_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 360;
		is_one_shot = true;
		max_level = 60;
		required_level = 40;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5);
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;

		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				duration = #infinite;
				value = ((((#magic*0.64)+10)*.67)-#str);
			}
			[*]
			{
				alteration = alter_dexterity;
				duration = #infinite;
				value = ((((#magic*0.27)+10)*.88)-#dex);
			}
			[*]
			{
				alteration = alter_intelligence;
				duration = #infinite;
				value = ((((#magic*0.09)+10)*.67)-#int);
			}
			[*]
			{
				alteration = alter_melee;
				duration = #infinite;
				value = ((#magic-12)-#melee);
			}
			[*]
			{
				alteration = alter_ranged;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nature_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_combat_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_armor;
				duration = #infinite;
				value = (((#magic*9)*.71)-#base_defense);
			}
			[*]
			{
				alteration = alter_max_life;
				duration = #infinite;
				value = (((#magic*24)*0.7)-#maxlife);
			}
			[*]
			{
				alteration = alter_life;
				duration = 1.0;
				value = (((#magic*24)*0.7)-#life);
			}
			[*]
			{
				alteration = alter_max_mana;
				duration = #infinite;
				value = (((#magic*19)*0.01)-#maxmana);
			}
			[*]
			{
				alteration = alter_mana;
				duration = 1.0;
				value = (((#magic*19)*0.01)-#mana);
			}
			[*]
			{
				alteration = alter_melee_damage_min;
				duration = #infinite;
				value = ((((#magic*4.2)*.75)-72)*0.9);
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				duration = #infinite;
				value = ((((#magic*4.2)*.75)-72)*1.1);
			}
			[*]
			{
				alteration = alter_ranged_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
		}

	}
	[spell_summon]
	{
		effect_script = "summon";
		end_script = "un_summon";
		script_params = "[scale(1.75)]";
		template_name = wolf_black_summon;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_wraith]
{
	category_name = "magic";
	doc = "spell summon wraith";
	specializes = base_summon_dark;
	[aspect]
	{
		gold_value = 500;
	}
	[common]
	{
		description = "Summons a Wraith to guard the Caster.";
		screen_name = "Summon Wraith";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_136;
		inventory_icon = b_gui_ig_i_ic_sp_136_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 240;
		is_one_shot = true;
		max_level = 73;
		required_level = 53;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5);
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;

		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				duration = #infinite;
				value = ((((#magic*0.64)+10)*.49)-#str);
			}
			[*]
			{
				alteration = alter_dexterity;
				duration = #infinite;
				value = ((((#magic*0.27)+10)*.45)-#dex);
			}
			[*]
			{
				alteration = alter_intelligence;
				duration = #infinite;
				value = ((((#magic*0.09)+10)*.69)-#int);
			}
			[*]
			{
				alteration = alter_melee;
				duration = #infinite;
				value = ((#magic-7)-#melee);
			}
			[*]
			{
				alteration = alter_ranged;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nature_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_combat_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_armor;
				duration = #infinite;
				value = (((#magic*9)*.94)-#base_defense);
			}
			[*]
			{
				alteration = alter_max_life;
				duration = #infinite;
				value = (((#magic*24)*1.05)-#maxlife);
			}
			[*]
			{
				alteration = alter_life;
				duration = 1.0;
				value = (((#magic*24)*1.05)-#life);
			}
			[*]
			{
				alteration = alter_max_mana;
				duration = #infinite;
				value = (((#magic*19)*0.04)-#maxmana);
			}
			[*]
			{
				alteration = alter_mana;
				duration = 1.0;
				value = (((#magic*19)*0.04)-#mana);
			}
			[*]
			{
				alteration = alter_melee_damage_min;
				duration = #infinite;
				value = ((((#magic*4.2)*1)-126)*0.9);
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				duration = #infinite;
				value = ((((#magic*4.2)*1)-126)*1.1);
			}
			[*]
			{
				alteration = alter_ranged_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
		}

	}
	[spell_summon]
	{
		effect_script = "summon";
		end_script = "un_summon";
		template_name = wraith_summon;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_wraith_archer]
{
	category_name = "magic";
	doc = "spell summon wraith_archer";
	specializes = base_summon_dark;
	[aspect]
	{
		gold_value = 500;
	}
	[common]
	{
		description = "Summons a Wraith Archer to guard the Caster.";
		screen_name = "Summon Wraith Archer";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_139;
		inventory_icon = b_gui_ig_i_ic_sp_139_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 360;
		is_one_shot = true;
		max_level = 77;
		required_level = 57;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5);
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;
	}
	[spell_summon]
	{
		effect_script = "summon";
		end_script = "un_summon";
		template_name = wraith_archer_summon;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_zombie_headless]
{
	category_name = "magic";
	doc = "spell summon zombie_headless";
	specializes = base_summon_dark;
	[aspect]
	{
		gold_value = 500;
	}
	[common]
	{
		description = "Summons a Zombie to guard the Caster.";
		screen_name = "Summon Zombie";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_130;
		inventory_icon = b_gui_ig_i_ic_sp_130_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling";
		effect_duration = 300;
		is_one_shot = true;
		max_level = 63;
		required_level = 43;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5);
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_terrain;
		usage_context_flags = uc_passive;

		[enchantments]
		{
			[*]
			{
				alteration = alter_strength;
				duration = #infinite;
				value = ((((#magic*0.64)+10)*.44)-#str);
			}
			[*]
			{
				alteration = alter_dexterity;
				duration = #infinite;
				value = ((((#magic*0.27)+10)*.41)-#dex);
			}
			[*]
			{
				alteration = alter_intelligence;
				duration = #infinite;
				value = ((((#magic*0.09)+10)*.33)-#int);
			}
			[*]
			{
				alteration = alter_melee;
				duration = #infinite;
				value = ((#magic-18)-#melee);
			}
			[*]
			{
				alteration = alter_ranged;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nature_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_combat_magic;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_armor;
				duration = #infinite;
				value = (((#magic*9)*.46)-#base_defense);
			}
			[*]
			{
				alteration = alter_max_life;
				duration = #infinite;
				value = (((#magic*24)*1.3)-#maxlife);
			}
			[*]
			{
				alteration = alter_life;
				duration = 1.0;
				value = (((#magic*24)*1.3)-#life);
			}
			[*]
			{
				alteration = alter_max_mana;
				duration = #infinite;
				value = (((#magic*19)*0.01)-#maxmana);
			}
			[*]
			{
				alteration = alter_mana;
				duration = 1.0;
				value = (((#magic*19)*0.01)-#mana);
			}
			[*]
			{
				alteration = alter_melee_damage_min;
				duration = #infinite;
				value = ((((#magic*4.2)*.75)-85)*0.9);
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				duration = #infinite;
				value = ((((#magic*4.2)*.75)-85)*1.1);
			}
			[*]
			{
				alteration = alter_ranged_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_ranged_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_cmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_min;
				duration = #infinite;
				value = 0;
			}
			[*]
			{
				alteration = alter_nmagic_damage_max;
				duration = #infinite;
				value = 0;
			}
		}

	}
	[spell_summon]
	{
		effect_script = "summon";
		end_script = "un_summon";
		template_name = zombie_headless_summon;
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_ice_warriors_monster]
{
	category_name = "magic";
	doc = "spell_summon_ice_warrior";
	specializes = base_spell_monster;
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "ice_mage_charge" );
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[inventory]
	{
		[delayed_pcontent]
		{
			[oneof*]
			{
				[all*]
				{
					chance = 0.500;
					il_main = ice_warrior_summon;
				}
				[all*]
				{
					chance = 0.500;
					il_main = ice_archer_summon;
				}
			}
		}
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling Monster";
		effect_duration = 29;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
		state_name = "Controlling Monster";
		require_state_check = false;
	}
	[spell_summon_random]
	{
		monster_summon = true;
		spawn_radius	= 3.0;
		effect_script = "summon";
		end_script = "un_summon";
		script_params = "[scale(1.75)]";
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_swamp_witch_summon]
{
	category_name = "magic";
	doc = "spell_swamp_witch_summon";
	specializes = base_spell_monster;
	[inventory]
	{
		[delayed_pcontent]
		{
			[oneof*]
			{
				[all*]
				{
					chance = 0.500;
					il_main = swamp_creature_summon;
				}
				[all*]
				{
					chance = 0.500;
					il_main = swamp_slinger_summon;
				}
			}
		}
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling Monster";
		effect_duration = 29;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
		state_name = "Controlling Monster";
		require_state_check = false;
	}
	[spell_summon_random]
	{
		monster_summon = true;
		spawn_radius	= 3.0;
		effect_script = "summon";
		end_script = "un_summon";
		script_params = "[scale(1.75)]";
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_droog_summon]
{
	category_name = "magic";
	doc = "spell_droog_summon";
	specializes = base_spell_monster;
	[inventory]
	{
		[delayed_pcontent]
		{
			[oneof*]
			{
				[all*]
				{
					chance = 1.000;
					il_main = sand_basher_summon;
				}
			}
		}
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling Monster";
		effect_duration = 29;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
		state_name = "Controlling Monster";
		require_state_check = false;
	}
	[spell_summon_random]
	{
		monster_summon = true;
		spawn_radius	= 3.0;
		effect_script = "summon";
		end_script = "un_summon";
		script_params = "[scale(1.75)]";
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_gresh]
{
	category_name = "magic";
	doc = "spell_summon_gresh";
	specializes = base_spell_monster;
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "gresh_summon_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[inventory]
	{
		[delayed_pcontent]
		{
			[oneof*]
			{
				[all*]
				{
					chance = 0.500;
					il_main = skeleton_mercenary_summon;
				}
				[all*]
				{
					chance = 0.500;
					il_main = skeleton_mercenary_archer_summon;
				}
			}
		}
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling Monster";
		effect_duration = 29;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
		state_name = "Controlling Monster";
		require_state_check = true;
		cast_sub_animation = 1;
	}
	[spell_summon_random]
	{
		monster_summon = true;
		spawn_radius	= 3.0;
		effect_script = "gresh_summon";
		script_params = "[scale(1.75)]";
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_seck_mage]
{
	category_name = "magic";
	doc = "spell_summon_seck_mage";
	specializes = base_spell_monster;
	[inventory]
	{
		[delayed_pcontent]
		{
			[oneof*]
			{
				[all*]
				{
					chance = 1.000;
					il_main = punisher_summon;
				}
			}
		}
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling Monster";
		effect_duration = 29;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
		state_name = "Controlling Monster";
		require_state_check = false;
	}
	[spell_summon_random]
	{
		monster_summon = true;
		spawn_radius	= 3.0;
		effect_script = "summon";
		end_script = "un_summon";
		script_params = "[scale(1.75)]";
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_summon_seck_elite_mage]
{
	category_name = "magic";
	doc = "spell_summon_seck_mage";
	specializes = base_spell_monster;
	[inventory]
	{
		[delayed_pcontent]
		{
			[oneof*]
			{
				[all*]
				{
					chance = 1.000;
					il_main = lava_imp_03_summon;
				}
			}
		}
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 1;
		caster_state_name = "Controlling Monster";
		effect_duration = 29;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
		state_name = "Controlling Monster";
		require_state_check = false;
	}
	[spell_summon_random]
	{
		monster_summon = true;
		spawn_radius	= 3.0;
		effect_script = "summon";
		end_script = "un_summon";
		script_params = "[scale(1.75)]";
		description = "Summoned Creature";
		caster_description = "Controlling Summoned";
	}
}
[t:template,n:spell_sun_ray]
{
	category_name = "magic";
	doc = "spell sun ray";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 160;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Focuses a piercing shaft of light that incinerates the Enemy.";
		screen_name = "Sun Ray";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "sun_ray_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_061;
		inventory_icon = b_gui_ig_i_ic_sp_061_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*6;
		attack_damage_modifier_max = (#magic+1)*6.63+1.1;
		cast_range = 13;
		cast_reload_delay = 1;
		is_one_shot = false;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*6.4)+1;
		max_level = 76;
		required_level = 66;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable;
		usage_context_flags = uc_offensive;
		cast_sub_animation = 1;
	}
	[spell_lightning]
	{
		effect_script	= laser_major;
		dur				= 0.5;
	}
}
[t:template,n:spell_nova_strike]
{
	category_name = "magic";
	doc = "spell nova strike";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 350;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Launches the force of an exploding sun upon the Enemy.";
		screen_name = "Nova Strike";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("energy_ball2");
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_166;
		inventory_icon = b_gui_ig_i_ic_sp_166_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*4.25+1;
		attack_damage_modifier_max = (#magic+1)*4.7+1;
		cast_range = 12;
		cast_reload_delay = 3;
		is_one_shot = false;
		max_level = 96;
		required_level = 70;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*3)+1;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_terrain;
		usage_context_flags = uc_offensive;
	}
	[spell_default] {}
}
[t:template,n:spell_swamp_slinger_ball]
{
	category_name = "magic";
	doc = "spell swamp slinger ball";
	specializes = base_spell_monster;
	[attack]
	{
		aiming_error_range_x = 2;
		aiming_error_range_y = 2;
		ammo_attach_bone = weapon_grip;
		ammo_template = swamp_slinger_moss;
		damage_max = 67;
		damage_min = 65;
		use_aiming_error = true;
	}
	[magic]
	{
		cast_range = 12;
		cast_reload_delay = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		velocity = 10;
	}
	[spell_launch]
	{
		number = 1;
	}
}
[t:template,n:spell_shared_pain]
{
	category_name = "magic";
	doc = "spell shared pain";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 50;
	}
	[common]
	{
		description = "<alter_reflect_damage>% of damage taken is reflected back to the attacker.";
		screen_name = "Shared Pain";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_052;
		inventory_icon = b_gui_ig_i_ic_sp_052_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_experience = 4+(#magic);
		cast_range = 14;
		cast_reload_delay = 1;
		effect_duration = (#magic*0.6);
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*6.9-0.7);
		max_level = 70;
		required_level = 50;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		state_name = reflect;
		require_state_check = false;

		[enchantments]
		{
			[*]
			{
				alteration = alter_reflect_damage;
				description = "Symp Damage";
				duration = (#magic*0.6);
				value = 50;
			}
			[*]
			{
				alteration = alter_reflect_damage_chance;
				description = "Reflect Damage chance";
				duration = (#magic*0.6);
				value = 100;
			}
		}
	}
	[spell_status_effect]
	{
		description = "Shared Pain";
		effect_script = sympathy_damage;
	}
}
[t:template,n:spell_syrrus_fire]
{
	category_name = "magic";
	doc = "Syrrus Fire";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 85;
		damage_min = 79;
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 1;
		effect_duration = 5;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_fire]
	{
		effect_script = syrrus_fire;
		particle_fit = 0.2;
	}
}
[t:template,n:spell_tesla_bolt]
{
	category_name = "magic";
	doc = "Tesla Bolt";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 3;
		damage_min = 2;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("tesla_bolt");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_instant_hit] {}
}
[t:template,n:spell_tesla_bolt2]
{
	category_name = "magic";
	doc = "Tesla Bolt";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 3;
		damage_min = 2;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("tesla_bolt2");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 10;
		cast_reload_delay = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_instant_hit] {}
}
[t:template,n:spell_transmute]
{
	category_name = "magic";
	doc = "spell Transmute";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 50;
	}
	[common]
	{
		description = "Objects on the ground can be transformed into gold, with some value lost in the process. Move the cursor over an item (gloved hand cursor appears) and press the 'c' button (with default configuration). Potions and Spells cannot be transmuted.";
		screen_name = "Transmute";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_155;
		inventory_icon = b_gui_ig_i_ic_sp_155_inv;
	}
	[magic]
	{
		cast_experience = 1;
		cast_range = 12;
		cast_reload_delay = 0;
		is_one_shot = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*3.7-1);
		max_level = 111;
		required_level = 1;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = TT_TRANSMUTABLE | TT_AND | TT_NOT_ACTOR;
		usage_context_flags = uc_passive;
	}
	[spell_transmute]
	{
		effect_script = "transmute";
		script_params = "";
	}
}
[t:template,n:scroll_transmute]
{
	category_name = "magic";
	doc = "scroll Transmute";
	specializes = base_scroll_good;
	[aspect]
	{
		gold_value = 50;
	}
	[common]
	{
		description = "Objects on the ground can be transformed into gold, with some value being lost in the process. Item must be under the cursor then the 'c' button pressed (with default configuration).";
		screen_name = "Transmute Scroll";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sc_003;
		inventory_icon = b_gui_ig_i_ic_sc_003_inv;
	}
	[magic]
	{
		one_use = true;
		pcontent_level = 1;
		cast_experience = 1;
		cast_range = 15;
		cast_reload_delay = 5;
		is_one_shot = true;
		mana_cost = 1;
		mana_cost_modifier = (29);
		max_level = 111;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_weapon_melee | tt_weapon_ranged | tt_armor | tt_shield;
		usage_context_flags = uc_passive;
	}
	[spell_transmute]
	{
		effect_script = "transmute";
		script_params = "";
	}
}
[t:template,n:spell_tremor]
{
	category_name = "magic";
	doc = "spell Tremor";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 100;
	}
	[attack]
	{
		area_damage_radius = 10;
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "The Caster calls forth a violent earthquake, damaging Enemies caught within the tremble.";
		screen_name = "Tremor";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_140;
		inventory_icon = b_gui_ig_i_ic_sp_140_inv;
	}
	[magic]
	{
		attack_damage_modifier_min = (#magic+1)*4.2+2.1;
		attack_damage_modifier_max = (#magic+1)*5.12+3.15;
		cast_range = 12;
		cast_reload_delay = 1;
		command_cast = true;
		is_one_shot = true;
		does_damage_per_second = true;
		mana_cost = 0;
		mana_cost_modifier = ((#magic+1)*5.0459);
		max_level = 118;
		required_level = 108;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable | tt_terrain;
		usage_context_flags = uc_offensive;
	}
	[physics]
	{
		explosion_magnitude = 10;
	}
	[spell_area_effect]
	{
		damage_checks = 1;
		damage_frequency = 1;
		initial_delay = .33;
		effect_script = "earthquake";
	}
}
[t:template,n:spell_triple_strike]
{
	category_name = "magic";
	doc = "spell triple strike";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 100;
	}
	[common]
	{
		description = "Grants the Target the ability to attack three adjacent Enemies with each melee weapon swing.";
		screen_name = "Triple Strike";
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_098;
		inventory_icon = b_gui_ig_i_ic_sp_098_inv;
	}
	[magic]
	{
		cast_experience = (#magic*0.75);
		cast_range = 8;
		cast_reload_delay = 1;
		effect_duration = 4.445*(#magic+5);
		is_one_shot = true;
		mana_cost = 3;
		mana_cost_modifier = (#magic*11.25);
		max_level = 54;
		required_level = 22;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_human_party_member;
		target_type_flags_not = tt_actor_pack_only | tt_summoned;
		usage_context_flags = uc_defensive;
		state_name = TripleS;
		require_state_check = false;
	}
	[spell_multiple_hit]
	{
		hit_script		= triple_strike_hit;
		effect_script	= triple_strike;
		description	= "Triple Strike";
	}
}
[t:template,n:spell_weaken]
{
	category_name = "magic";
	doc = "spell weaken";
	specializes = base_spell_dark;
	[aspect]
	{
		gold_value = 150;
	}
	[common]
	{
		description = "Rots the muscles of the Enemy, reducing Minimum Melee Damage by <alter_melee_damage_min> and Maximum Melee Damage by <alter_melee_damage_max>. Mana cost dependent on the power of the Target.";
		screen_name = "Weaken";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "combat_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_086;
		inventory_icon = b_gui_ig_i_ic_sp_086_inv;
	}
	[magic]
	{
		apply_enchantments = false;
		cast_experience = 11;
		cast_range = 10;
		cast_reload_delay = 1;
		effect_duration = 45+(#magic*2);
		is_one_shot = true;
		mana_cost = 1;
		mana_cost_modifier = (#maxlife*0.75);
		mana_cost_ui = 2;
		mana_cost_ui_modifier = (#maxmana*1.5);
		max_level = 22;
		required_level = 7;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_passive;
		state_name = weaken;
		[enchantments]
		{
			[*]
			{
				alteration = alter_melee_damage_min;
				description = "Lower Minimun Damage";
				duration = 45+(#magic*2);
				initial_delay = 0.25;
				multiply_value = true;
				value = -(1+(#magic+5)*0.004);
			}
			[*]
			{
				alteration = alter_melee_damage_max;
				description = "Lower Maximum Damage";
				duration = 45+(#magic*2);
				initial_delay = 0.25;
				multiply_value = true;
				value = -(1+(#magic+5)*0.004);
			}
		}
	}
	[spell_status_effect]
	{
		description = "Weakened";
		effect_script = weaken;
	}
}
[t:template,n:spell_wraith_hands]
{
	category_name = "magic";
	doc = "spell wraith hands";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 140;
		damage_min = 120;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("wraith_hands");
				condition* = receive_world_message("we_req_cast");
			}
		}
	}
	[magic]
	{
		cast_range = 13;
		cast_reload_delay = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
	}
	[spell_default] {}
}
[t:template,n:spell_wraith_zap]
{
	category_name = "magic";
	doc = "spell wratih zap";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 200;
		damage_min = 180;
	}
	[common]
	{
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script("wraith_zap");
				condition* = receive_world_message("we_req_cast");
			}
			[*]
			{
				action* = call_sfx_script("wraith_zap_charge");
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[magic]
	{
		cast_range = 14;
		cast_reload_delay = 1;
		mana_cost = 0;
		requires_line_of_sight = true;
		speed_bias = 1;
		target_type_flags = tt_conscious_enemy;
		usage_context_flags = uc_offensive;
		cast_sub_animation = 1;
	}
	[spell_instant_hit] {}
}
[t:template,n:spell_zap]
{
	category_name = "magic";
	doc = "spell zap";
	specializes = base_spell_good;
	[aspect]
	{
		gold_value = 25;
	}
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[common]
	{
		description = "Releases a small bolt of energy at the Enemy.";
		screen_name = "Zap";
		[template_triggers]
		{
			[*]
			{
				action* = call_sfx_script( "nature_spell_sparkle" );
				condition* = receive_world_message("we_dropped");
			}
			[*]
			{
				action* = call_sfx_script( "zap_charge" );
				condition* = receive_world_message("we_req_cast_charge");
			}
		}
	}
	[gui]
	{
		active_icon = b_gui_ig_i_ic_sp_001;
		inventory_icon = b_gui_ig_i_ic_sp_001_inv;
	}
	[magic]
	{
		attack_damage_modifier_max = (#magic+1) * 2.7 + 1.3;
		attack_damage_modifier_min = (#magic+1) * 2.1 + 0.9;
		cast_range = 8;
		cast_reload_delay = 0.15;
		mana_cost = 1;
		mana_cost_modifier = (#magic*0.99);
		max_level = 21;
		requires_line_of_sight = true;
		speed_bias = 2;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable;
		usage_context_flags = uc_offensive;
	}
	[spell_lightning]
	{
		effect_script	= zap;
		dur				= 0.15;
	}
}
[t:template,n:spell_apprentice_zap]
{
	category_name = "magic";
	doc = "spell zap";
	specializes = base_spell_monster;
	[attack]
	{
		damage_max = 0;
		damage_min = 0;
	}
	[magic]
	{
		attack_damage_modifier_max = (#magic+1) * 4.1 + 0.9;
		attack_damage_modifier_min = (#magic+1) * 3.4 + 0.7;
		cast_range = 8;
		cast_reload_delay = 1.0;
		mana_cost = 1;
		mana_cost_modifier = (#magic*0.7);
		requires_line_of_sight = true;
		speed_bias = 2;
		target_type_flags = tt_conscious_enemy | tt_unconscious_enemy | tt_breakable;
		usage_context_flags = uc_offensive;
	}
	[spell_lightning]
	{
		effect_script	= zap;
		dur				= 0.15;
	}
}